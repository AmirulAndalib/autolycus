{"version":3,"sources":["uri.js","services/LoginService.js","services/SignupService.js","components/Login.js","components/ThreeDotLoader.js","components/FileManager/services/TorrentService.js","components/FileManager/services/FileService.js","components/VideoPlayer.js","components/FileManager/components/AddMagnet.js","components/FileManager/components/TorrentCard.js","components/FileManager/components/FileCard.js","components/FileManager/components/Home.js","components/FileManager/services/TorrentSearchService.js","components/FileManager/components/TorrentSearchCard.js","components/FileManager/FileManagerViews.js","components/FileManager/FileManagerInfo.js","components/FileManager/StorageIndicator.js","components/FileManager/services/FetchStorageData.js","components/FileManager/FileManager.js","views/Dashboard.js","views/ConfigureServer.js","views/Home.js","index.js"],"names":["API_URL","uri","localStorage","getItem","getAuthToken","auth","JSON","parse","clearTokens","setItem","username","a","usernamebox","document","getElementById","user_exists","axios","get","then","response","style","border","catch","error","AuthLogin","password","password_box","ValidateUsername","post","data","stringify","window","location","reload","console","log","AuthLogout","headers","access_token","body","refreshAccessToken","method","url","Authorization","refresh_token","res","e","status","ValidateAuth","auto_refresh","interval","setInterval","handleErrors","ok","message","statusText","email","fetch","name","json","err","Login","props","state","handleChange","bind","handleSubmit","handleCreateAccount","validateInputs","key","target","value","this","setState","reset","color","DoesUserExists","emailbox","DoesEmailExists","AuthSignup","id","display","getElementsByClassName","innerHTML","button","className","type","onChange","placeholder","href","onClick","React","Component","withRouter","ThreeDotLoader","position","top","left","marginLeft","marginTop","height","width","getAuthHeader","getFileDetails","Hash","downloadFileUrl","path","file_path","copyFile","from","to","iscut","hls_element","VideoPlayer","updatePlayerWidth","timer","clearInterval","offsetWidth","marginBottom","Fragment","borderRadius","controls","autoPlay","playsInline","src","AddMagnet","handleMagnetSubmit","inputBox","element_id","magnet","element","setTimeout","SendMagnet","videoUrl","TorrentCard","threeDotMenuVisible","explorerCard","humanFileSize","handleDotMenu","handleOutsideClick","handleDownload","handleDelete","trimString","getTorrentSize","handlePaste","size","i","Math","floor","pow","toFixed","removeEventListener","addEventListener","node","contains","item","cogoToast","loading","download_path","public_url_hash","createElement","download","click","remove","success","hideAfter","DeleteTorrent","hash","string","length","innerWidth","postfix","slice","trim","is_finished","total_bytes","downloaded_bytes","download_speed","removeItem","warn","onMouseOver","updateActiveItemHover","onMouseOut","cardHandler","percent","progress","ref","FileCard","MenuTranslateY","getFileIcon","handleCopy","handleRename","handleConvertMp4toHls","handleConvertHlstoMp4","tFetcher","history","pushState","goBack","ext","includes","parent","hide","paddingBottom","convertMp4toHlsService","newHlsChild","alreadyPresent","children","forEach","index","push","convertHlstoMp4Service","newMp4Child","windowH","innerHeight","menuH","clientY","adjust","info","addItem","copyLink","el","appendChild","select","execCommand","removeChild","backgroundColor","confirmDelete","onFocus","defaultValue","confirmRename","newname","renameFile","renameItem","cursor","map","idx","updateCard","transform","Home","card","parent_items","previous_item","filter","concat","b64","btoa","unescape","encodeURIComponent","open","focus","child","s","split","newpath","join","j","scrollBehavior","torrents","apiTorrentSearch","query","getMagnetFromSearch","addMagnet","SearchTorrent","isLoading","handleTorrentSearch","handleClick","copyToClipboard","updateSearchResults","copyMagnet","addToDownload","searchResults","class","paddingRight","seed","created","source","toUpperCase","RecycleBin","Help","Settings","FileManagerViews","view","FileManagerInfo","humanDate","unixTimestamp","dateObject","Date","toLocaleDateString","weekday","year","month","day","date","hours","getHours","minutes","getMinutes","ampm","formatAMPM","activeItem","added_time","storageIndicator","getIndicatorLength","usedBytes","totalBytes","isNaN","stats","FetchStorageData","FileManager","updateView","storageTimer","updateTorrents","updateStorageState","Fetch","FetchTorrents","elements","Dashboard","authorized","component","ConfigureServer","apiDown","pingAPI","handleConfigureClick","handleReset","findGetParameter","apiParameter","decodeURIComponent","origin","resp","q","search","match","RegExp","configureBox","toggle","input","startsWith","App","basename","process","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.034fe364.chunk.js","sourcesContent":["let API_URL = 'http://localhost:5000/api'\n\nfunction uri(){\n    let uri = localStorage.getItem('autolycus-uri');\n    if (uri){\n        return uri;\n    } else {\n        return API_URL;\n    }\n}\n\nexport {\n    API_URL,\n    uri\n}","import {uri} from '../uri';\nimport axios from 'axios';\n\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        return {status: response.status, message: response.statusText};\n    }\n    return response;\n}\n\nfunction getAuthToken(validate=false){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction clearTokens(){\n    localStorage.setItem('autolycus-auth', 'undefined');\n}\n\n\nasync function ValidateUsername(username){\n    let usernamebox = document.getElementById(\"login-username-box\");\n    let user_exists = false;\n\n    await axios.get(uri()+\"/auth/user-exists?username=\"+username)\n    .then(function (response) {\n        usernamebox.style.border = \"1px solid #efefef\";\n        user_exists = true;\n    }).catch(function (error) {\n        usernamebox.style.border = \"1px solid red\";\n      });\n    \n    return user_exists;\n}\n\n\nfunction AuthLogin(username, password) {\n    let password_box = document.getElementById(\"login-password-box\");\n    ValidateUsername(username)\n    .then(function (user_exists) {\n        if (user_exists){\n            axios.post(uri()+\"/auth/login\", {\n                username: username,\n                password: password \n            }).then(function (response) {\n                password_box.style.border = \"1px solid #efefef\";\n                response.data[\"username\"] = username;\n                localStorage.setItem('autolycus-auth', JSON.stringify(response.data));\n                window.location.reload(true);\n              })\n              .catch(function (error) {\n                clearTokens();\n                password_box.style.border = \"1px solid red\";\n                console.log(\"[ERROR] in AuthLogin:\", error);\n              });\n        }\n    });\n}\n\n\nfunction AuthLogout(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n        axios.post(uri()+\"/auth/logout\", {\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            },\n            body: JSON.stringify(auth)\n        })\n        .then(function (response) {\n            clearTokens();\n            window.location.reload(true);\n        }).catch(function (error) {\n            clearTokens();\n            window.location.reload(true);\n        });\n    }\n}\n\n\nasync function refreshAccessToken(){\n    let auth = getAuthToken();\n    \n    return axios({ method: 'post', url: uri()+\"/auth/refresh-token\", headers: { Authorization: `Bearer ${auth.refresh_token}` } })\n    .then(function (response) {\n        let res = response.data;\n        auth.access_token = res.access_token;\n        localStorage.setItem('autolycus-auth', JSON.stringify(auth));\n        return true;\n    }).catch(function (e) {\n        if (e.response.status === 401){\n            console.log(\"Refresh token expired please login\", e);\n            return false\n        }else{\n            console.error(\"[ERROR] in refreshAccessToken:\", e)\n            return false;\n        }\n    });\n}\n\n// refresh access token every 15 minute\nasync function ValidateAuth(auto_refresh=false, interval=900){\n    let auth = getAuthToken();\n    return axios.get(uri()+\"/auth/user-details\", {\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${auth.access_token}` \n        }\n    }).then(function (response) {\n        let res = response.data;\n        if (auto_refresh){\n            window.setInterval(refreshAccessToken, 1000*interval);\n        }\n        return true;\n    }).catch(function (e) {\n        if (e.response.status === 401){\n            if (auto_refresh){\n                window.setInterval(refreshAccessToken, 1000*interval);\n            }\n            return refreshAccessToken();\n        }else{\n            console.log(e);\n            return false;\n        }\n    });\n}\n\nexport {\n    AuthLogin,\n    ValidateUsername,\n    ValidateAuth,\n    refreshAccessToken,\n    clearTokens,\n    AuthLogout\n}","import {uri} from \"../uri\";\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        return {status: response.status, message: response.statusText};\n    }\n    return response;\n}\n\nfunction DoesUserExists(username){\n    let usernamebox = document.getElementById(\"login-username-box\");\n\n    return fetch(uri()+\"/auth/user-exists?username=\"+username)\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                usernamebox.style.border = \"1px solid red\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                usernamebox.style.border = \"1px solid #efefef\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in DoesUserExists:\", err);\n        });\n    }\n\nfunction DoesEmailExists(email){\n    let emailbox = document.getElementById(\"signup-email-box\");\n\n    return fetch(uri()+\"/auth/email-exists?email=\"+email)\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                emailbox.style.border = \"1px solid red\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                emailbox.style.border = \"1px solid #efefef\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in DoesEmailExists:\", err);\n        });\n}\n\nasync function AuthSignup(username, email, password) {\n    await fetch(uri()+\"/auth/signup\", {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({name: username, username: username, email: email, password: password})\n    })\n    .then(handleErrors)\n    .then(response => {\n        if (response.status === 200){\n            response.json().then( json => {\n                localStorage.setItem('autolycus-auth', JSON.stringify(json));\n                window.location.reload(true);\n            })\n        }\n    }).catch(err => {\n        console.log(\"[ERROR] in AuthSignup\", err)\n    })\n}\n\nexport {\n    DoesUserExists,\n    DoesEmailExists,\n    AuthSignup\n}","import React, { Component } from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport '../styles/Login.css';\nimport {AuthLogin, ValidateUsername, clearTokens} from '../services/LoginService';\nimport { DoesUserExists, DoesEmailExists, AuthSignup } from '../services/SignupService';\nimport {uri} from \"../uri\";\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {username: '', email:'', password: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleCreateAccount = this.handleCreateAccount.bind(this);\n        this.validateInputs = this.validateInputs.bind(this);\n    }\n\n    handleChange(key) {\n        return function (e) {\n          var state = {};\n          state[key] = e.target.value;\n          this.setState(state);\n        }.bind(this);\n    }\n\n    validateInputs(reset=false){\n        let color = reset ? \"0px solid #efefef\":\"1px solid red\";\n        if (!this.state.username){\n            document.getElementById(\"login-username-box\").style.border = color;\n        }\n        if (!this.state.email){\n            document.getElementById(\"signup-email-box\").style.border = color;\n        }\n        if (!this.state.password){\n            document.getElementById(\"login-password-box\").style.border = color;\n        }\n    }\n\n    handleSubmit(e) {\n        this.validateInputs()\n    \n        if (e.target.value === \"login-account\"){\n            if (this.state.username && this.state.password){\n                AuthLogin(this.state.username, this.state.password);\n            }\n        } else{\n            if (this.state.username && this.state.password){\n                DoesUserExists(this.state.username)\n                DoesEmailExists(this.state.email)\n                AuthSignup(this.state.username, this.state.email, this.state.password)\n            }\n        }\n        \n    }\n\n    handleCreateAccount(e){\n        this.validateInputs(true);\n        \n        if (e.target.id === \"create-account-link\"){\n            document.getElementById(\"signup-email-container\").style.display = \"block\";\n            document.getElementById(\"forgot-password-text\").style.display = \"none\";\n            document.getElementsByClassName(\"login-title\")[0].innerHTML = \"Signup\";\n            document.getElementById(\"create-account-text\").innerHTML = \"Already have an account?\";\n            document.getElementById(\"create-account-link\").innerHTML = \"Login\";\n            let button = document.getElementById(\"login-submit-button\");\n            button.value = \"create-account\"; button.innerHTML = \"Signup\";\n            document.getElementById(\"create-account-link\").id = \"login-account-link\";\n        } else {\n            document.getElementById(\"signup-email-container\").style.display = \"none\";\n            document.getElementById(\"forgot-password-text\").style.display = \"block\";\n            document.getElementsByClassName(\"login-title\")[0].innerHTML = \"Login\";\n            document.getElementById(\"create-account-text\").innerHTML = \"Don't have an account yet?\"\n            document.getElementById(\"login-account-link\").innerHTML = \"Signup\"\n            let button = document.getElementById(\"login-submit-button\");\n            button.value = \"login-account\"; button.innerHTML = \"Login\";\n            document.getElementById(\"login-account-link\").id = \"create-account-link\";\n        }\n    }\n\n    render () {\n        return (\n            <div className='login-card'>\n                <div className=\"login-form\"  id=\"login-form\">\n                    <p className=\"login-title\">Login</p>\n                    <br></br>\n                    <p>Username</p>\n                    <input type=\"text\" id=\"login-username-box\" value={this.state.username} onChange={this.handleChange('username')} placeholder=\"Username\" />\n                    \n                    <div id=\"signup-email-container\" style={{display: \"none\"}}>\n                        <p>Email</p>\n                        <input type=\"text\" id=\"signup-email-box\" value={this.state.email} onChange={this.handleChange('email')} placeholder=\"Email\" />\n                    </div>\n                    \n                    <div className=\"password-forgot-combined\">\n                        <p>Password</p>\n                        <a href=\"#\" id=\"forgot-password-text\" className=\"forgot-password\">Forgot password ?</a>\n                    </div>\n\n                    <input type=\"password\" id=\"login-password-box\"value={this.state.password} onChange={this.handleChange('password')} placeholder=\"Password\"></input>\n                    <button type=\"submit\" value=\"login-account\" id=\"login-submit-button\" onClick={this.handleSubmit} className=\"login-submit-button\">Login</button>\n                </div>\n\n                <div className=\"create-account\">\n                    <p id=\"create-account-text\">Don't have an account yet?</p>\n                    <p className=\"create-account-link\" id=\"create-account-link\" onClick={this.handleCreateAccount}>Signup</p>\n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import Loader from 'react-loader-spinner';\n\nfunction ThreeDotLoader() {\n    return (\n        <div style={{position: \"fixed\", top: \"50%\", left: \"50%\", marginLeft: \"-20px\", marginTop: \"-25px\"}}>\n            <Loader\n            type=\"ThreeDots\"\n            color=\"#e0e0e0\"\n            height={50}\n            width={50}        \n            />\n        </div>\n    )\n}\n\nexport default ThreeDotLoader;","import {uri} from \"../../../uri\";\nimport {ValidateAuth} from \"../../../services/LoginService\";\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\n\nfunction SendMagnet(element_id, magnet){\n    let auth = getAuthToken();\n\n    if (auth){\n        fetch(uri()+\"/torrents/add?magnet=\"+magnet, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            }\n        })\n        .then(response => {\n            let element = document.getElementById(element_id);\n\n            if (response.ok){    \n                element.value = \"\";\n                let placeholder = element.placeholder;\n                element.placeholder = \"Magnet Added!\";\n\n                setTimeout(() => {\n                    element.placeholder = placeholder;\n                }, 2000);\n\n            } else {\n                element.value = \"\";\n                let placeholder = element.placeholder;\n                element.placeholder = \"Invalid Magnet!\";\n\n                setTimeout(() => {\n                    element.placeholder = placeholder;\n                }, 2000);\n            }\n        })\n        .catch(err => {\n            console.log(\"[ERROR] in SendMagnet:\", err)\n        })\n    }\n}\n\nfunction FetchTorrents(){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/status\", getAuthHeader(\"GET\"))\n    }\n    \n}\n\nfunction DeleteTorrent(Hash){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/remove?hash=\"+Hash, getAuthHeader(\"GET\"))\n    }\n}\n\nexport {\n    SendMagnet,\n    FetchTorrents,\n    DeleteTorrent\n};","import {uri} from \"../../../uri\";\nimport axios from 'axios';\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\nfunction getFileDetails(Hash){\n    return fetch(uri()+\"/torrents/files?hash=\"+Hash, getAuthHeader(\"GET\"))\n}\n\nfunction downloadFileUrl(path){\n    return fetch(uri()+\"/public/create\", {\n        method: \"POST\",\n        body: JSON.stringify({file_path: path}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n\n    // let b64 = btoa(unescape(encodeURIComponent(path)));\n    // return uri+\"/torrent-files?path=\"+b64+\"&auth=\"+auth.access_token;\n}\n\nfunction copyFile(from, to, iscut=false){\n    return fetch(uri()+\"/torrents/files/copy-file\", {\n        method: \"POST\",\n        body: JSON.stringify({from: from, to:to, iscut: iscut}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n}\n\nfunction deleteFile(path){\n    return fetch(uri()+\"/torrents/files/delete-file\", {\n        method: \"DELETE\",\n        body: JSON.stringify({path: path}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n}\n\nfunction renameFile(path, newname){\n    return fetch(uri()+\"/torrents/files/rename-file\", {\n        method: \"POST\",\n        body: JSON.stringify({path: path, newname: newname}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n}\n\nasync function convertMp4toHlsService(path){\n    let auth = getAuthToken();\n    let res = null;\n\n    await axios.post(uri()+\"/torrents/files/convert-mp4-to-hls\", {\n        file_path: path\n    }, {\n    headers: {\n        'Authorization': `Bearer ${auth.access_token}` \n    }\n    }).then(function (response) {\n        res = response.data;\n    }).catch(function (error) {\n        console.log(error);\n    });\n    \n    return res;\n}\n\nasync function convertHlstoMp4Service(hls_element){\n    let auth = getAuthToken();\n    let res = null;\n\n    await axios.post(uri()+\"/torrents/files/convert-hls-to-mp4\", {\n        hls_element: hls_element\n    }, {\n    headers: {\n        'Authorization': `Bearer ${auth.access_token}` \n    }\n    }).then(function (response) {\n        res = response.data;\n    }).catch(function (error) {\n        console.log(error);\n    });\n    \n    return res;\n}\n\nexport {\n    getAuthToken,\n    getFileDetails,\n    downloadFileUrl,\n    copyFile,\n    deleteFile,\n    renameFile,\n    convertMp4toHlsService,\n    convertHlstoMp4Service\n}","import React, { Component } from 'react';\nimport {getAuthToken} from \"./FileManager/services/FileService\";\nimport {uri} from \"../uri\";\n\nclass VideoPlayer extends Component {\n    constructor(props){\n        super(props);\n        this.state = {width: \"10px\", height: \"10px\"}\n        this.updatePlayerWidth = this.updatePlayerWidth.bind(this);\n    }\n\n    componentDidMount(){\n        this.timer = setInterval(this.updatePlayerWidth, 100);\n    }\n\n    componentWillUnmount(){\n        clearInterval(this.timer);\n    }\n\n    updatePlayerWidth(){\n        let e = document.getElementById(\"file-card\");\n        if (!e){\n            e = document.getElementById(\"torrent-card\");\n        }\n\n        if (this.state.width !== e.offsetWidth){\n            this.setState({width: e.offsetWidth});\n        }\n    }\n\n    render(){\n        return (\n            <div className=\"video-player-container\" style={{marginBottom: \"5px\"}}>\n                <React.Fragment key={this.props.src}>\n                    <video id=\"video-player\" style={{borderRadius: \"10px\"}} width={this.state.width} controls autoPlay playsInline>\n                        <source src={this.props.src} type=\"video/mp4\"></source>\n                    </video>\n                </React.Fragment>\n            </div>\n        \n        )\n    }\n}\n\nexport default VideoPlayer;","import React, { Component } from 'react';\nimport \"../styles/AddMagnet.css\"\nimport { SendMagnet } from \"../services/TorrentService\";\nimport VideoPlayer from \"../../VideoPlayer\";\n\nclass AddMagnet extends Component {\n    constructor(props) {\n        super(props);\n        this.handleMagnetSubmit = this.handleMagnetSubmit.bind(this);\n    }\n\n    handleMagnetSubmit(e){\n        let inputBox = document.getElementById(\"add-magnet-box\");\n        if (inputBox.value){\n            SendMagnet(inputBox.id, inputBox.value);\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"add-magnet-div\">\n                    <input id=\"add-magnet-box\" type=\"text\" placeholder=\"Add Magnet Link\" />\n                    <img className=\"add-magnet-icon\" src=\"/autolycus/icons/bxs-file-plus.svg\" onClick={this.handleMagnetSubmit}/>\n                </div>\n                {this.props.videoUrl && <VideoPlayer src={this.props.videoUrl}/>}\n            </div>\n\n        )\n    }\n\n}\n\nexport default AddMagnet;","import React, { Component } from 'react';\nimport \"../styles/TorrentCard.css\";\nimport {DeleteTorrent} from \"../services/TorrentService\";\nimport {downloadFileUrl, copyFile} from \"../services/FileService\";\nimport { Progress } from 'react-sweet-progress';\nimport \"react-sweet-progress/lib/style.css\";\nimport cogoToast from 'cogo-toast';\nimport {uri} from \"../../../uri\";\n\nclass TorrentCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {threeDotMenuVisible: false, explorerCard: null}\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.handleDotMenu = this.handleDotMenu.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.getTorrentSize = this.getTorrentSize.bind(this);\n        this.handlePaste = this.handlePaste.bind(this);\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 B\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    handleDotMenu(){\n        if (!this.state.threeDotMenuVisible){\n            this.setState({threeDotMenuVisible: true});\n            document.addEventListener('click', this.handleOutsideClick, false);\n        }else {\n            this.setState({threeDotMenuVisible: false});\n            document.removeEventListener('click', this.handleOutsideClick, false);\n        }\n    }\n\n    handleOutsideClick(e) {\n        // ignore clicks on the component itself\n        if (this.node.contains(e.target)){\n            return\n        }; this.handleDotMenu();\n    }\n\n    handleDownload(item, copyLink=false){\n        cogoToast.loading(\"archiving directory\", {position: \"top-center\"}).then(() => {\n            downloadFileUrl(item.download_path).then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        let url = uri()+\"/public/\"+json.public_url_hash\n                        // download file\n                        url = url+\"?download=true\"\n                        let a = document.createElement('a');\n                        a.href = url;\n                        a.download = item.name;\n                        a.click(); a.remove();\n                        cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                    }\n                })\n            })\n        });\n    }\n\n\n    handleDelete(){\n        DeleteTorrent(this.props.data.hash)\n        .then( response => {\n            if (response.ok){\n                cogoToast.success(\"torrent deleted\", {position: \"top-center\", hideAfter: 1});\n            }\n        })\n        .catch(err => {\n            console.log(\"[ERROR] in DeleteTorrent:\", err)\n        })\n    }\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    getTorrentSize(){\n        if (!this.props.data.is_finished){\n            return this.humanFileSize(this.props.data.downloaded_bytes)+\" / \"+this.humanFileSize(this.props.data.total_bytes)+ \" (\"+ this.humanFileSize(this.props.data.download_speed)+\"/s)\";\n        }else{\n            return this.humanFileSize(this.props.data.total_bytes);\n        }\n    }\n\n    handlePaste(){\n        let item = {path: this.props.data.download_path, type: 'directory'};\n        let path = JSON.parse(window.localStorage.getItem('autolycus_copy_path'));\n        if (path.item){\n            if (item.type === \"directory\" && item.path != path.item.path){\n                copyFile(path.item.path, item.path, path.iscut).then(response => {\n                    response.json().then(json => {\n                        if (response.status == 200){\n                            cogoToast.success(\"Pasted\", {position: \"top-center\", hideAfter: 1});\n                            window.localStorage.removeItem('autolycus_copy_path');\n                        }else{\n                            console.error(json);\n                            cogoToast.error(\"Unable to paste\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    })\n                })\n            }else{\n                cogoToast.warn(\"Not allowed\", {position: \"top-center\", hideAfter: 1});\n            }\n        }else{\n            cogoToast.error(\"Nothing to paste\", {position: \"top-center\", hideAfter: 1});\n        }\n        \n    }\n\n    render(){\n        return(\n            <div className=\"torrent-card\" id=\"torrent-card\" onMouseOver={() => this.props.updateActiveItemHover(this.props.data)} onMouseOut={() => this.props.updateActiveItemHover()}>\n                <div className=\"torrent-card-info\" onClick={() => this.props.cardHandler(this.props.data)}>\n                    <img src=\"/autolycus/icons/mac-folder-icon.svg\"/>\n                    <div className=\"torrent-card-wrapper\">\n                        <p className=\"torrent-card-info-name\">{this.trimString(this.props.data.name, 30)}</p>\n                        {!this.props.data.is_finished && <Progress percent={this.props.data.progress} status=\"active\" />}\n                        <p className=\"torrent-card-info-size\">{this.getTorrentSize()}</p>\n                    </div>\n                </div>\n\n                <div className=\"torrent-card-menu\">\n                    <div className=\"torrent-card-menu-dot-wrapper\" ref={node => { this.node = node; }} onClick={this.handleDotMenu}>\n                        <div className=\"torrent-card-menu-dot\" />\n                        <div className=\"torrent-card-menu-dot\" />\n                        <div className=\"torrent-card-menu-dot\" />\n                    </div>\n                    {this.state.threeDotMenuVisible && (\n                        <div className=\"torrent-card-menu-contents\">\n                            <div onClick={() => this.handleDownload(this.props.data, true)} className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" src=\"/autolycus/icons/bxs-cloud-download.svg\"/>\n                                <p>Download</p>\n                            </div>\n                            \n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-link-alt.svg\"/>\n                                <p>Copy Link</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-edit-alt.svg\"/>\n                                <p>Rename</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" className=\"svg-black\" src=\"/autolycus/icons/bx-copy-alt.svg\"/>\n                                <p>Copy</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-cut.svg\"/>\n                                <p>Cut</p>\n                            </div>\n\n                            <div onClick={() => this.handlePaste()} className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-paste.svg\"/>\n                                <p>Paste</p>\n                            </div>\n\n                            <div onClick={this.handleDelete} className=\"torrent-card-menu-contents-items\">\n                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-trash.svg\"/>\n                                <p>Delete</p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default TorrentCard;","import React, { Component } from 'react';\nimport \"../styles/FileCard.css\";\nimport \"../styles/TorrentCard.css\";\nimport {downloadFileUrl, copyFile, deleteFile, renameFile, convertMp4toHlsService, convertHlstoMp4Service} from \"../services/FileService\";\nimport cogoToast from 'cogo-toast';\nimport {uri} from \"../../../uri\";\n\nclass FileCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {data: null, threeDotMenuVisible: \"\", MenuTranslateY: \"0px\"};\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.getFileIcon = this.getFileIcon.bind(this);\n        this.handleDotMenu = this.handleDotMenu.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n        this.handleCopy = this.handleCopy.bind(this);\n        this.handlePaste = this.handlePaste.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.handleRename = this.handleRename.bind(this);\n        this.handleConvertMp4toHls = this.handleConvertMp4toHls.bind(this);\n        this.handleConvertHlstoMp4 = this.handleConvertHlstoMp4.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.tFetcher(false);\n\n        // reason to write below line twice: https://stackoverflow.com/questions/55966533/show-alert-on-browser-back-button-event-on-react-js\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        \n        // switch to previous directory when user presses back button in browser\n        window.addEventListener('popstate', () => {this.props.goBack()}, false)\n    }\n\n    componentWillUnmount() {\n        this.props.tFetcher(true);\n    }\n\n    goBack(){\n        this.setState({data: null})\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 Bytes\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    getFileIcon(ext){\n        if ([\".mkv\", \".mp4\", \".avi\"].includes(ext)){\n            return \"/autolycus/icons/video-file-icon.svg\";\n        }else if ([\".txt\", \".srt\", \".md\", \".docx\"].includes(ext)){\n            return \"/autolycus/icons/doc-file-icon.svg\";\n        }else if ([\".mp3\", \".wav\"].includes(ext)){\n            return \"/autolycus/icons/music-file-icon.svg\";\n        }else{\n            return \"/autolycus/icons/unknown-file-icon.svg\";\n        }\n    }\n\n    handleConvertMp4toHls(parent, e){\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p style={{paddingBottom: \"1px\"}}>Converting to HLS</p>\n            </div>, {\n            hideAfter: 0\n        });\n\n        convertMp4toHlsService(e.path).then(newHlsChild => {\n            hide();\n            let alreadyPresent = false;\n            parent.children.forEach(function (item, index) {\n                if (item.type === 'hls' && item.name === newHlsChild.name){\n                    alreadyPresent = true;\n                    return;\n                }\n              });\n            \n              if (alreadyPresent === false){\n                parent.children.push(newHlsChild);\n              }\n        })\n    }\n\n    handleConvertHlstoMp4(parent, e){\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p style={{paddingBottom: \"1px\"}}>Converting to MP4</p>\n            </div>, {\n            hideAfter: 0\n        });\n        \n        convertHlstoMp4Service(e).then(newMp4Child => {\n            hide();\n \n            let alreadyPresent = false;\n            parent.children.forEach(function (item, index) {\n                if (item.type === 'file' && item.name === newMp4Child.name){\n                    alreadyPresent = true;\n                    return;\n                }\n              });\n\n              if (alreadyPresent === false){\n                parent.children.push(newMp4Child);\n              }\n        })\n\n    }\n\n    handleDotMenu(e, name){\n        let windowH = window.innerHeight-30;\n        let menuH = 220;\n\n        if (!this.state.threeDotMenuVisible){\n            this.setState({threeDotMenuVisible: name});\n            document.addEventListener('click', this.handleOutsideClick, false);\n            \n            try{\n                menuH = e.clientY+menuH;\n                if (menuH > windowH){\n                    let adjust = 50;\n                    if (window.innerWidth < 800){\n                        // adjust overflow menu\n                        adjust = 100;\n                    }\n                    this.setState({MenuTranslateY: windowH-adjust-menuH+\"px\"});\n                }\n            } catch(err){}\n\n        }else {\n            this.setState({threeDotMenuVisible: \"\", MenuTranslateY: \"0px\"});\n            document.removeEventListener('click', this.handleOutsideClick, false);\n        }\n    }\n\n    handleOutsideClick(e) {\n        if (![\"torrent-card-menu-dot\", \"torrent-card-menu-dot-wrapper\"].includes(e.target.className)){\n            this.handleDotMenu();\n        }\n    }\n\n    handleCopy(item, iscut=false){\n        let message = \"Item copied\";\n        if (iscut){\n            message = \"Item cut\";\n        }\n        cogoToast.info(message, {position: \"top-center\", hideAfter: 1});\n        window.localStorage.setItem('autolycus_copy_path', JSON.stringify({item: item, iscut: iscut}));\n    }\n\n    handlePaste(item){\n        let path = JSON.parse(window.localStorage.getItem('autolycus_copy_path'));\n        if (path){\n            if (item.type === \"directory\" && item.path != path.item.path){\n                copyFile(path.item.path, item.path, path.iscut).then(response => {\n                    response.json().then(json => {\n                        if (response.status == 200){\n                            this.props.addItem(item, path.item);\n                            cogoToast.success(\"Pasted\", {position: \"top-center\", hideAfter: 1});\n                            if (path.iscut){\n                                window.localStorage.removeItem('autolycus_copy_path');\n                            }\n                        }else{\n                            console.error(json);\n                            cogoToast.error(\"Unable to paste\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    })\n                })\n            }else{\n                cogoToast.warn(\"Not allowed\", {position: \"top-center\", hideAfter: 1});\n            }\n        }else{\n            cogoToast.error(\"Nothing to paste\", {position: \"top-center\", hideAfter: 1});\n        }\n        \n    }\n\n    handleDownload(item, copyLink=false){\n        if (item.type === \"directory\"){\n            cogoToast.loading(\"archiving directory\", {position: \"top-center\"}).then(() => {\n                downloadFileUrl(item.path).then(response => {\n                    response.json().then(json => {\n                        if (response.status === 200){\n                            let url = uri()+\"/public/\"+json.public_url_hash\n                            // download file\n                            url = url+\"?download=true\"\n                            let a = document.createElement('a');\n                            a.href = url;\n                            a.download = item.name;\n                            a.click(); a.remove();\n                            cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    })\n                })\n            });\n        } else {\n\n            downloadFileUrl(item.path).then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        let url = uri()+\"/public/\";\n                        if (item.type === \"hls\"){\n                            url = url+\"hls/\"+json.public_url_hash+\"/\"+item.info.key+\".m3u8\"\n                        }else{\n                            url = url+json.public_url_hash\n                        }\n                        \n                        if (copyLink){\n                            // copy link to clipboard\n                            const el = document.createElement('textarea');\n                            el.value = url;\n                            document.body.appendChild(el);\n                            el.select();\n                            document.execCommand('copy');\n                            document.body.removeChild(el);\n                            cogoToast.success(\"copied to clipboard\", {position: \"top-center\", hideAfter: 1});\n                            \n                        }else{\n                            // download file\n                            url = url+\"?download=true\"\n                            let a = document.createElement('a');\n                            a.href = url;\n                            a.download = item.name;\n                            a.click(); a.remove();\n                            cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    }\n                })\n            })\n        \n        }\n\n    }\n\n    handleDelete(item){\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p>Are you sure ?</p>\n                <button style={{backgroundColor: \"red\"}} onClick={() => confirmDelete()}>Yes</button>\n                <button style={{backgroundColor: \"#4CAF50\"}} onClick={() => hide()}>No</button>\n            </div>, {\n            hideAfter: 0\n        });\n\n        var confirmDelete = () => {\n            hide();\n            deleteFile(item.path).then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        this.props.removeItem(item);\n                        // cogoToast.success(\"file deleted\", {position: \"top-center\", hideAfter: 1});\n                    }else{\n                        cogoToast.error(\"error occured\", {position: \"top-center\", hideAfter: 1});\n                        console.error(json);\n                    }\n                })\n            })\n        }\n    }\n\n    handleRename(item){\n        const selectAllText = (e) => {e.target.select()};\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p style={{paddingBottom: \"1px\"}}>Rename</p>\n                <input type=\"text\" id=\"toast-rename-box\" onFocus={selectAllText} placeholder=\"Enter new name\" defaultValue={item.name}></input>\n                <button style={{backgroundColor: \"#1b53f4\"}} onClick={() => confirmRename()}>Confirm</button>\n                <button style={{backgroundColor: \"#4CAF50\"}} onClick={() => hide()}>Cancel</button>\n            </div>, {\n            hideAfter: 0\n        });\n\n        var confirmRename = () => {\n            let newname = document.getElementById(\"toast-rename-box\");\n            if (newname.value && newname.value !== item.name){\n                renameFile(item.path, newname.value).then(response => {\n                    response.json().then(json => {\n                        if (response.status === 200){\n                            item.name = newname.value;\n                            this.props.renameItem(item, newname.value);\n                        }else{\n                            console.error(json);\n                        }\n                    })\n                })\n                hide();\n            }\n            \n            \n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"file-card\" style={{cursor: \"pointer\"}} onClick={() => this.props.goBack()}>\n                    <div className=\"file-card-info\">\n                        <img style={{width: \"20px\"}} className=\"svg-black\" src=\"/autolycus/icons/up-arrow.svg\"/>\n                        <p className=\"file-card-wrapper file-card-info-size\">Folder Up</p>\n                    </div>\n                </div>\n\n                {this.props.data.children &&\n                this.props.data.children.map((item, idx) => {\n                    return (\n                        <div className=\"file-card\" id=\"file-card\" key={idx}>\n                            <div className=\"file-card-info\">\n                                {item.type === \"directory\" && <img src=\"/autolycus/icons/mac-folder-icon.svg\"/>}\n                                {item.type === \"hls\" && <img style={{width:\"32px\"}} src=\"/autolycus/icons/hls-file-icon.svg\"/>}\n                                {item.type === \"file\" && <img style={{width:\"32px\"}} src={this.getFileIcon(item.ext)}/>}\n\n                                <div className=\"file-card-wrapper\">\n                                    <p className=\"file-card-info-name\" onClick={() => this.props.updateCard(item, this.props.data)}>{this.trimString(item.name, 30)}</p>\n                                    {item.type === \"file\" && <p className=\"file-card-info-size\">{this.humanFileSize(item.size)}</p>}\n                                    {item.type === \"hls\" && <p className=\"file-card-info-size\">{this.humanFileSize(item.size)}</p>}\n                                </div>\n                            </div>\n\n                            <div className=\"torrent-card-menu\">\n                                <div className=\"torrent-card-menu-dot-wrapper\" onClick={(e) => this.handleDotMenu(e, item.name)}>\n                                    <div className=\"torrent-card-menu-dot\" />\n                                    <div className=\"torrent-card-menu-dot\" />\n                                    <div className=\"torrent-card-menu-dot\" />\n                                </div>\n                                {this.state.threeDotMenuVisible === item.name && (\n\n                                    \n                                    <div style={{transform: \"translate(0px, \"+this.state.MenuTranslateY+\")\"}} className=\"torrent-card-menu-contents\">\n                                        <div onClick={() => this.handleDownload(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bxs-cloud-download.svg\"/>\n                                            <p>Download</p>\n                                        </div>\n                                        \n                                        <div onClick={() => this.handleDownload(item, true)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bx-link-alt.svg\"/>\n                                            <p>Copy Link</p>\n                                        </div>\n\n                                        {[\".mp4\", \".mkv\"].includes(item.ext) && \n                                            <div onClick={() => this.handleConvertMp4toHls(this.props.data, item)} className=\"torrent-card-menu-contents-items\">\n                                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-convert-hls.svg\"/>\n                                                <p>Make HLS</p>\n                                            </div>\n                                        }\n\n                                        {[\".m3u8\"].includes(item.ext) && \n                                            <div onClick={() => this.handleConvertHlstoMp4(this.props.data, item)} className=\"torrent-card-menu-contents-items\">\n                                                <img className=\"svg-black\" src=\"/autolycus/icons/bx-convert-hls.svg\"/>\n                                                <p>Make MP4</p>\n                                            </div>\n                                        }\n\n                                        <div onClick={() => this.handleRename(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bx-edit-alt.svg\"/>\n                                            <p>Rename</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleCopy(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bx-copy-alt.svg\"/>\n                                            <p>Copy</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleCopy(item, true)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bx-cut.svg\"/>\n                                            <p>Cut</p>\n                                        </div>\n\n                                        <div onClick={() => this.handlePaste(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bx-paste.svg\"/>\n                                            <p>Paste</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleDelete(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img className=\"svg-black\" src=\"/autolycus/icons/bx-trash.svg\"/>\n                                            <p>Delete</p>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )\n                })}\n            </div>\n        )\n    }\n}\n\nexport default FileCard;","import React, { Component } from 'react';\nimport AddMagnet from \"./AddMagnet\";\nimport TorrentCard from \"./TorrentCard\";\nimport FileCard from \"./FileCard\";\nimport \"../styles/Home.css\";\nimport {getFileDetails} from \"../services/FileService\";\nimport cogoToast from 'cogo-toast';\nimport {getAuthToken} from \"../services/FileService\";\nimport {uri} from \"../../../uri\";\nimport VideoPlayer from \"../../VideoPlayer\";\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {card: null, data:null, parent_items: [], videoUrl: null}\n        this.cardHandler = this.cardHandler.bind(this);\n        this.goBack = this.goBack.bind(this);\n        this.updateCard = this.updateCard.bind(this);\n        this.removeItem = this.removeItem.bind(this);\n        this.addItem = this.addItem.bind(this);\n        this.renameItem = this.renameItem.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.tFetcher(true);\n\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        \n        // switch to previous directory when user presses back button in browser\n        window.addEventListener('popstate', () => {\n            // pass when on Home screen\n        }, false)\n    }\n\n    componentWillUnmount() {\n        this.props.tFetcher(false);\n    }\n\n    cardHandler(card){\n        getFileDetails(card.hash)\n        .then( response => {\n            if (response.ok){\n                response.json().then(json => {\n                    this.setState({card:card, data:json})\n                })\n            }else {\n                cogoToast.error(\"file not found\", {position: \"top-center\", hideAfter: 1});\n            }\n        }).catch( err => {\n            console.log(\"[ERROR] from getFileDetails:\", err)\n        })\n    }\n\n    goBack(){\n        let previous_item = this.state.parent_items.slice(-1)[0];\n        this.setState({data: previous_item, parent_items: this.state.parent_items.filter(i => i !== previous_item)});\n    }\n\n    updateCard(data, previous_item){\n        if (data.type === \"directory\"){\n            this.setState({ data: data, parent_items: this.state.parent_items.concat([previous_item]) })\n        }else {\n            let b64 = btoa(unescape(encodeURIComponent(data.path)));\n            let url = uri()+\"/public/\"+b64+\"?token=\"+getAuthToken().access_token;\n            if ([\".mkv\", \".mp4\", \".avi\"].includes(data.ext)){    \n                this.setState({videoUrl: url});\n            } else if (data.ext === \".m3u8\"){\n                let url = uri()+\"/hls/\"+getAuthToken().access_token+\"/\"+btoa(unescape(encodeURIComponent(data.path)))+\"/\"+data.info.key+\".m3u8\";\n                this.setState({videoUrl: url});\n            }\n            else if ([\".txt\", \".srt\", \".jpg\", \".mp3\", \".wav\"].includes(data.ext)) {\n                let win = window.open(url, '_blank');\n                win.focus();\n            }\n        }\n    }\n\n    removeItem(e){\n        let children = this.state.data.children.filter(function(item) {\n            return item.path !== e.path\n        });\n        \n        let data = this.state.data\n        data.children = children;\n        this.setState({data: data})\n    }\n    \n    addItem(parent, child, data='none'){\n        if (data === 'none'){\n            var data = this.state.data;\n        }\n\n        if (data['children']){\n            for (var i = 0; i < data.children.length; i++) {\n                let item = data.children[i];                \n                if (item.type === 'directory'){\n                    this.addItem(parent, child, item)\n                }\n\n                if (parent.path === item.path){\n                    var filename = parent.path;\n                    var s = filename.split(\"/\");\n                    var newpath = s.slice(0, s.length).join(\"/\") + \"/\" +child.name;\n                    child.path = newpath;\n                    for (var j=0; j< parent.children.length; j++){\n                        let subchild = parent.children[j];\n                        if (subchild.name !== child.name){\n                            parent.children.push(child);\n                        }\n                    }\n                    \n                }\n            }\n        }\n    }\n\n    renameItem(item, newname){\n        var filename = item.path;\n        var s = filename.split(\"/\");\n        var newpath = s.slice(0, s.length-1).join(\"/\") + \"/\" +newname;\n        item.name = newname;\n        item.path = newpath;\n    }\n\n    render(){\n        if (this.state.data){\n            return (\n                <div style={{scrollBehavior: \"smooth\"}}>\n                    <AddMagnet videoUrl={this.state.videoUrl}/>\n                    <FileCard data={this.state.data} updateActiveItemHover={this.props.updateActiveItemHover} removeItem={this.removeItem} addItem={this.addItem} renameItem={this.renameItem} key={this.state.data} tFetcher={this.props.tFetcher} goBack={this.goBack} updateCard={this.updateCard}/>\n                </div>\n            )\n        } else {\n            return(\n                <div>\n                    <AddMagnet videoUrl={this.state.videoUrl}/>\n                    {this.props.torrents && this.props.torrents.map((data) => {return <TorrentCard data={data} key={data.name} updateActiveItemHover={this.props.updateActiveItemHover} cardHandler={this.cardHandler}/>})}\n                </div>\n            )\n        }\n    }\n\n}\n\nexport default Home;","import {uri} from \"../../../uri\";\nimport axios from 'axios';\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\nfunction apiTorrentSearch(element_id, query){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/search?query=\"+query, getAuthHeader(\"GET\"))\n    }\n}\n\n\nasync function getMagnetFromSearch(item){\n    let auth = getAuthToken();\n    let magnet = null;\n\n    await axios.post(uri()+\"/torrents/search\", {\n        item: item\n    }, {\n    headers: {\n        'Authorization': `Bearer ${auth.access_token}` \n    }\n    }).then(function (response) {\n        magnet = response.data.magnet;\n    }).catch(function (error) {\n        console.log(error);\n    });\n    \n    return magnet;\n}\n\n\nfunction addMagnet(magnet){\n    let auth = getAuthToken();\n    axios.get(uri()+\"/torrents/add?magnet=\"+magnet,{\n        headers: {\n            'Authorization': `Bearer ${auth.access_token}` \n        }\n    })\n    .then(function (response) {\n        console.log(\"Magnet added to download queue!\")\n    }).catch(function (error) {\n        console.log(error)\n    });\n}\n\n\nexport {\n    apiTorrentSearch,\n    getMagnetFromSearch,\n    addMagnet\n};","import React, { Component } from 'react';\nimport \"../styles/AddMagnet.css\"\nimport \"../styles/TorrentSearchCard.css\"\nimport ThreeDotLoader from \"../../../components/ThreeDotLoader\";\nimport { apiTorrentSearch, getMagnetFromSearch, addMagnet } from \"../services/TorrentSearchService\";\nimport cogoToast from 'cogo-toast';\n\nclass SearchTorrent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {data: [], isLoading: false, threeDotMenuVisible: false};\n        this.handleTorrentSearch = this.handleTorrentSearch.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n        this.copyToClipboard = this.copyToClipboard.bind(this);\n    }\n\n    handleTorrentSearch(e){\n        let inputBox = document.getElementById(\"add-magnet-box\");\n        if (inputBox.value){\n            this.setState({isLoading: true});\n            this.props.updateSearchResults([]);\n\n            apiTorrentSearch(inputBox.id, inputBox.value)\n            .then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        this.setState({isLoading: false});\n                        this.props.updateSearchResults(json);\n                    } else {\n                        console.log(\"error in handleTorrentSearch\");\n                    }\n                })\n            })\n        }\n    }\n\n    handleClick(item){\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p>Choose one option</p>\n                <button style={{backgroundColor: \"rgb(42, 154, 245)\"}} onClick={() => copyMagnet(item)}>Copy</button>\n                <button style={{backgroundColor: \"#4CAF50\"}} onClick={() => addToDownload(item)}>Download</button>\n            </div>, {\n            hideAfter: 3\n        });\n\n        var addToDownload = (item) => {\n            hide();\n            if (item.magnet){\n                // if magnet is preent in json\n                addMagnet(item.magnet)\n            } else {\n                // query magnet from API first\n                getMagnetFromSearch(item).then(response => {\n                    addMagnet(response)\n                })\n            } \n        }\n\n        var copyMagnet = (item) => {\n            hide();\n            if (item.magnet){\n                // if magnet is preent in json\n                this.copyToClipboard(item.magnet);\n            } else {\n                // query magnet from API first\n                getMagnetFromSearch(item).then(response => {\n                    this.copyToClipboard(response);\n                })\n            }    \n            \n        }\n\n    }\n\n    copyToClipboard(magnet){\n        if (magnet){\n            // copy magnet to clipboard\n            const el = document.createElement('textarea');\n            el.value = magnet;\n            document.body.appendChild(el);\n            el.select();\n            document.execCommand('copy');\n            document.body.removeChild(el);\n        }\n    }\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"add-magnet-div\">\n                    <input id=\"add-magnet-box\" type=\"text\" placeholder=\"Search Torrent\" />\n                    <img className=\"add-magnet-icon\" src=\"/autolycus/icons/bx-search.svg\" onClick={this.handleTorrentSearch}/>\n                </div>\n\n                {this.state.isLoading && <ThreeDotLoader/>}\n                {this.props.searchResults && this.props.searchResults.map((item, idx) => {\n                    return (\n                        <div class=\"torrent-search-result-card\" key={idx}>\n                            <div style={{display: 'flex'}}>\n                                <img className=\"search-result-magnet-icon svg-black\" style={{paddingRight: '15px', width: '25px'}} src=\"/autolycus/icons/bx-magnet.svg\"/>\n                                <div>\n                                    <p class=\"torrent-search-result-card-name\" onClick={() => this.handleClick(item)}>{this.trimString(item.name, 30)}</p>\n                                    <div class=\"torrent-search-result-card-details\">\n                                        <p>{item.size}</p>\n                                        <p>↓ {item.seed}</p>\n                                        <p>{item.created}</p>\n                                        <p>{item.type}</p>\n                                        <p>{item.source.toUpperCase()}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                )}\n            </div>\n        )\n    }\n\n}\n\nexport default SearchTorrent;","import React, { Component } from 'react';\nimport Home from \"./components/Home\";\nimport {AuthLogout} from \"../../services/LoginService\";\nimport SearchTorrent from \"./components/TorrentSearchCard\";\n\nfunction RecycleBin(){\n    return(<p>RecycleBin</p>)\n}\n\nfunction Help(){\n    return(<p>Help</p>)\n}\n\nfunction Settings(){\n    return(\n        <div>\n            <p>Settings</p>\n            <button onClick={AuthLogout}>Logout</button>\n        </div>\n    )\n}\n\nclass FileManagerViews extends Component {\n    constructor(props){\n        super(props);\n        this.state = {searchResults: []}\n        this.updateSearchResults = this.updateSearchResults.bind(this);\n    }\n\n    updateSearchResults(json){\n        this.setState({searchResults: json})\n    }\n\n    render() {\n        if (this.props.view === \"Home\"){\n            return (<Home torrents={this.props.torrents} updateActiveItemHover={this.props.updateActiveItemHover} tFetcher={this.props.tFetcher}/>)\n        } else if  (this.props.view === \"SearchTorrent\"){\n            return (<SearchTorrent searchResults={this.state.searchResults} updateSearchResults={this.updateSearchResults}/>)\n        } else if (this.props.view === \"RecycleBin\"){\n            return (<RecycleBin/>)\n        } else if (this.props.view === \"Help\"){\n            return (<Help/>)\n        } else if (this.props.view === \"Settings\"){\n            return (<Settings/>)\n        }\n    }\n}\n\nexport default FileManagerViews;","import React, { Component } from 'react';\nimport Home from \"./components/Home\";\nimport {AuthLogout} from \"../../services/LoginService\";\n\nclass FileManagerInfo extends Component {\n    constructor(props){\n        super(props);\n        this.humanDate = this.humanDate.bind(this);\n        this.humanFileSize = this.humanFileSize.bind(this);\n    }\n\n    humanDate(unixTimestamp){\n        function formatAMPM(date) {\n            var hours = date.getHours();\n            var minutes = date.getMinutes();\n            var ampm = hours >= 12 ? 'PM' : 'AM';\n            hours = hours % 12;\n            hours = hours ? hours : 12; // the hour '0' should be '12'\n            minutes = minutes < 10 ? '0'+minutes : minutes;\n            var strTime = hours + ':' + minutes + ' ' + ampm;\n            return strTime;\n        }\n\n        let milliseconds = unixTimestamp * 1000;\n        let dateObject = new Date(milliseconds);\n        let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'};\n        return dateObject.toLocaleDateString(\"en-US\", options) + \", \" + formatAMPM(dateObject);\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 B\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    render() {        \n        if (this.props.activeItem.name){\n            return (\n                <div className=\"right-section-text\">\n                    <h5>Name</h5>\n                    <p>{this.props.activeItem.name}</p>\n\n                    <h5>Magnet</h5>\n                    <p>{this.props.activeItem.magnet}</p>\n\n                    <h5>Created</h5>\n                    <p>{this.humanDate(this.props.activeItem.added_time)}</p>\n\n                    <h5>Size</h5>\n                    <p>{this.humanFileSize(this.props.activeItem.downloaded_bytes)}</p>\n                </div>\n            )\n            \n        }else {\n            return (<p className=\"right-section-text\" >File info will appear here</p>)\n        }\n    }\n}\n\nexport default FileManagerInfo;","import React, { Component } from 'react';\nimport \"./styles/StorageIndicator.css\";\n\nclass storageIndicator extends Component {\n    constructor(props) {\n        super(props);\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.getIndicatorLength = this.getIndicatorLength.bind(this);\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 Bytes\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    }\n\n    getIndicatorLength() {\n        let length = (100*(this.props.usedBytes/this.props.totalBytes));\n        if (isNaN(length)){\n            return 1;\n        } else {\n            return length;\n        }\n    }\n\n    render(){\n        return (\n            <div className=\"storage-indicator\">\n                <p className=\"storage-indicator-text\">{this.humanFileSize(this.props.usedBytes)} / {this.humanFileSize(this.props.totalBytes)}</p>\n                <div className=\"storage-indicator-base\"></div>\n                <div className=\"storage-indicator-progress\" style={{width: this.getIndicatorLength()+\"%\"}}></div>\n                \n                <p></p>\n            </div>\n        )\n    }\n}\n\nexport default storageIndicator;","import {uri} from \"../../../uri\";\nimport {ValidateAuth} from \"../../../services/LoginService\";\nimport axios from 'axios';\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nasync function FetchStorageData(){\n    let auth = getAuthToken();\n    \n    const headers = { Authorization: `Bearer ${auth.access_token}` };\n    let stats = {usedBytes: 0, totalBytes: 0};\n\n    await axios.get(uri()+\"/storage-status\", { headers })\n    .then(function (response) {\n        stats = response.data;\n    }).catch(function (error) {\n        console.log(error);\n    });\n    \n    return stats;\n}\n\nexport default FetchStorageData;","import React, { Component } from 'react';\nimport \"../../styles/FileManager.css\";\n// import \"../../styles/DarkTheme.css\";\nimport FileManagerViews from \"./FileManagerViews\";\nimport FileManagerInfo from \"./FileManagerInfo\";\nimport { FetchTorrents } from \"./services/TorrentService\";\nimport StorageIndicator from \"./StorageIndicator\";\nimport FetchStorageData from \"./services/FetchStorageData\";\n\nclass FileManager extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {view: \"Home\", torrents: [], activeItem: {}, searchResults: [], usedBytes: 0, totalBytes: 0};\n\n        let auth = localStorage.getItem('autolycus-auth');\n\n        if (auth !== 'undefined') {\n            this.username = JSON.parse(localStorage.getItem('autolycus-auth')).username;\n        } else {\n            this.username = 'unknown';\n        }\n\n        this.updateView = this.updateView.bind(this);\n        this.timer = null;\n        this.storageTimer = null;\n        this.updateTorrents = this.updateTorrents.bind(this);\n        this.tFetcher = this.tFetcher.bind(this);\n        this.updateActiveItemHover = this.updateActiveItemHover.bind(this);\n        this.updateStorageState = this.updateStorageState.bind(this);\n    }\n\n    tFetcher(fetch=null){\n        if (fetch){\n            this.timer = setInterval(this.updateTorrents, 2000);\n        } else {\n            clearInterval(this.timer);\n        }\n    }\n\n    componentDidMount() {\n        this.storageTimer = setInterval(this.updateStorageState, 2000);\n    }\n\n    componentWillUnmount(){\n        clearInterval(this.storageTimer);\n    }\n\n    updateStorageState(){\n        FetchStorageData().then(json => {\n            this.setState(json)\n        })\n    }\n\n    updateTorrents(){\n        let Fetch = FetchTorrents();\n        if (Fetch){\n            Fetch.then(response => {\n                response.json().then(json => {\n                    this.setState({torrents: json.torrents})\n                })\n            })\n            .catch(err => {\n                console.log(\"[ERROR] in FetchTorrents:\",err);\n            })\n        }\n    }\n\n    updateView(view){\n        this.setState({ view: view});\n        let elements = document.getElementsByClassName(\"left-section-menu-items\");\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            for (var i = 0; i < elements.length; i++) {\n                elements[i].style.backgroundColor=\"transparent\";\n            }\n            document.getElementById(view+\"NavButton\").style.backgroundColor = \"rgb(42 154 245 / 10%)\";\n        }\n    }\n\n    updateActiveItemHover(item=null){\n        if (item){\n            this.setState({activeItem: item});\n        }else{\n            this.setState({activeItem: {}});\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"container-section\">\n                    <div className=\"left-section\">\n                        <div className=\"left-section-menu\">\n\n                            <div className=\"left-section-logo\">\n                                <img className=\"left-section-logo-icon svg-black\" width=\"35px\" src=\"/autolycus/icons/bx-meteor.svg\"/>\n                                <h3 className=\"left-section-logo-text\">Autolycus</h3>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"HomeNavButton\" onClick={() => this.updateView('Home')}>\n                                <img className=\"left-section-menu-icons svg-black\" src=\"/autolycus/icons/bx-home-alt.svg\"/>\n                                <p style={{backgroundColor: \"none\"}} className=\"left-section-menu-texts\">Home</p>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"SearchTorrentNavButton\" onClick={() => this.updateView('SearchTorrent')}>\n                                <img className=\"left-section-menu-icons svg-black\" src=\"/autolycus/icons/bx-search-alt.svg\"/>\n                                <p className=\"left-section-menu-texts\">Search</p>\n                            </div>\n                                \n                            <div className=\"left-section-menu-items\" id=\"RecycleBinNavButton\" onClick={() => this.updateView('RecycleBin')}>\n                                <img className=\"left-section-menu-icons svg-black\" src=\"/autolycus/icons/bx-trash.svg\"/>\n                                <p className=\"left-section-menu-texts\">Recycle bin</p>\n                            </div>\n                        \n                            <div className=\"left-section-menu-items\" id=\"HelpNavButton\" onClick={() => this.updateView('Help')}>\n                                <img className=\"left-section-menu-icons svg-black\" src=\"/autolycus/icons/bx-help-circle.svg\"/>\n                                <p className=\"left-section-menu-texts\">Help</p>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"SettingsNavButton\" onClick={() => this.updateView('Settings')}>\n                                <img className=\"left-section-menu-icons svg-black\" src=\"/autolycus/icons/bx-slider-alt.svg\"/>\n                                <p className=\"left-section-menu-texts\">Settings</p>\n                            </div>\n\n                        </div>\n                        <div className=\"left-section-storage-indicator\">\n                            <StorageIndicator usedBytes={this.state.usedBytes} totalBytes={this.state.totalBytes}/>\n                        </div>\n                    </div>\n\n                    <div className=\"middle-section\" id=\"middle-section\">\n                        <FileManagerViews username={this.username} updateActiveItemHover={this.updateActiveItemHover} view={this.state.view} torrents={this.state.torrents} tFetcher={this.tFetcher}/>\n                    </div>\n                        \n                    <div className=\"right-section\">\n                        <FileManagerInfo activeItem={this.state.activeItem}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default FileManager;","import React, { Component } from 'react';\nimport { Route } from \"react-router-dom\";\nimport {ValidateAuth, refreshAccessToken} from \"../services/LoginService\";\nimport FileManager from \"../components/FileManager/FileManager\";\nimport ThreeDotLoader from \"../components/ThreeDotLoader\";\nimport Home from './Home';\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, authorized: false};\n      }\n\n    componentDidMount() {\n        ValidateAuth().then(authorized => {\n            if (authorized === true){\n                this.setState({ loading: false, authorized: true });\n            } else {\n                refreshAccessToken().then(authorized => {\n                    if (authorized === true){\n                        this.setState({ loading: false, authorized: true });\n                    } else {\n                        this.setState({ loading: false, authorized: false });\n                    }\n                })\n            }\n        })\n    }\n\n    render() {\n        if (this.state.loading){return (<ThreeDotLoader/>)}\n        if (this.state.authorized) {\n            return (\n                <div>\n                    <FileManager />\n                </div>\n            )\n        } else {\n            return (<Route component={Home} />)\n        }\n    }\n\n}\n\nexport default Dashboard;","import React, { Component } from 'react';\nimport cogoToast from 'cogo-toast';\nimport {API_URL, uri} from '../uri';\nimport '../styles/ServerDown.css'\nimport Home from '../views/Home';\n\nclass ConfigureServer extends Component {\n    constructor(props) {\n        super(props);\n        this.timer = null;\n        this.state = {apiDown: true};\n        this.pingAPI = this.pingAPI.bind(this);\n        this.handleConfigureClick = this.handleConfigureClick.bind(this);\n        this.handleReset = this.handleReset.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.findGetParameter = this.findGetParameter.bind(this);\n\n        // forcefully set api address using query parameter\n        let apiParameter = this.findGetParameter('api');\n        if (apiParameter){\n            apiParameter = decodeURIComponent(apiParameter);\n            localStorage.setItem('autolycus-uri', apiParameter)\n            window.location.href = window.location.origin;\n        }\n\n    }\n\n    pingAPI(){\n        fetch(uri()+\"/ping\").then( resp => {\n            if (resp.ok){\n                this.setState({apiDown: false});\n            }\n        }).catch(err => {\n            this.setState({apiDown: true});\n        });\n    }\n\n    findGetParameter(q) {\n            // return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [, null])[1];\n            return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [null])[1];\n    }\n\n    componentDidMount() {\n        this.timer = setInterval(this.pingAPI, 1000*10);\n    }\n    \n    componentWillUnmount(){\n        clearInterval(this.timer);\n    }\n\n    handleReset(e){\n        clearInterval(this.timer);\n\n        localStorage.setItem('autolycus-uri', API_URL);\n        let input = document.getElementById('enter-api-address');\n        input.value = API_URL;\n    }\n\n    handleConfigureClick(){\n        let configureBox = document.getElementById('server-down-configure-box');\n        let toggle = document.getElementById('server-down-configure-text');\n        configureBox.style.display = 'block';\n        toggle.style.display = 'none';\n    }\n\n    handleSubmit(){\n        let input = document.getElementById('enter-api-address');\n        if (input.value.startsWith(\"http\")){\n            fetch(input.value+\"/ping\").then( resp => {\n                if (resp.ok){\n                    localStorage.setItem('autolycus-uri', input.value);\n                    this.setState({apiDown: false});\n                }else{\n                    cogoToast.error(\"API address is not reachable\", {position: \"top-center\", hideAfter: 1});\n                }\n            }).catch(err => {\n                cogoToast.error(\"API address is not reachable\", {position: \"top-center\", hideAfter: 1});\n                this.setState({apiDown: true});\n            });\n        }else {\n            cogoToast.error(\"invalid API address\", {position: \"top-center\", hideAfter: 1});\n        }\n\n    }\n\n    render(){\n        if (this.state.apiDown){\n            return (\n                <div className=\"server-down-container\">\n                    <div className=\"server-down\">\n                        <img src=\"/autolycus/icons/server-down.svg\" width=\"30%\"></img>\n                        <h3>Our Server is Feeling a Little Down</h3>\n                        <p>\n                            Please try again in a few moments.<br></br>\n                            We'll be  back up in  no time.\n                        </p>\n                        <div className=\"server-down-configure\" style={{cursor: \"pointer\"}}>\n                            <p id=\"server-down-configure-text\" onClick={this.handleConfigureClick}>Configure API Address</p>\n                            <div className=\"server-down-configure-box\" id=\"server-down-configure-box\" style={{display: 'none'}}>\n                                <input className=\"server-down-configure-input\" type=\"text\" id=\"enter-api-address\" placeholder=\"Enter API Address\" defaultValue={uri()}></input>\n                                <br></br>\n                                <button onClick={this.handleSubmit} className=\"server-down-configure-box-submit\">Submit</button>\n                                <div className=\"server-down-reset-div\">\n                                    <p style={{color: \"#484848\"}}>No idea about this?</p><p onClick={this.handleReset} className=\"server-down-reset-link\">Reset</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }else{\n            // window.location.href = '/';\n            return <Home />\n        }\n    }\n\n}\n\nexport default ConfigureServer;","import React, { Component } from 'react';\nimport {Route} from \"react-router-dom\";\nimport '../styles/Home.css';\nimport Login from '../components/Login'\nimport {ValidateAuth, clearTokens, refreshAccessToken} from \"../services/LoginService\";\nimport ThreeDotLoader from \"../components/ThreeDotLoader\";\nimport Dashboard from \"./Dashboard\";\nimport {uri} from \"../uri\";\nimport ConfigureServer from '../views/ConfigureServer';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, authorized: false, apiDown: false};\n        this.pingAPI = this.pingAPI.bind(this);\n        this.timer = null;\n\n        // forcefully set api address using query parameter\n        let apiParameter = this.findGetParameter('api');\n        if (apiParameter){\n            apiParameter = decodeURIComponent(apiParameter);\n            localStorage.setItem('autolycus-uri', apiParameter)\n            window.location.href = window.location.origin;\n        }\n        \n    }\n\n    findGetParameter(q) {\n        // return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [, null])[1];\n        return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [null])[1];\n     }\n\n    pingAPI(){\n        // check if api server is down\n        fetch(uri()+\"/ping\").then( resp => {\n            if (resp.ok){\n                this.setState({apiDown: false});\n            }\n        }).catch(err => {\n            this.setState({apiDown: true});\n        });\n    }\n\n    componentDidMount() {\n        this.pingAPI();\n\n        ValidateAuth(true).then(authorized => {\n            if (authorized){\n                this.setState({ loading: false, authorized: true });\n            } else {\n                this.setState({ loading: false, authorized: false });\n            }\n        })\n        \n    }\n\n    render () {\n        if (this.state.apiDown){\n            return (<ConfigureServer />)\n        } else if (this.state.loading){\n            return (<ThreeDotLoader/>)\n        } else if (this.state.authorized) {\n            return (<Route component={Dashboard} />)\n        } else {\n            return (\n                <div>\n                    <div className=\"home-section\">\n                        <div className=\"carousel-section\"></div>\n                        <div className=\"login-section\">\n                            <div className=\"login-form\">\n                                <Login />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n\n    }\n}\n\nexport default Home;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from './views/Home';\nimport ConfigureServer from './views/ConfigureServer';\nimport './styles/DarkTheme.css';\n\nfunction App () {\n    return (\n        <div className=\"app\">\n            <Router basename={process.env.PUBLIC_URL}>\n                <Switch>\n                    <Route exact path=\"/\" component={Home} />\n                </Switch>\n            </ Router>\n        </div>\n    );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}