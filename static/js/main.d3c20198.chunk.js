(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{23:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(1),i=n.n(a),c=n(17),o=n.n(c),r=(n(32),n(16)),l=n(4),u=n(5),d=n(6),h=n(3),m=n(8),j=n(7),p=(n(33),n(34),n(14)),b=n.n(p),f=n(18),v="http://localhost:5000/api";function g(){var e=localStorage.getItem("autolycus-uri");return e||v}function O(e){return e.ok?e:{status:e.status,message:e.statusText}}function x(){localStorage.setItem("autolycus-auth",void 0)}function y(){var e=localStorage.getItem("autolycus-auth");"undefined"!==e&&(e=JSON.parse(e)),e&&fetch(g()+"/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.access_token},body:JSON.stringify(e)}).then(O).then((function(e){200===e.status&&(x(),window.location.reload(!0))}))}function w(){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("autolycus-auth"),n=!1,"undefined"!==t&&(t=JSON.parse(t)),!t){e.next=6;break}return e.next=6,fetch(g()+"/auth/refresh-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.refresh_token}}).then(O).then((function(e){200===e.status&&e.json().then((function(e){n=!0,t.access_token=e.access_token,localStorage.setItem("autolycus-auth",JSON.stringify(t))}))})).catch((function(e){console.log("[ERROR] in refreshAccessToken:",e)}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(b.a.mark((function e(){var t,n,s,a,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],n=i.length>1&&void 0!==i[1]?i[1]:2,s=localStorage.getItem("autolycus-auth"),a=!1,"undefined"!==s&&(s=JSON.parse(s)),!s){e.next=8;break}return e.next=8,fetch(g()+"/auth/user-details",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s.access_token}}).then(O).then((function(e){200===e.status&&(a=!0,t&&window.setInterval(w,1e3*n))})).catch((function(e){console.log("[ERROR] in ValidateAuth:",e)}));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return e.ok?e:{status:e.status,message:e.statusText}}function I(){return(I=Object(f.a)(b.a.mark((function e(t,n,s){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g()+"/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,username:t,email:n,password:s})}).then(C).then((function(e){200===e.status&&e.json().then((function(e){localStorage.setItem("autolycus-auth",JSON.stringify(e)),window.location.reload(!0)}))})).catch((function(e){console.log("[ERROR] in AuthSignup",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={username:"",email:"",password:""},s.handleChange=s.handleChange.bind(Object(h.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(h.a)(s)),s.handleCreateAccount=s.handleCreateAccount.bind(Object(h.a)(s)),s.validateInputs=s.validateInputs.bind(Object(h.a)(s)),s}return Object(d.a)(n,[{key:"handleChange",value:function(e){return function(t){var n={};n[e]=t.target.value,this.setState(n)}.bind(this)}},{key:"validateInputs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"1px solid #efefef":"1px solid red";this.state.username||(document.getElementById("login-username-box").style.border=t),this.state.email||(document.getElementById("signup-email-box").style.border=t),this.state.password||(document.getElementById("login-password-box").style.border=t)}},{key:"handleSubmit",value:function(e){this.validateInputs(),"login-account"===e.target.value?this.state.username&&this.state.password&&(function(e){var t=document.getElementById("login-username-box");fetch(g()+"/auth/user-exists?username="+e).then((function(e){200===e.status?t.style.border="1px solid #efefef":t.style.border="1px solid red"})).catch((function(e){console.log("[ERROR] in AuthLogin:",e)}))}(this.state.username),function(e,t){var n=document.getElementById("login-password-box");fetch(g()+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(O).then((function(t){t.json().then((function(s){200===t.status?(n.style.border="1px solid #efefef",s.username=e,localStorage.setItem("autolycus-auth",JSON.stringify(s)),window.location.reload(!0)):(x(),n.style.border="1px solid red")}))})).catch((function(e){x(),n.style.border="1px solid red",console.log("[ERROR] in AuthLogin:",e)}))}(this.state.username,this.state.password)):this.state.username&&this.state.password&&(function(e){var t=document.getElementById("login-username-box");fetch(g()+"/auth/user-exists?username="+e).then(C).then((function(e){200===e.status?t.style.border="1px solid red":t.style.border="1px solid #efefef"})).catch((function(e){console.log("[ERROR] in DoesUserExists:",e)}))}(this.state.username),function(e){var t=document.getElementById("signup-email-box");fetch(g()+"/auth/email-exists?email="+e).then(C).then((function(e){200===e.status?t.style.border="1px solid red":t.style.border="1px solid #efefef"})).catch((function(e){console.log("[ERROR] in DoesEmailExists:",e)}))}(this.state.email),function(e,t,n){I.apply(this,arguments)}(this.state.username,this.state.email,this.state.password))}},{key:"handleCreateAccount",value:function(e){if(this.validateInputs(!0),"create-account-link"===e.target.id){document.getElementById("signup-email-container").style.display="block",document.getElementById("forgot-password-text").style.display="none",document.getElementsByClassName("login-title")[0].innerHTML="Signup",document.getElementById("create-account-text").innerHTML="Already have an account?",document.getElementById("create-account-link").innerHTML="Login";var t=document.getElementById("login-submit-button");t.value="create-account",t.innerHTML="Signup",document.getElementById("create-account-link").id="login-account-link"}else{document.getElementById("signup-email-container").style.display="none",document.getElementById("forgot-password-text").style.display="block",document.getElementsByClassName("login-title")[0].innerHTML="Login",document.getElementById("create-account-text").innerHTML="Don't have an account yet?",document.getElementById("login-account-link").innerHTML="Signup";var n=document.getElementById("login-submit-button");n.value="login-account",n.innerHTML="Login",document.getElementById("login-account-link").id="create-account-link"}}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"login-card",children:[Object(s.jsxs)("div",{className:"login-form",id:"login-form",children:[Object(s.jsx)("p",{className:"login-title",children:"Login"}),Object(s.jsx)("br",{}),Object(s.jsx)("p",{children:"Username"}),Object(s.jsx)("input",{type:"text",id:"login-username-box",value:this.state.username,onChange:this.handleChange("username"),placeholder:"Username"}),Object(s.jsxs)("div",{id:"signup-email-container",style:{display:"none"},children:[Object(s.jsx)("p",{children:"Email"}),Object(s.jsx)("input",{type:"text",id:"signup-email-box",value:this.state.email,onChange:this.handleChange("email"),placeholder:"Email"})]}),Object(s.jsxs)("div",{className:"password-forgot-combined",children:[Object(s.jsx)("p",{children:"Password"}),Object(s.jsx)("a",{href:"#",id:"forgot-password-text",className:"forgot-password",children:"Forgot password ?"})]}),Object(s.jsx)("input",{type:"password",id:"login-password-box",value:this.state.password,onChange:this.handleChange("password"),placeholder:"Password"}),Object(s.jsx)("button",{type:"submit",value:"login-account",id:"login-submit-button",onClick:this.handleSubmit,className:"login-submit-button",children:"Login"})]}),Object(s.jsxs)("div",{className:"create-account",children:[Object(s.jsx)("p",{id:"create-account-text",children:"Don't have an account yet?"}),Object(s.jsx)("p",{className:"create-account-link",id:"create-account-link",onClick:this.handleCreateAccount,children:"Signup"})]})]})}}]),n}(i.a.Component),E=Object(l.f)(B),D=n(25),M=n.n(D);var T=function(){return Object(s.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",marginLeft:"-20px",marginTop:"-25px"},children:Object(s.jsx)(M.a,{type:"ThreeDots",color:"#e0e0e0",height:50,width:50})})};n(63),n(64);function R(){var e=localStorage.getItem("autolycus-auth");return"undefined"!==e&&(e=JSON.parse(e)),e}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",t=R();return{method:e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.access_token}}}var z=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).handleMagnetSubmit=s.handleMagnetSubmit.bind(Object(h.a)(s)),s}return Object(d.a)(n,[{key:"handleMagnetSubmit",value:function(e){var t=document.getElementById("add-magnet-box");t.value&&function(e,t){var n=R();n&&fetch(g()+"/torrents/add?magnet="+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.access_token}}).then((function(t){var n=document.getElementById(e);if(t.ok){n.value="";var s=n.placeholder;n.placeholder="Magnet Added!",setTimeout((function(){n.placeholder=s}),2e3)}else{n.value="";var a=n.placeholder;n.placeholder="Invalid Magnet!",setTimeout((function(){n.placeholder=a}),2e3)}})).catch((function(e){console.log("[ERROR] in SendMagnet:",e)}))}(t.id,t.value)}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"add-magnet-div",children:[Object(s.jsx)("input",{id:"add-magnet-box",type:"text",placeholder:"Add Magnet Link"}),Object(s.jsx)("img",{className:"add-magnet-icon",src:"/autolycus/icons/bxs-file-plus.svg",onClick:this.handleMagnetSubmit})]})}}]),n}(a.Component),F=(n(23),n(26)),P=(n(65),n(12)),L=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={threeDotMenuVisible:!1,explorerCard:null},s.humanFileSize=s.humanFileSize.bind(Object(h.a)(s)),s.handleDotMenu=s.handleDotMenu.bind(Object(h.a)(s)),s.handleOutsideClick=s.handleOutsideClick.bind(Object(h.a)(s)),s.handleDelete=s.handleDelete.bind(Object(h.a)(s)),s.trimString=s.trimString.bind(Object(h.a)(s)),s.getTorrentSize=s.getTorrentSize.bind(Object(h.a)(s)),s}return Object(d.a)(n,[{key:"humanFileSize",value:function(e){if(!e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}},{key:"handleDotMenu",value:function(){this.state.threeDotMenuVisible?(this.setState({threeDotMenuVisible:!1}),document.removeEventListener("click",this.handleOutsideClick,!1)):(this.setState({threeDotMenuVisible:!0}),document.addEventListener("click",this.handleOutsideClick,!1))}},{key:"handleOutsideClick",value:function(e){this.node.contains(e.target)||this.handleDotMenu()}},{key:"handleDelete",value:function(){(function(e){if(R())return fetch(g()+"/torrents/remove?hash="+e,A("GET"))})(this.props.data.hash).then((function(e){e.ok&&P.a.success("torrent deleted",{position:"top-center",hideAfter:1})})).catch((function(e){console.log("[ERROR] in DeleteTorrent:",e)}))}},{key:"trimString",value:function(e,t){if(window.innerWidth>=800)return e;var n="";return e.length>t&&(n="..."),e.slice(0,t).trim()+n}},{key:"getTorrentSize",value:function(){return this.props.data.is_finished?this.humanFileSize(this.props.data.total_bytes):this.humanFileSize(this.props.data.downloaded_bytes)+" / "+this.humanFileSize(this.props.data.total_bytes)+" ("+this.humanFileSize(this.props.data.download_speed)+"/s)"}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"torrent-card",children:[Object(s.jsxs)("div",{className:"torrent-card-info",onClick:function(){return e.props.cardHandler(e.props.data)},children:[Object(s.jsx)("img",{src:"/autolycus/icons/mac-folder-icon.svg"}),Object(s.jsxs)("div",{className:"torrent-card-wrapper",children:[Object(s.jsx)("p",{className:"torrent-card-info-name",children:this.trimString(this.props.data.name,30)}),!this.props.data.is_finished&&Object(s.jsx)(F.Progress,{percent:this.props.data.progress,status:"active"}),Object(s.jsx)("p",{className:"torrent-card-info-size",children:this.getTorrentSize()})]})]}),Object(s.jsxs)("div",{className:"torrent-card-menu",children:[Object(s.jsxs)("div",{className:"torrent-card-menu-dot-wrapper",ref:function(t){e.node=t},onClick:this.handleDotMenu,children:[Object(s.jsx)("div",{className:"torrent-card-menu-dot"}),Object(s.jsx)("div",{className:"torrent-card-menu-dot"}),Object(s.jsx)("div",{className:"torrent-card-menu-dot"})]}),this.state.threeDotMenuVisible&&Object(s.jsxs)("div",{className:"torrent-card-menu-contents",children:[Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bxs-cloud-download.svg"}),Object(s.jsx)("p",{children:"Download"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-link-alt.svg"}),Object(s.jsx)("p",{children:"Copy Link"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-edit-alt.svg"}),Object(s.jsx)("p",{children:"Rename"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-copy-alt.svg"}),Object(s.jsx)("p",{children:"Copy"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-cut.svg"}),Object(s.jsx)("p",{children:"Cut"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-paste.svg"}),Object(s.jsx)("p",{children:"Paste"})]}),Object(s.jsxs)("div",{onClick:this.handleDelete,className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-trash.svg"}),Object(s.jsx)("p",{children:"Delete"})]})]})]})]})}}]),n}(a.Component);n(66);function _(){var e=localStorage.getItem("autolycus-auth");return"undefined"!==e&&(e=JSON.parse(e)),e}function H(e){return fetch(g()+"/torrents/files?hash="+e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",t=_();return{method:e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.access_token}}}("GET"))}function V(e){return fetch(g()+"/public/create",{method:"POST",body:JSON.stringify({file_path:e}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+_().access_token}})}var J=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={data:null,threeDotMenuVisible:"",MenuTranslateY:"0px"},s.humanFileSize=s.humanFileSize.bind(Object(h.a)(s)),s.trimString=s.trimString.bind(Object(h.a)(s)),s.getFileIcon=s.getFileIcon.bind(Object(h.a)(s)),s.handleDotMenu=s.handleDotMenu.bind(Object(h.a)(s)),s.handleOutsideClick=s.handleOutsideClick.bind(Object(h.a)(s)),s.handleDownload=s.handleDownload.bind(Object(h.a)(s)),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.tFetcher(!1),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.addEventListener("popstate",(function(){e.props.goBack()}),!1)}},{key:"componentWillUnmount",value:function(){this.props.tFetcher(!0)}},{key:"goBack",value:function(){this.setState({data:null})}},{key:"humanFileSize",value:function(e){if(!e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}},{key:"trimString",value:function(e,t){if(window.innerWidth>=800)return e;var n="";return e.length>t&&(n="..."),e.slice(0,t).trim()+n}},{key:"getFileIcon",value:function(e){return[".mkv",".mp4",".avi"].includes(e)?"/autolycus/icons/video-file-icon.svg":[".txt",".srt",".md",".docx"].includes(e)?"/autolycus/icons/doc-file-icon.svg":[".mp3",".wav"].includes(e)?"/autolycus/icons/music-file-icon.svg":"/autolycus/icons/unknown-file-icon.svg"}},{key:"handleDotMenu",value:function(e,t){var n=window.innerHeight-30,s=220;if(this.state.threeDotMenuVisible)this.setState({threeDotMenuVisible:"",MenuTranslateY:"0px"}),document.removeEventListener("click",this.handleOutsideClick,!1);else{this.setState({threeDotMenuVisible:t}),document.addEventListener("click",this.handleOutsideClick,!1);try{if((s=e.clientY+s)>n){var a=50;window.innerWidth<800&&(a=100),this.setState({MenuTranslateY:n-a-s+"px"})}}catch(i){}}}},{key:"handleOutsideClick",value:function(e){["torrent-card-menu-dot","torrent-card-menu-dot-wrapper"].includes(e.target.className)||this.handleDotMenu()}},{key:"handleDownload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"directory"!==e.type?V(e.path).then((function(n){n.json().then((function(s){if(200===n.status){var a=g()+"/public/"+s.public_url_hash;if(t){var i=document.createElement("textarea");i.value=a,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),P.a.success("copied to clipboard",{position:"top-center",hideAfter:1})}else{a+="?download=true";var c=document.createElement("a");c.href=a,c.download=e.name,c.click(),c.remove(),P.a.success("download started",{position:"top-center",hideAfter:1})}}}))})):P.a.warn("directories not allowed",{position:"top-center",hideAfter:1})}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"file-card",style:{cursor:"pointer"},onClick:function(){return e.props.goBack()},children:Object(s.jsxs)("div",{className:"file-card-info",children:[Object(s.jsx)("img",{style:{width:"20px"},src:"/autolycus/icons/up-arrow.svg"}),Object(s.jsx)("p",{className:"file-card-wrapper file-card-info-size",children:"Folder Up"})]})}),this.props.data.children&&this.props.data.children.map((function(t){return Object(s.jsxs)("div",{className:"file-card",children:[Object(s.jsxs)("div",{className:"file-card-info",children:["directory"===t.type&&Object(s.jsx)("img",{src:"/autolycus/icons/mac-folder-icon.svg"}),"file"===t.type&&Object(s.jsx)("img",{style:{width:"32px"},src:e.getFileIcon(t.ext)}),Object(s.jsxs)("div",{className:"file-card-wrapper",children:[Object(s.jsx)("p",{className:"file-card-info-name",onClick:function(){return e.props.updateCard(t,e.props.data)},children:e.trimString(t.name,30)}),"file"===t.type&&Object(s.jsx)("p",{className:"file-card-info-size",children:e.humanFileSize(t.size)})]})]}),Object(s.jsxs)("div",{className:"torrent-card-menu",children:[Object(s.jsxs)("div",{className:"torrent-card-menu-dot-wrapper",onClick:function(n){return e.handleDotMenu(n,t.name)},children:[Object(s.jsx)("div",{className:"torrent-card-menu-dot"}),Object(s.jsx)("div",{className:"torrent-card-menu-dot"}),Object(s.jsx)("div",{className:"torrent-card-menu-dot"})]}),e.state.threeDotMenuVisible===t.name&&Object(s.jsxs)("div",{style:{transform:"translate(0px, "+e.state.MenuTranslateY+")"},className:"torrent-card-menu-contents",children:[Object(s.jsxs)("div",{onClick:function(){return e.handleDownload(t)},className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bxs-cloud-download.svg"}),Object(s.jsx)("p",{children:"Download"})]}),Object(s.jsxs)("div",{onClick:function(){return e.handleDownload(t,!0)},className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-link-alt.svg"}),Object(s.jsx)("p",{children:"Copy Link"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-edit-alt.svg"}),Object(s.jsx)("p",{children:"Rename"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-copy-alt.svg"}),Object(s.jsx)("p",{children:"Copy"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-cut.svg"}),Object(s.jsx)("p",{children:"Cut"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-paste.svg"}),Object(s.jsx)("p",{children:"Paste"})]}),Object(s.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(s.jsx)("img",{src:"/autolycus/icons/bx-trash.svg"}),Object(s.jsx)("p",{onClick:e.handleDelete,children:"Delete"})]})]})]})]})}))]})}}]),n}(a.Component),G=(n(67),function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={card:null,data:null,parent_items:[]},s.cardHandler=s.cardHandler.bind(Object(h.a)(s)),s.goBack=s.goBack.bind(Object(h.a)(s)),s.updateCard=s.updateCard.bind(Object(h.a)(s)),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.tFetcher(!0),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.addEventListener("popstate",(function(){}),!1)}},{key:"componentWillUnmount",value:function(){this.props.tFetcher(!1)}},{key:"cardHandler",value:function(e){var t=this;H(e.hash).then((function(n){n.ok?n.json().then((function(n){t.setState({card:e,data:n})})):P.a.error("file not found",{position:"top-center",hideAfter:1})})).catch((function(e){console.log("[ERROR] from getFileDetails:",e)}))}},{key:"goBack",value:function(){var e=this.state.parent_items.slice(-1)[0];this.setState({data:e,parent_items:this.state.parent_items.filter((function(t){return t!==e}))})}},{key:"updateCard",value:function(e,t){if("directory"===e.type)this.setState({data:e,parent_items:this.state.parent_items.concat([t])});else if([".mkv",".mp4",".avi",".txt",".srt",".jpg",".mp3",".wav"].includes(e.ext)){var n=btoa(unescape(encodeURIComponent(e.path))),s=g()+"/public/"+n+"?token="+_().access_token;window.open(s,"_blank").focus()}}},{key:"render",value:function(){var e=this;return this.state.data?Object(s.jsxs)("div",{style:{scrollBehavior:"smooth"},children:[Object(s.jsx)(z,{}),Object(s.jsx)(J,{data:this.state.data,tFetcher:this.props.tFetcher,goBack:this.goBack,updateCard:this.updateCard},this.state.data)]}):Object(s.jsxs)("div",{children:[Object(s.jsx)(z,{}),this.props.torrents.map((function(t){return Object(s.jsx)(L,{data:t,cardHandler:e.cardHandler},t.name)}))]})}}]),n}(a.Component));function U(){return Object(s.jsx)("p",{children:"Starred"})}function W(){return Object(s.jsx)("p",{children:"RecycleBin"})}function Y(){return Object(s.jsx)("p",{children:"Help"})}function q(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Settings"}),Object(s.jsx)("button",{onClick:y,children:"Logout"})]})}var K=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){return"Home"===this.props.view?Object(s.jsx)(G,{torrents:this.props.torrents,tFetcher:this.props.tFetcher}):"Starred"===this.props.view?Object(s.jsx)(U,{}):"RecycleBin"===this.props.view?Object(s.jsx)(W,{}):"Help"===this.props.view?Object(s.jsx)(Y,{}):"Settings"===this.props.view?Object(s.jsx)(q,{}):void 0}}]),n}(a.Component),Q=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={view:"Home",torrents:[]},s.username=JSON.parse(localStorage.getItem("autolycus-auth")).username,s.updateView=s.updateView.bind(Object(h.a)(s)),s.timer=null,s.updateTorrents=s.updateTorrents.bind(Object(h.a)(s)),s.tFetcher=s.tFetcher.bind(Object(h.a)(s)),s}return Object(d.a)(n,[{key:"tFetcher",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.timer=setInterval(this.updateTorrents,2e3):clearInterval(this.timer)}},{key:"updateTorrents",value:function(){var e=this,t=function(){if(R())return fetch(g()+"/torrents/status",A("GET"))}();t&&t.then((function(t){t.json().then((function(t){e.setState({torrents:t.torrents})}))})).catch((function(e){console.log("[ERROR] in FetchTorrents:",e)}))}},{key:"updateView",value:function(e){this.setState({view:e});var t=document.getElementsByClassName("left-section-menu-items");if(window.innerWidth>=800){for(var n=0;n<t.length;n++)t[n].style.backgroundColor="transparent";document.getElementById(e+"NavButton").style.backgroundColor="rgb(42 154 245 / 10%)"}}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"container-section",children:[Object(s.jsx)("div",{className:"left-section",children:Object(s.jsxs)("div",{className:"left-section-menu",children:[Object(s.jsxs)("div",{className:"left-section-logo",children:[Object(s.jsx)("img",{className:"left-section-logo-icon",width:"35px",src:"/autolycus/icons/bx-meteor.svg"}),Object(s.jsx)("h3",{className:"left-section-logo-text",children:"Autolycus"})]}),Object(s.jsxs)("div",{className:"left-section-menu-items",id:"HomeNavButton",onClick:function(){return e.updateView("Home")},children:[Object(s.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-home-alt.svg"}),Object(s.jsx)("p",{style:{backgroundColor:"none"},className:"left-section-menu-texts",children:"Home"})]}),Object(s.jsxs)("div",{className:"left-section-menu-items",id:"StarredNavButton",onClick:function(){return e.updateView("Starred")},children:[Object(s.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-star.svg"}),Object(s.jsx)("p",{className:"left-section-menu-texts",children:"Starred"})]}),Object(s.jsxs)("div",{className:"left-section-menu-items",id:"RecycleBinNavButton",onClick:function(){return e.updateView("RecycleBin")},children:[Object(s.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-trash.svg"}),Object(s.jsx)("p",{className:"left-section-menu-texts",children:"Recycle bin"})]}),Object(s.jsxs)("div",{className:"left-section-menu-items",id:"HelpNavButton",onClick:function(){return e.updateView("Help")},children:[Object(s.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-help-circle.svg"}),Object(s.jsx)("p",{className:"left-section-menu-texts",children:"Help"})]}),Object(s.jsxs)("div",{className:"left-section-menu-items",id:"SettingsNavButton",onClick:function(){return e.updateView("Settings")},children:[Object(s.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-slider-alt.svg"}),Object(s.jsx)("p",{className:"left-section-menu-texts",children:"Settings"})]})]})}),Object(s.jsx)("div",{className:"middle-section",children:Object(s.jsx)(K,{username:this.username,view:this.state.view,torrents:this.state.torrents,tFetcher:this.tFetcher})}),Object(s.jsx)("div",{className:"right-section",children:Object(s.jsx)("p",{children:"File info will appear here"})})]})})}}]),n}(a.Component),X=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={loading:!0,authorized:!1},s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;S(!0,3600).then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):w().then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):e.setState({loading:!1,authorized:!1})}))}))}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)(T,{}):this.state.authorized?Object(s.jsx)("div",{children:Object(s.jsx)(Q,{})}):Object(s.jsx)(l.a,{component:$})}}]),n}(a.Component),Z=(n(68),function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;Object(u.a)(this,n),(s=t.call(this,e)).timer=null,s.state={apiDown:!0},s.pingAPI=s.pingAPI.bind(Object(h.a)(s)),s.handleConfigureClick=s.handleConfigureClick.bind(Object(h.a)(s)),s.handleReset=s.handleReset.bind(Object(h.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(h.a)(s)),s.findGetParameter=s.findGetParameter.bind(Object(h.a)(s));var a=s.findGetParameter("api");return a&&(a=decodeURIComponent(a),localStorage.setItem("autolycus-uri",a),window.location.href=window.location.origin+"/autolycus"),s}return Object(d.a)(n,[{key:"pingAPI",value:function(){var e=this;fetch(g()+"/ping").then((function(t){t.ok&&e.setState({apiDown:!1})})).catch((function(t){e.setState({apiDown:!0})}))}},{key:"findGetParameter",value:function(e){return(window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)"))||[,null])[1]}},{key:"componentDidMount",value:function(){this.timer=setInterval(this.pingAPI,1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"handleReset",value:function(e){clearInterval(this.timer),localStorage.setItem("autolycus-uri",v),document.getElementById("enter-api-address").value=v}},{key:"handleConfigureClick",value:function(){var e=document.getElementById("server-down-configure-box"),t=document.getElementById("server-down-configure-text");e.style.display="block",t.style.display="none"}},{key:"handleSubmit",value:function(){var e=this,t=document.getElementById("enter-api-address");t.value.startsWith("http")?fetch(t.value+"/ping").then((function(n){n.ok?(localStorage.setItem("autolycus-uri",t.value),e.setState({apiDown:!1})):P.a.error("API address is not reachable",{position:"top-center",hideAfter:1})})).catch((function(t){P.a.error("API address is not reachable",{position:"top-center",hideAfter:1}),e.setState({apiDown:!0})})):P.a.error("invalid API address",{position:"top-center",hideAfter:1})}},{key:"render",value:function(){return this.state.apiDown?Object(s.jsx)("div",{className:"server-down-container",children:Object(s.jsxs)("div",{className:"server-down",children:[Object(s.jsx)("img",{src:"/autolycus/icons/server-down.svg",width:"30%"}),Object(s.jsx)("h3",{children:"Our Server is Feeling a Little Down"}),Object(s.jsxs)("p",{children:["Please try again in a few moments.",Object(s.jsx)("br",{}),"We'll be  back up in  no time."]}),Object(s.jsxs)("div",{className:"server-down-configure",style:{cursor:"pointer"},children:[Object(s.jsx)("p",{id:"server-down-configure-text",onClick:this.handleConfigureClick,children:"Configure API Address"}),Object(s.jsxs)("div",{className:"server-down-configure-box",id:"server-down-configure-box",style:{display:"none"},children:[Object(s.jsx)("input",{className:"server-down-configure-input",type:"text",id:"enter-api-address",placeholder:"Enter API Address",defaultValue:g()}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{onClick:this.handleSubmit,className:"server-down-configure-box-submit",children:"Submit"}),Object(s.jsxs)("div",{className:"server-down-reset-div",children:[Object(s.jsx)("p",{style:{color:"#484848"},children:"No idea about this?"}),Object(s.jsx)("p",{onClick:this.handleReset,className:"server-down-reset-link",children:"Reset"})]})]})]})]})}):Object(s.jsx)($,{})}}]),n}(a.Component)),$=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var s;Object(u.a)(this,n),(s=t.call(this,e)).state={loading:!0,authorized:!1,apiDown:!1},s.pingAPI=s.pingAPI.bind(Object(h.a)(s)),s.timer=null;var a=s.findGetParameter("api");return a&&(a=decodeURIComponent(a),localStorage.setItem("autolycus-uri",a),window.location.href=window.location.origin+"/autolycus"),s}return Object(d.a)(n,[{key:"findGetParameter",value:function(e){return(window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)"))||[,null])[1]}},{key:"pingAPI",value:function(){var e=this;fetch(g()+"/ping").then((function(t){t.ok&&e.setState({apiDown:!1})})).catch((function(t){e.setState({apiDown:!0})}))}},{key:"componentDidMount",value:function(){var e=this;this.pingAPI(),localStorage.getItem("autolycus-auth")||x(),S().then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):w().then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):e.setState({loading:!1,authorized:!1})}))}))}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)(T,{}):this.state.authorized?Object(s.jsx)(l.a,{component:X}):this.state.apiDown?Object(s.jsx)(Z,{}):Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"home-section",children:[Object(s.jsx)("div",{className:"carousel-section"}),Object(s.jsx)("div",{className:"login-section",children:Object(s.jsx)("div",{className:"login-form",children:Object(s.jsx)(E,{})})})]})})}}]),n}(a.Component);function ee(){return Object(s.jsx)("div",{className:"app",children:Object(s.jsx)(r.a,{basename:"/autolycus",children:Object(s.jsx)(l.c,{children:Object(s.jsx)(l.a,{exact:!0,path:"/",component:$})})})})}o.a.render(Object(s.jsx)(ee,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.d3c20198.chunk.js.map