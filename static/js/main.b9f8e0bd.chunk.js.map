{"version":3,"sources":["uri.js","services/LoginService.js","services/SignupService.js","components/Login.js","components/ThreeDotLoader.js","components/FileManager/services/TorrentService.js","components/FileManager/components/AddMagnet.js","components/FileManager/components/TorrentCard.js","components/FileManager/services/FileService.js","components/FileManager/components/FileCard.js","components/FileManager/components/Home.js","components/FileManager/FileManagerViews.js","components/FileManager/FileManager.js","views/Dashboard.js","views/ConfigureServer.js","views/Home.js","index.js"],"names":["API_URL","uri","localStorage","getItem","handleErrors","response","ok","status","message","statusText","clearTokens","setItem","undefined","AuthLogout","auth","JSON","parse","fetch","method","headers","access_token","body","stringify","then","window","location","reload","refreshAccessToken","a","authorized","refresh_token","json","catch","err","console","log","ValidateAuth","auto_refresh","interval","setInterval","username","email","password","name","Login","props","state","handleChange","bind","handleSubmit","handleCreateAccount","validateInputs","key","e","target","value","this","setState","reset","color","document","getElementById","style","border","usernamebox","ValidateUsername","password_box","AuthLogin","DoesUserExists","emailbox","DoesEmailExists","AuthSignup","id","display","getElementsByClassName","innerHTML","button","className","type","onChange","placeholder","href","onClick","React","Component","withRouter","ThreeDotLoader","position","top","left","marginLeft","marginTop","height","width","getAuthToken","getAuthHeader","AddMagnet","handleMagnetSubmit","inputBox","element_id","magnet","element","setTimeout","SendMagnet","src","TorrentCard","threeDotMenuVisible","explorerCard","humanFileSize","handleDotMenu","handleOutsideClick","handleDelete","trimString","getTorrentSize","size","i","Math","floor","pow","toFixed","removeEventListener","addEventListener","node","contains","Hash","DeleteTorrent","data","hash","cogoToast","success","hideAfter","string","length","innerWidth","postfix","slice","trim","is_finished","total_bytes","downloaded_bytes","download_speed","cardHandler","percent","progress","ref","getFileDetails","downloadFileUrl","path","file_path","FileCard","MenuTranslateY","getFileIcon","handleDownload","tFetcher","history","pushState","goBack","ext","includes","windowH","innerHeight","menuH","clientY","adjust","item","copyLink","url","public_url_hash","el","createElement","appendChild","select","execCommand","removeChild","download","click","remove","warn","cursor","children","map","updateCard","transform","Home","card","parent_items","error","previous_item","filter","concat","b64","btoa","unescape","encodeURIComponent","open","focus","scrollBehavior","torrents","Starred","RecycleBin","Help","Settings","FileManagerViews","view","FileManager","updateView","timer","updateTorrents","clearInterval","Fetch","FetchTorrents","elements","backgroundColor","Dashboard","loading","component","ConfigureServer","apiDown","pingAPI","handleConfigureClick","handleReset","findGetParameter","apiParameter","decodeURIComponent","resp","q","search","match","RegExp","configureBox","toggle","input","startsWith","defaultValue","App","basename","process","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.b9f8e0bd.chunk.js","sourcesContent":["let API_URL = 'http://localhost:5000/api';\n\nfunction uri(){\n    let uri = localStorage.getItem('autolycus-uri');\n    if (uri){\n        return uri;\n    } else {\n        return API_URL;\n    }\n}\n\nexport {\n    API_URL,\n    uri\n}","import {uri} from '../uri';\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        return {status: response.status, message: response.statusText};\n    }\n    return response;\n}\n\nfunction clearTokens(){\n    localStorage.setItem('autolycus-auth', undefined);\n}\n\nfunction AuthLogin(username, password) {\n    let password_box = document.getElementById(\"login-password-box\");\n    fetch(uri()+\"/auth/login\", {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ username: username, password: password })\n        })\n        .then(handleErrors)\n        .then(response => {\n            response.json().then(json => {\n                if (response.status === 200){\n                    // console.log(\"success json\", json);\n                    password_box.style.border = \"1px solid #efefef\";\n                    json[\"username\"] = username;\n                    localStorage.setItem('autolycus-auth', JSON.stringify(json));\n                    window.location.reload(true);\n                    // var retrievedObject = localStorage.getItem('autolycus-auth');\n                    // console.log('retrievedObject: ', JSON.parse(retrievedObject));\n                } else {\n                    clearTokens();\n                    password_box.style.border = \"1px solid red\";\n                };\n            });\n        }).catch(err => {\n            clearTokens();\n            password_box.style.border = \"1px solid red\";\n            console.log(\"[ERROR] in AuthLogin:\", err);\n        });\n    };\n\nfunction AuthLogout(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n\n    if (auth){\n        fetch(uri()+\"/auth/logout\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            },\n            body: JSON.stringify(auth)\n        })\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                clearTokens();\n                window.location.reload(true);\n            }\n        })\n    }\n}\n\nfunction ValidateUsername(username){\n    let usernamebox = document.getElementById(\"login-username-box\");\n    return fetch(uri()+\"/auth/user-exists?username=\"+username)\n        // .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                usernamebox.style.border = \"1px solid #efefef\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                usernamebox.style.border = \"1px solid red\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in AuthLogin:\", err);\n        });\n    }\n\n\nasync function refreshAccessToken() {\n        let auth = localStorage.getItem('autolycus-auth');\n        let authorized = false;\n    \n        if (auth !== \"undefined\"){\n            auth = JSON.parse(auth)\n        }\n\n        if (auth){\n            // try to get new access token using refresh token\n            await fetch(uri()+\"/auth/refresh-token\", {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + auth.refresh_token\n                }\n            })\n            .then(handleErrors)\n            .then(response => {\n                if (response.status === 200){\n                    response.json()\n                    .then(response => {\n                        authorized = true;\n                        // console.log(\"access token refreshed\")\n                        auth.access_token = response.access_token;\n                        localStorage.setItem('autolycus-auth', JSON.stringify(auth));\n                    })\n                }\n            }).catch(err => {\n                console.log(\"[ERROR] in refreshAccessToken:\",err)\n            })\n        }\n\n        return authorized;\n    }\n\nasync function ValidateAuth (auto_refresh=false, interval=2) {\n    let auth = localStorage.getItem('autolycus-auth');\n    let authorized = false;\n\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n\n    if (auth){\n        await fetch(uri()+\"/auth/user-details\", {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            }\n        })\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                authorized = true;\n                if (auto_refresh){\n                    window.setInterval(refreshAccessToken, 1000*interval);\n                }\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in ValidateAuth:\", err)\n        })\n    }\n\n    return authorized;\n}\n\nexport {\n    AuthLogin,\n    ValidateUsername,\n    ValidateAuth,\n    refreshAccessToken,\n    clearTokens,\n    AuthLogout\n}","import {uri} from \"../uri\";\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        return {status: response.status, message: response.statusText};\n    }\n    return response;\n}\n\nfunction DoesUserExists(username){\n    let usernamebox = document.getElementById(\"login-username-box\");\n\n    return fetch(uri()+\"/auth/user-exists?username=\"+username)\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                usernamebox.style.border = \"1px solid red\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                usernamebox.style.border = \"1px solid #efefef\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in DoesUserExists:\", err);\n        });\n    }\n\nfunction DoesEmailExists(email){\n    let emailbox = document.getElementById(\"signup-email-box\");\n\n    return fetch(uri()+\"/auth/email-exists?email=\"+email)\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                emailbox.style.border = \"1px solid red\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                emailbox.style.border = \"1px solid #efefef\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in DoesEmailExists:\", err);\n        });\n}\n\nasync function AuthSignup(username, email, password) {\n    await fetch(uri()+\"/auth/signup\", {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({name: username, username: username, email: email, password: password})\n    })\n    .then(handleErrors)\n    .then(response => {\n        if (response.status === 200){\n            response.json().then( json => {\n                localStorage.setItem('autolycus-auth', JSON.stringify(json));\n                window.location.reload(true);\n            })\n        }\n    }).catch(err => {\n        console.log(\"[ERROR] in AuthSignup\", err)\n    })\n}\n\nexport {\n    DoesUserExists,\n    DoesEmailExists,\n    AuthSignup\n}","import React, { Component } from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport '../styles/Login.css';\nimport {AuthLogin, ValidateUsername, clearTokens} from '../services/LoginService';\nimport { DoesUserExists, DoesEmailExists, AuthSignup } from '../services/SignupService';\nimport {uri} from \"../uri\";\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {username: '', email:'', password: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleCreateAccount = this.handleCreateAccount.bind(this);\n        this.validateInputs = this.validateInputs.bind(this);\n    }\n\n    handleChange(key) {\n        return function (e) {\n          var state = {};\n          state[key] = e.target.value;\n          this.setState(state);\n        }.bind(this);\n    }\n\n    validateInputs(reset=false){\n        let color = reset ? \"1px solid #efefef\":\"1px solid red\";\n        if (!this.state.username){\n            document.getElementById(\"login-username-box\").style.border = color;\n        }\n        if (!this.state.email){\n            document.getElementById(\"signup-email-box\").style.border = color;\n        }\n        if (!this.state.password){\n            document.getElementById(\"login-password-box\").style.border = color;\n        }\n    }\n\n    handleSubmit(e) {\n        this.validateInputs()\n    \n        if (e.target.value === \"login-account\"){\n            if (this.state.username && this.state.password){\n                ValidateUsername(this.state.username);\n                AuthLogin(this.state.username, this.state.password);\n            }\n        } else{\n            if (this.state.username && this.state.password){\n                DoesUserExists(this.state.username)\n                DoesEmailExists(this.state.email)\n                AuthSignup(this.state.username, this.state.email, this.state.password)\n            }\n        }\n        \n    }\n\n    handleCreateAccount(e){\n        this.validateInputs(true);\n        \n        if (e.target.id === \"create-account-link\"){\n            document.getElementById(\"signup-email-container\").style.display = \"block\";\n            document.getElementById(\"forgot-password-text\").style.display = \"none\";\n            document.getElementsByClassName(\"login-title\")[0].innerHTML = \"Signup\";\n            document.getElementById(\"create-account-text\").innerHTML = \"Already have an account?\";\n            document.getElementById(\"create-account-link\").innerHTML = \"Login\";\n            let button = document.getElementById(\"login-submit-button\");\n            button.value = \"create-account\"; button.innerHTML = \"Signup\";\n            document.getElementById(\"create-account-link\").id = \"login-account-link\";\n        } else {\n            document.getElementById(\"signup-email-container\").style.display = \"none\";\n            document.getElementById(\"forgot-password-text\").style.display = \"block\";\n            document.getElementsByClassName(\"login-title\")[0].innerHTML = \"Login\";\n            document.getElementById(\"create-account-text\").innerHTML = \"Don't have an account yet?\"\n            document.getElementById(\"login-account-link\").innerHTML = \"Signup\"\n            let button = document.getElementById(\"login-submit-button\");\n            button.value = \"login-account\"; button.innerHTML = \"Login\";\n            document.getElementById(\"login-account-link\").id = \"create-account-link\";\n        }\n    }\n\n    render () {\n        return (\n            <div className='login-card'>\n                <div className=\"login-form\"  id=\"login-form\">\n                    <p className=\"login-title\">Login</p>\n                    <br></br>\n                    <p>Username</p>\n                    <input type=\"text\" id=\"login-username-box\" value={this.state.username} onChange={this.handleChange('username')} placeholder=\"Username\" />\n                    \n                    <div id=\"signup-email-container\" style={{display: \"none\"}}>\n                        <p>Email</p>\n                        <input type=\"text\" id=\"signup-email-box\" value={this.state.email} onChange={this.handleChange('email')} placeholder=\"Email\" />\n                    </div>\n                    \n                    <div className=\"password-forgot-combined\">\n                        <p>Password</p>\n                        <a href=\"#\" id=\"forgot-password-text\" className=\"forgot-password\">Forgot password ?</a>\n                    </div>\n\n                    <input type=\"password\" id=\"login-password-box\"value={this.state.password} onChange={this.handleChange('password')} placeholder=\"Password\"></input>\n                    <button type=\"submit\" value=\"login-account\" id=\"login-submit-button\" onClick={this.handleSubmit} className=\"login-submit-button\">Login</button>\n                </div>\n\n                <div className=\"create-account\">\n                    <p id=\"create-account-text\">Don't have an account yet?</p>\n                    <p className=\"create-account-link\" id=\"create-account-link\" onClick={this.handleCreateAccount}>Signup</p>\n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import Loader from 'react-loader-spinner';\n\nfunction ThreeDotLoader() {\n    return (\n        <div style={{position: \"fixed\", top: \"50%\", left: \"50%\", marginLeft: \"-20px\", marginTop: \"-25px\"}}>\n            <Loader\n            type=\"ThreeDots\"\n            color=\"#e0e0e0\"\n            height={50}\n            width={50}        \n            />\n        </div>\n    )\n}\n\nexport default ThreeDotLoader;","import {uri} from \"../../../uri\";\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\n\nfunction SendMagnet(element_id, magnet){\n    let auth = getAuthToken();\n\n    if (auth){\n        fetch(uri()+\"/torrents/add?magnet=\"+magnet, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            }\n        })\n        .then(response => {\n            let element = document.getElementById(element_id);\n\n            if (response.ok){    \n                element.value = \"\";\n                let placeholder = element.placeholder;\n                element.placeholder = \"Magnet Added!\";\n\n                setTimeout(() => {\n                    element.placeholder = placeholder;\n                }, 2000);\n\n            } else {\n                element.value = \"\";\n                let placeholder = element.placeholder;\n                element.placeholder = \"Invalid Magnet!\";\n\n                setTimeout(() => {\n                    element.placeholder = placeholder;\n                }, 2000);\n            }\n        })\n        .catch(err => {\n            console.log(\"[ERROR] in SendMagnet:\", err)\n        })\n    }\n}\n\nfunction FetchTorrents(){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/status\", getAuthHeader(\"GET\"))\n    }\n    \n}\n\nfunction DeleteTorrent(Hash){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/remove?hash=\"+Hash, getAuthHeader(\"GET\"))\n    }\n    \n}\n\nexport {\n    SendMagnet,\n    FetchTorrents,\n    DeleteTorrent\n};","import React, { Component } from 'react';\nimport \"../styles/AddMagnet.css\"\nimport { SendMagnet } from \"../services/TorrentService\";\n\nclass AddMagnet extends Component {\n    constructor(props) {\n        super(props);\n        this.handleMagnetSubmit = this.handleMagnetSubmit.bind(this);\n    }\n\n    handleMagnetSubmit(e){\n        let inputBox = document.getElementById(\"add-magnet-box\");\n        if (inputBox.value){\n            SendMagnet(inputBox.id, inputBox.value);\n        }\n    }\n\n    render(){\n        return(\n            <div className=\"add-magnet-div\">\n                <input id=\"add-magnet-box\" type=\"text\" placeholder=\"Add Magnet Link\" />\n                <img className=\"add-magnet-icon\" src=\"/autolycus/icons/bxs-file-plus.svg\" onClick={this.handleMagnetSubmit}/>\n            </div>\n\n        )\n    }\n\n}\n\nexport default AddMagnet;","import React, { Component } from 'react';\nimport \"../styles/TorrentCard.css\";\nimport {DeleteTorrent} from \"../services/TorrentService\";\nimport { Progress } from 'react-sweet-progress';\nimport \"react-sweet-progress/lib/style.css\";\nimport cogoToast from 'cogo-toast';\n\nclass TorrentCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {threeDotMenuVisible: false, explorerCard: null}\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.handleDotMenu = this.handleDotMenu.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.getTorrentSize = this.getTorrentSize.bind(this);\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 B\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    handleDotMenu(){\n        if (!this.state.threeDotMenuVisible){\n            this.setState({threeDotMenuVisible: true});\n            document.addEventListener('click', this.handleOutsideClick, false);\n        }else {\n            this.setState({threeDotMenuVisible: false});\n            document.removeEventListener('click', this.handleOutsideClick, false);\n        }\n    }\n\n    handleOutsideClick(e) {\n        // ignore clicks on the component itself\n        if (this.node.contains(e.target)){\n            return\n        }; this.handleDotMenu();\n      }\n\n      handleDelete(){\n        DeleteTorrent(this.props.data.hash)\n        .then( response => {\n            if (response.ok){\n                cogoToast.success(\"torrent deleted\", {position: \"top-center\", hideAfter: 1});\n            }\n        })\n        .catch(err => {\n            console.log(\"[ERROR] in DeleteTorrent:\", err)\n        })\n      }\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    getTorrentSize(){\n        if (!this.props.data.is_finished){\n            return this.humanFileSize(this.props.data.downloaded_bytes)+\" / \"+this.humanFileSize(this.props.data.total_bytes)+ \" (\"+ this.humanFileSize(this.props.data.download_speed)+\"/s)\";\n        }else{\n            return this.humanFileSize(this.props.data.total_bytes);\n        }\n    }\n\n    render(){\n        return(\n            <div className=\"torrent-card\">\n                <div className=\"torrent-card-info\" onClick={() => this.props.cardHandler(this.props.data)}>\n                    <img src=\"/autolycus/icons/mac-folder-icon.svg\"/>\n                    <div className=\"torrent-card-wrapper\">\n                        <p className=\"torrent-card-info-name\">{this.trimString(this.props.data.name, 30)}</p>\n                        {!this.props.data.is_finished && <Progress percent={this.props.data.progress} status=\"active\" />}\n                        <p className=\"torrent-card-info-size\">{this.getTorrentSize()}</p>\n                    </div>\n                </div>\n\n                <div className=\"torrent-card-menu\">\n                    <div className=\"torrent-card-menu-dot-wrapper\" ref={node => { this.node = node; }} onClick={this.handleDotMenu}>\n                        <div className=\"torrent-card-menu-dot\" />\n                        <div className=\"torrent-card-menu-dot\" />\n                        <div className=\"torrent-card-menu-dot\" />\n                    </div>\n                    {this.state.threeDotMenuVisible && (\n                        <div className=\"torrent-card-menu-contents\">\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bxs-cloud-download.svg\"/>\n                                <p>Download</p>\n                            </div>\n                            \n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-link-alt.svg\"/>\n                                <p>Copy Link</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-edit-alt.svg\"/>\n                                <p>Rename</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-copy-alt.svg\"/>\n                                <p>Copy</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-cut.svg\"/>\n                                <p>Cut</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-paste.svg\"/>\n                                <p>Paste</p>\n                            </div>\n\n                            <div onClick={this.handleDelete} className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-trash.svg\"/>\n                                <p>Delete</p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default TorrentCard;","import {uri} from \"../../../uri\";\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\nfunction getFileDetails(Hash){\n    return fetch(uri()+\"/torrents/files?hash=\"+Hash, getAuthHeader(\"GET\"))\n}\n\n\nfunction downloadFileUrl(path){\n    return fetch(uri()+\"/public/create\", {\n        method: \"POST\",\n        body: JSON.stringify({file_path: path}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n\n    // let b64 = btoa(unescape(encodeURIComponent(path)));\n    // return uri+\"/torrent-files?path=\"+b64+\"&auth=\"+auth.access_token;\n}\n\nexport {\n    getAuthToken,\n    getFileDetails,\n    downloadFileUrl\n}","import React, { Component } from 'react';\nimport \"../styles/FileCard.css\";\nimport \"../styles/TorrentCard.css\";\nimport {downloadFileUrl} from \"../services/FileService\";\nimport cogoToast from 'cogo-toast';\nimport {uri} from \"../../../uri\";\n\nclass FileCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {data: null, threeDotMenuVisible: \"\", MenuTranslateY: \"0px\"};\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.getFileIcon = this.getFileIcon.bind(this);\n        this.handleDotMenu = this.handleDotMenu.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.tFetcher(false);\n\n        // reason to write below line twice: https://stackoverflow.com/questions/55966533/show-alert-on-browser-back-button-event-on-react-js\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        \n        // switch to previous directory when user presses back button in browser\n        window.addEventListener('popstate', () => {this.props.goBack()}, false)\n    }\n\n    componentWillUnmount() {\n        this.props.tFetcher(true);\n    }\n\n    goBack(){\n        this.setState({data: null})\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 Bytes\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    getFileIcon(ext){\n        if ([\".mkv\", \".mp4\", \".avi\"].includes(ext)){\n            return \"/autolycus/icons/video-file-icon.svg\";\n        }else if ([\".txt\", \".srt\", \".md\", \".docx\"].includes(ext)){\n            return \"/autolycus/icons/doc-file-icon.svg\";\n        }else if ([\".mp3\", \".wav\"].includes(ext)){\n            return \"/autolycus/icons/music-file-icon.svg\";\n        }else{\n            return \"/autolycus/icons/unknown-file-icon.svg\";\n        }\n    }\n\n    handleDotMenu(e, name){\n        let windowH = window.innerHeight-30;\n        let menuH = 220;\n\n        if (!this.state.threeDotMenuVisible){\n            this.setState({threeDotMenuVisible: name});\n            document.addEventListener('click', this.handleOutsideClick, false);\n            \n            try{\n                menuH = e.clientY+menuH;\n                if (menuH > windowH){\n                    let adjust = 50;\n                    if (window.innerWidth < 800){\n                        // adjust overflow menu\n                        adjust = 100;\n                    }\n                    this.setState({MenuTranslateY: windowH-adjust-menuH+\"px\"});\n                }\n            } catch(err){}\n\n        }else {\n            this.setState({threeDotMenuVisible: \"\", MenuTranslateY: \"0px\"});\n            document.removeEventListener('click', this.handleOutsideClick, false);\n        }\n    }\n\n    handleOutsideClick(e) {\n        if (![\"torrent-card-menu-dot\", \"torrent-card-menu-dot-wrapper\"].includes(e.target.className)){\n            this.handleDotMenu();\n        }\n    }\n\n    handleDownload(item, copyLink=false){\n        if (item.type === \"directory\"){\n            cogoToast.warn(\"directories not allowed\", {position: \"top-center\", hideAfter: 1});\n            return;\n        }\n\n        downloadFileUrl(item.path).then(response => {\n            response.json().then(json => {\n                if (response.status === 200){\n                    let url = uri()+\"/public/\"+json.public_url_hash\n                    if (copyLink){\n                        // copy link to clipboard\n                        const el = document.createElement('textarea');\n                        el.value = url;\n                        document.body.appendChild(el);\n                        el.select();\n                        document.execCommand('copy');\n                        document.body.removeChild(el);\n                        cogoToast.success(\"copied to clipboard\", {position: \"top-center\", hideAfter: 1});\n            \n                    }else{\n                        // download file\n                        url = url+\"?download=true\"\n                        let a = document.createElement('a');\n                        a.href = url;\n                        a.download = item.name;\n                        a.click(); a.remove();\n                        cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                    }\n                }\n            })\n        })\n\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"file-card\" style={{cursor: \"pointer\"}} onClick={() => this.props.goBack()}>\n                    <div className=\"file-card-info\">\n                        <img style={{width: \"20px\"}} src=\"/autolycus/icons/up-arrow.svg\"/>\n                        <p className=\"file-card-wrapper file-card-info-size\">Folder Up</p>\n                    </div>\n                </div>\n\n                {this.props.data.children &&\n                this.props.data.children.map((item) => {\n                    return (\n                        <div className=\"file-card\">\n                            <div className=\"file-card-info\">\n                                {item.type === \"directory\" && <img src=\"/autolycus/icons/mac-folder-icon.svg\"/>}\n                                {item.type === \"file\" && <img style={{width:\"32px\"}} src={this.getFileIcon(item.ext)}/>}\n\n                                <div className=\"file-card-wrapper\">\n                                    <p className=\"file-card-info-name\" onClick={() => this.props.updateCard(item, this.props.data)}>{this.trimString(item.name, 30)}</p>\n                                    {item.type === \"file\" && <p className=\"file-card-info-size\">{this.humanFileSize(item.size)}</p>}\n                                </div>\n                            </div>\n\n\n                            <div className=\"torrent-card-menu\">\n                                <div className=\"torrent-card-menu-dot-wrapper\" onClick={(e) => this.handleDotMenu(e, item.name)}>\n                                    <div className=\"torrent-card-menu-dot\" />\n                                    <div className=\"torrent-card-menu-dot\" />\n                                    <div className=\"torrent-card-menu-dot\" />\n                                </div>\n                                {this.state.threeDotMenuVisible === item.name && (\n                                    <div style={{transform: \"translate(0px, \"+this.state.MenuTranslateY+\")\"}} className=\"torrent-card-menu-contents\">\n                                        <div onClick={() => this.handleDownload(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bxs-cloud-download.svg\"/>\n                                            <p>Download</p>\n                                        </div>\n                                        \n                                        <div onClick={() => this.handleDownload(item, true)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-link-alt.svg\"/>\n                                            <p>Copy Link</p>\n                                        </div>\n\n                                        <div className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-edit-alt.svg\"/>\n                                            <p>Rename</p>\n                                        </div>\n\n                                        <div className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-copy-alt.svg\"/>\n                                            <p>Copy</p>\n                                        </div>\n\n                                        <div className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-cut.svg\"/>\n                                            <p>Cut</p>\n                                        </div>\n\n                                        <div className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-paste.svg\"/>\n                                            <p>Paste</p>\n                                        </div>\n\n                                        <div className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-trash.svg\"/>\n                                            <p onClick={this.handleDelete}>Delete</p>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n\n                        </div>\n                    )\n                })}\n            </div>\n        )\n    }\n}\n\nexport default FileCard;","import React, { Component } from 'react';\nimport AddMagnet from \"./AddMagnet\";\nimport TorrentCard from \"./TorrentCard\";\nimport FileCard from \"./FileCard\";\nimport \"../styles/Home.css\";\nimport {getFileDetails} from \"../services/FileService\";\nimport cogoToast from 'cogo-toast';\nimport {getAuthToken} from \"../services/FileService\";\nimport {uri} from \"../../../uri\";\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {card: null, data:null, parent_items: []}\n        this.cardHandler = this.cardHandler.bind(this);\n        this.goBack = this.goBack.bind(this);\n        this.updateCard = this.updateCard.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.tFetcher(true);\n\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        \n        // switch to previous directory when user presses back button in browser\n        window.addEventListener('popstate', () => {\n            // pass when on Home screen\n        }, false)\n    }\n      \n    componentWillUnmount() {\n        this.props.tFetcher(false);\n    }\n\n    cardHandler(card){\n        getFileDetails(card.hash)\n        .then( response => {\n            if (response.ok){\n                response.json().then(json => {\n                    this.setState({card:card, data:json})\n                })\n            }else {\n                cogoToast.error(\"file not found\", {position: \"top-center\", hideAfter: 1});\n            }\n        }).catch( err => {\n            console.log(\"[ERROR] from getFileDetails:\", err)\n        })\n    }\n\n    goBack(){\n        let previous_item = this.state.parent_items.slice(-1)[0];\n        this.setState({data: previous_item, parent_items: this.state.parent_items.filter(i => i !== previous_item)});\n    }\n\n    updateCard(data, previous_item){\n        if (data.type === \"directory\"){\n            this.setState({ data: data, parent_items: this.state.parent_items.concat([previous_item]) })\n        }else {\n            if ([\".mkv\", \".mp4\", \".avi\", \".txt\", \".srt\", \".jpg\", \".mp3\", \".wav\"].includes(data.ext)){\n                let b64 = btoa(unescape(encodeURIComponent(data.path)));\n                let url = uri()+\"/public/\"+b64+\"?token=\"+getAuthToken().access_token\n                var win = window.open(url, '_blank');\n                win.focus();\n            }\n        }\n    }\n\n    render(){\n        if (this.state.data){\n            return (\n                <div style={{scrollBehavior: \"smooth\"}}>\n                    <AddMagnet/>\n                    <FileCard data={this.state.data} key={this.state.data} tFetcher={this.props.tFetcher} goBack={this.goBack} updateCard={this.updateCard}/>\n                </div>\n            )\n        } else {\n            return(\n                <div>\n                    <AddMagnet/>\n                    {this.props.torrents.map((data) => {return <TorrentCard data={data} key={data.name} cardHandler={this.cardHandler}/>})}\n                </div>\n            )\n        }\n    }\n\n}\n\nexport default Home;","import React, { Component } from 'react';\nimport Home from \"./components/Home\";\nimport {AuthLogout} from \"../../services/LoginService\";\n\nfunction Starred(){\n    return(<p>Starred</p>)\n}\n\nfunction RecycleBin(){\n    return(<p>RecycleBin</p>)\n}\n\nfunction Help(){\n    return(<p>Help</p>)\n}\n\nfunction Settings(){\n    return(\n        <div>\n            <p>Settings</p>\n            <button onClick={AuthLogout}>Logout</button>\n        </div>\n    )\n}\n\nclass FileManagerViews extends Component {\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        if (this.props.view === \"Home\"){\n            return (<Home torrents={this.props.torrents} tFetcher={this.props.tFetcher}/>)\n        } else if  (this.props.view === \"Starred\"){\n            return (<Starred/>)\n        } else if (this.props.view === \"RecycleBin\"){\n            return (<RecycleBin/>)\n        } else if (this.props.view === \"Help\"){\n            return (<Help/>)\n        } else if (this.props.view === \"Settings\"){\n            return (<Settings/>)\n        }\n    }\n}\n\nexport default FileManagerViews;","import React, { Component } from 'react';\nimport \"../../styles/FileManager.css\";\nimport FileManagerViews from \"./FileManagerViews\";\nimport { FetchTorrents } from \"./services/TorrentService\";\n\nclass FileManager extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {view: \"Home\", torrents: []};\n        this.username = JSON.parse(localStorage.getItem('autolycus-auth')).username;\n        this.updateView = this.updateView.bind(this);\n\n        this.timer = null;\n        this.updateTorrents = this.updateTorrents.bind(this);\n        this.tFetcher = this.tFetcher.bind(this);\n    }\n\n    tFetcher(fetch=null){\n        if (fetch){\n            this.timer = setInterval(this.updateTorrents, 2000);\n        } else {\n            clearInterval(this.timer);\n        }\n    }\n\n    updateTorrents(){\n        let Fetch = FetchTorrents();\n        if (Fetch){\n            Fetch.then(response => {\n                response.json().then(json => {\n                    this.setState({torrents: json.torrents})\n                })\n            })\n            .catch(err => {\n                console.log(\"[ERROR] in FetchTorrents:\",err);\n            })\n        }\n    }\n\n    updateView(view){\n        this.setState({ view: view});\n        let elements = document.getElementsByClassName(\"left-section-menu-items\");\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            for (var i = 0; i < elements.length; i++) {\n                elements[i].style.backgroundColor=\"transparent\";\n            }\n            document.getElementById(view+\"NavButton\").style.backgroundColor = \"rgb(42 154 245 / 10%)\";\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"container-section\">\n                    <div className=\"left-section\">\n                        <div className=\"left-section-menu\">\n\n                            <div className=\"left-section-logo\">\n                                <img className=\"left-section-logo-icon\" width=\"35px\" src=\"/autolycus/icons/bx-meteor.svg\"/>\n                                <h3 className=\"left-section-logo-text\">Autolycus</h3>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"HomeNavButton\" onClick={() => this.updateView('Home')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-home-alt.svg\"/>\n                                <p style={{backgroundColor: \"none\"}} className=\"left-section-menu-texts\">Home</p>\n                            </div>\n                                \n                            <div className=\"left-section-menu-items\" id=\"StarredNavButton\" onClick={() => this.updateView('Starred')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-star.svg\"/>\n                                <p className=\"left-section-menu-texts\">Starred</p>\n                            </div>\n                                \n                            <div className=\"left-section-menu-items\" id=\"RecycleBinNavButton\" onClick={() => this.updateView('RecycleBin')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-trash.svg\"/>\n                                <p className=\"left-section-menu-texts\">Recycle bin</p>\n                            </div>\n                        \n                            <div className=\"left-section-menu-items\" id=\"HelpNavButton\" onClick={() => this.updateView('Help')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-help-circle.svg\"/>\n                                <p className=\"left-section-menu-texts\">Help</p>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"SettingsNavButton\" onClick={() => this.updateView('Settings')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-slider-alt.svg\"/>\n                                <p className=\"left-section-menu-texts\">Settings</p>\n                            </div>\n\n                            {/* <p>Upgrade</p> */}\n\n                        </div>\n                    </div>\n\n                    <div className=\"middle-section\">\n                        <FileManagerViews username={this.username} view={this.state.view} torrents={this.state.torrents} tFetcher={this.tFetcher}/>\n                    </div>\n                        \n                    <div className=\"right-section\">\n                    <p>File info will appear here</p>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default FileManager;","import React, { Component } from 'react';\nimport { Route } from \"react-router-dom\";\nimport {ValidateAuth, refreshAccessToken} from \"../services/LoginService\";\nimport FileManager from \"../components/FileManager/FileManager\";\nimport ThreeDotLoader from \"../components/ThreeDotLoader\";\nimport Home from './Home';\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, authorized: false};\n      }\n\n    componentDidMount() {\n        // refresh access token every 1 hour\n        ValidateAuth(true, 60*60).then(authorized => {\n            if (authorized === true){\n                    this.setState({ loading: false, authorized: true });\n                } else {\n                    refreshAccessToken().then(authorized => {\n                        if (authorized === true){\n                            this.setState({ loading: false, authorized: true });\n                        } else {\n                            this.setState({ loading: false, authorized: false });\n                        }\n                    })\n                }\n            }\n        )\n    }\n\n    render() {\n        if (this.state.loading){return (<ThreeDotLoader/>)}\n        if (this.state.authorized) {\n            return (\n                <div>\n                    <FileManager />\n                </div>\n            )\n        } else {\n            return (<Route component={Home} />)\n        }\n    }\n\n}\n\nexport default Dashboard;","import React, { Component } from 'react';\nimport cogoToast from 'cogo-toast';\nimport {API_URL, uri} from '../uri';\nimport '../styles/ServerDown.css'\nimport Home from '../views/Home';\n\nclass ConfigureServer extends Component {\n    constructor(props) {\n        super(props);\n        this.timer = null;\n        this.state = {apiDown: true};\n        this.pingAPI = this.pingAPI.bind(this);\n        this.handleConfigureClick = this.handleConfigureClick.bind(this);\n        this.handleReset = this.handleReset.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.findGetParameter = this.findGetParameter.bind(this);\n\n        // forcefully set api address using query parameter\n        let apiParameter = this.findGetParameter('api');\n        if (apiParameter){\n            apiParameter = decodeURIComponent(apiParameter);\n            localStorage.setItem('autolycus-uri', apiParameter)\n            window.location.href = \"/autolycus\";\n        }\n\n    }\n\n    pingAPI(){\n        fetch(uri()+\"/ping\").then( resp => {\n            if (resp.ok){\n                this.setState({apiDown: false});\n            }\n        }).catch(err => {\n            this.setState({apiDown: true});\n        });\n    }\n\n    findGetParameter(q) {\n            return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [, null])[1];\n    }\n\n    componentDidMount() {\n        this.timer = setInterval(this.pingAPI, 1000*10);\n    }\n    \n    componentWillUnmount(){\n        clearInterval(this.timer);\n    }\n\n    handleReset(e){\n        clearInterval(this.timer);\n\n        localStorage.setItem('autolycus-uri', API_URL);\n        let input = document.getElementById('enter-api-address');\n        input.value = API_URL;\n    }\n\n    handleConfigureClick(){\n        let configureBox = document.getElementById('server-down-configure-box');\n        let toggle = document.getElementById('server-down-configure-text');\n        configureBox.style.display = 'block';\n        toggle.style.display = 'none';\n    }\n\n    handleSubmit(){\n        let input = document.getElementById('enter-api-address');\n        if (input.value.startsWith(\"http\")){\n            fetch(input.value+\"/ping\").then( resp => {\n                if (resp.ok){\n                    localStorage.setItem('autolycus-uri', input.value);\n                    this.setState({apiDown: false});\n                }else{\n                    cogoToast.error(\"API address is not reachable\", {position: \"top-center\", hideAfter: 1});\n                }\n            }).catch(err => {\n                cogoToast.error(\"API address is not reachable\", {position: \"top-center\", hideAfter: 1});\n                this.setState({apiDown: true});\n            });\n        }else {\n            cogoToast.error(\"invalid API address\", {position: \"top-center\", hideAfter: 1});\n        }\n\n    }\n\n    render(){\n        if (this.state.apiDown){\n            return (\n                <div className=\"server-down-container\">\n                    <div className=\"server-down\">\n                        <img src=\"/autolycus/icons/server-down.svg\" width=\"30%\"></img>\n                        <h3>Our Server is Feeling a Little Down</h3>\n                        <p>\n                            Please try again in a few moments.<br></br>\n                            We'll be  back up in  no time.\n                        </p>\n                        <div className=\"server-down-configure\" style={{cursor: \"pointer\"}}>\n                            <p id=\"server-down-configure-text\" onClick={this.handleConfigureClick}>Configure API Address</p>\n                            <div className=\"server-down-configure-box\" id=\"server-down-configure-box\" style={{display: 'none'}}>\n                                <input className=\"server-down-configure-input\" type=\"text\" id=\"enter-api-address\" placeholder=\"Enter API Address\" defaultValue={uri()}></input>\n                                <br></br>\n                                <button onClick={this.handleSubmit} className=\"server-down-configure-box-submit\">Submit</button>\n                                <div className=\"server-down-reset-div\">\n                                    <p style={{color: \"#484848\"}}>No idea about this?</p><p onClick={this.handleReset} className=\"server-down-reset-link\">Reset</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }else{\n            // window.location.href = '/';\n            return <Home />\n        }\n    }\n\n}\n\nexport default ConfigureServer;","import React, { Component } from 'react';\nimport {Route} from \"react-router-dom\";\nimport '../styles/Home.css';\nimport Login from '../components/Login'\nimport {ValidateAuth, clearTokens, refreshAccessToken} from \"../services/LoginService\";\nimport ThreeDotLoader from \"../components/ThreeDotLoader\";\nimport Dashboard from \"./Dashboard\";\nimport {uri} from \"../uri\";\nimport ConfigureServer from '../views/ConfigureServer';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, authorized: false, apiDown: false};\n        this.pingAPI = this.pingAPI.bind(this);\n        this.timer = null;\n\n        // forcefully set api address using query parameter\n        let apiParameter = this.findGetParameter('api');\n        if (apiParameter){\n            apiParameter = decodeURIComponent(apiParameter);\n            localStorage.setItem('autolycus-uri', apiParameter)\n            window.location.href = \"/autolycus\";\n        }\n        \n    }\n\n    findGetParameter(q) {\n        return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [, null])[1];\n     }\n\n    pingAPI(){\n        // check if api server is down\n        fetch(uri()+\"/ping\").then( resp => {\n            if (resp.ok){\n                this.setState({apiDown: false});\n            }\n        }).catch(err => {\n            this.setState({apiDown: true});\n        });\n    }\n\n    componentDidMount() {\n        this.pingAPI();\n\n        // get auth from local storage\n        let auth = localStorage.getItem('autolycus-auth');\n        if (!auth){\n            clearTokens();\n        }\n\n        ValidateAuth().then(authorized => {\n            if (authorized === true){\n                    this.setState({ loading: false, authorized: true });\n                } else {\n                    refreshAccessToken().then(authorized => {\n                        if (authorized === true){\n                            this.setState({ loading: false, authorized: true });\n                        } else {\n                            this.setState({ loading: false, authorized: false });\n                        }\n                    })\n                }\n            }\n        )\n    }\n\n    render () {\n        if (this.state.loading){\n            return (<ThreeDotLoader/>)\n        } else if (this.state.authorized) {\n            return (<Route component={Dashboard} />)\n        } else {\n            if (this.state.apiDown){\n                return (<ConfigureServer />)\n            }else{\n                return (\n                    <div>\n                        <div className=\"home-section\">\n                            <div className=\"carousel-section\"></div>\n                            <div className=\"login-section\">\n                                <div className=\"login-form\">\n                                    <Login />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n        }\n\n    }\n}\n\nexport default Home;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from './views/Home';\nimport ConfigureServer from './views/ConfigureServer';\n\nfunction App () {\n    return (\n        <div className=\"app\">\n            <Router basename={process.env.PUBLIC_URL}>\n                <Switch>\n                    <Route exact path=\"/\" component={Home} />\n                </Switch>\n            </ Router>\n        </div>\n    );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}