(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{23:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),s=n.n(i),o=n(17),c=n.n(o),r=(n(32),n(16)),l=n(9),d=n(5),u=n(6),h=n(2),m=n(8),p=n(7),j=(n(33),n(34),n(14)),b=n.n(j),f=n(18),v="http://localhost:5000/api";function g(){var e=localStorage.getItem("autolycus-uri");return e||v}function O(e){return e.ok?e:{status:e.status,message:e.statusText}}function y(){localStorage.setItem("autolycus-auth",void 0)}function x(){var e=localStorage.getItem("autolycus-auth");"undefined"!==e&&(e=JSON.parse(e)),e&&fetch(g()+"/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.access_token},body:JSON.stringify(e)}).then(O).then((function(e){200===e.status&&(y(),window.location.reload(!0))}))}function k(){return w.apply(this,arguments)}function w(){return(w=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("autolycus-auth"),n=!1,"undefined"!==t&&(t=JSON.parse(t)),!t){e.next=6;break}return e.next=6,fetch(g()+"/auth/refresh-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.refresh_token}}).then(O).then((function(e){200===e.status&&e.json().then((function(e){n=!0,t.access_token=e.access_token,localStorage.setItem("autolycus-auth",JSON.stringify(t))}))})).catch((function(e){console.log("[ERROR] in refreshAccessToken:",e)}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(b.a.mark((function e(){var t,n,a,i,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],n=s.length>1&&void 0!==s[1]?s[1]:2,a=localStorage.getItem("autolycus-auth"),i=!1,"undefined"!==a&&(a=JSON.parse(a)),!a){e.next=8;break}return e.next=8,fetch(g()+"/auth/user-details",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.access_token}}).then(O).then((function(e){200===e.status&&(i=!0,t&&window.setInterval(k,1e3*n))})).catch((function(e){console.log("[ERROR] in ValidateAuth:",e)}));case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return e.ok?e:{status:e.status,message:e.statusText}}function N(){return(N=Object(f.a)(b.a.mark((function e(t,n,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g()+"/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,username:t,email:n,password:a})}).then(C).then((function(e){200===e.status&&e.json().then((function(e){localStorage.setItem("autolycus-auth",JSON.stringify(e)),window.location.reload(!0)}))})).catch((function(e){console.log("[ERROR] in AuthSignup",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={username:"",email:"",password:""},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleCreateAccount=a.handleCreateAccount.bind(Object(h.a)(a)),a.validateInputs=a.validateInputs.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){return function(t){var n={};n[e]=t.target.value,this.setState(n)}.bind(this)}},{key:"validateInputs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"1px solid #efefef":"1px solid red";this.state.username||(document.getElementById("login-username-box").style.border=t),this.state.email||(document.getElementById("signup-email-box").style.border=t),this.state.password||(document.getElementById("login-password-box").style.border=t)}},{key:"handleSubmit",value:function(e){this.validateInputs(),"login-account"===e.target.value?this.state.username&&this.state.password&&(function(e){var t=document.getElementById("login-username-box");fetch(g()+"/auth/user-exists?username="+e).then((function(e){200===e.status?t.style.border="1px solid #efefef":t.style.border="1px solid red"})).catch((function(e){console.log("[ERROR] in AuthLogin:",e)}))}(this.state.username),function(e,t){var n=document.getElementById("login-password-box");fetch(g()+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(O).then((function(t){t.json().then((function(a){200===t.status?(n.style.border="1px solid #efefef",a.username=e,localStorage.setItem("autolycus-auth",JSON.stringify(a)),window.location.reload(!0)):(y(),n.style.border="1px solid red")}))})).catch((function(e){y(),n.style.border="1px solid red",console.log("[ERROR] in AuthLogin:",e)}))}(this.state.username,this.state.password)):this.state.username&&this.state.password&&(function(e){var t=document.getElementById("login-username-box");fetch(g()+"/auth/user-exists?username="+e).then(C).then((function(e){200===e.status?t.style.border="1px solid red":t.style.border="1px solid #efefef"})).catch((function(e){console.log("[ERROR] in DoesUserExists:",e)}))}(this.state.username),function(e){var t=document.getElementById("signup-email-box");fetch(g()+"/auth/email-exists?email="+e).then(C).then((function(e){200===e.status?t.style.border="1px solid red":t.style.border="1px solid #efefef"})).catch((function(e){console.log("[ERROR] in DoesEmailExists:",e)}))}(this.state.email),function(e,t,n){N.apply(this,arguments)}(this.state.username,this.state.email,this.state.password))}},{key:"handleCreateAccount",value:function(e){if(this.validateInputs(!0),"create-account-link"===e.target.id){document.getElementById("signup-email-container").style.display="block",document.getElementById("forgot-password-text").style.display="none",document.getElementsByClassName("login-title")[0].innerHTML="Signup",document.getElementById("create-account-text").innerHTML="Already have an account?",document.getElementById("create-account-link").innerHTML="Login";var t=document.getElementById("login-submit-button");t.value="create-account",t.innerHTML="Signup",document.getElementById("create-account-link").id="login-account-link"}else{document.getElementById("signup-email-container").style.display="none",document.getElementById("forgot-password-text").style.display="block",document.getElementsByClassName("login-title")[0].innerHTML="Login",document.getElementById("create-account-text").innerHTML="Don't have an account yet?",document.getElementById("login-account-link").innerHTML="Signup";var n=document.getElementById("login-submit-button");n.value="login-account",n.innerHTML="Login",document.getElementById("login-account-link").id="create-account-link"}}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"login-card",children:[Object(a.jsxs)("div",{className:"login-form",id:"login-form",children:[Object(a.jsx)("p",{className:"login-title",children:"Login"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Username"}),Object(a.jsx)("input",{type:"text",id:"login-username-box",value:this.state.username,onChange:this.handleChange("username"),placeholder:"Username"}),Object(a.jsxs)("div",{id:"signup-email-container",style:{display:"none"},children:[Object(a.jsx)("p",{children:"Email"}),Object(a.jsx)("input",{type:"text",id:"signup-email-box",value:this.state.email,onChange:this.handleChange("email"),placeholder:"Email"})]}),Object(a.jsxs)("div",{className:"password-forgot-combined",children:[Object(a.jsx)("p",{children:"Password"}),Object(a.jsx)("a",{href:"#",id:"forgot-password-text",className:"forgot-password",children:"Forgot password ?"})]}),Object(a.jsx)("input",{type:"password",id:"login-password-box",value:this.state.password,onChange:this.handleChange("password"),placeholder:"Password"}),Object(a.jsx)("button",{type:"submit",value:"login-account",id:"login-submit-button",onClick:this.handleSubmit,className:"login-submit-button",children:"Login"})]}),Object(a.jsxs)("div",{className:"create-account",children:[Object(a.jsx)("p",{id:"create-account-text",children:"Don't have an account yet?"}),Object(a.jsx)("p",{className:"create-account-link",id:"create-account-link",onClick:this.handleCreateAccount,children:"Signup"})]})]})}}]),n}(s.a.Component),A=Object(l.f)(B),D=n(25),E=n.n(D);var M=function(){return Object(a.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",marginLeft:"-20px",marginTop:"-25px"},children:Object(a.jsx)(E.a,{type:"ThreeDots",color:"#e0e0e0",height:50,width:50})})};n(63),n(64);function T(){var e=localStorage.getItem("autolycus-auth");return"undefined"!==e&&(e=JSON.parse(e)),e}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",t=T();return{method:e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.access_token}}}function P(){var e=localStorage.getItem("autolycus-auth");return"undefined"!==e&&(e=JSON.parse(e)),e}function _(e){return fetch(g()+"/torrents/files?hash="+e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",t=P();return{method:e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.access_token}}}("GET"))}function z(e){return fetch(g()+"/public/create",{method:"POST",body:JSON.stringify({file_path:e}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P().access_token}})}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return fetch(g()+"/torrents/files/copy-file",{method:"POST",body:JSON.stringify({from:e,to:t,iscut:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P().access_token}})}var H=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={width:"10px",height:"10px"},a.updatePlayerWidth=a.updatePlayerWidth.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.timer=setInterval(this.updatePlayerWidth,100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"updatePlayerWidth",value:function(){var e=document.getElementById("file-card");e||(e=document.getElementById("torrent-card")),this.state.width!==e.offsetWidth&&this.setState({width:e.offsetWidth})}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"video-player-container",style:{marginBottom:"5px"},children:Object(a.jsx)("video",{id:"video-player",style:{borderRadius:"10px"},width:this.state.width,controls:!0,autoPlay:!0,playsInline:!0,children:Object(a.jsx)("source",{src:this.props.src,type:"video/mp4"})})})}}]),n}(i.Component),L=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleMagnetSubmit=a.handleMagnetSubmit.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleMagnetSubmit",value:function(e){var t=document.getElementById("add-magnet-box");t.value&&function(e,t){var n=T();n&&fetch(g()+"/torrents/add?magnet="+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.access_token}}).then((function(t){var n=document.getElementById(e);if(t.ok){n.value="";var a=n.placeholder;n.placeholder="Magnet Added!",setTimeout((function(){n.placeholder=a}),2e3)}else{n.value="";var i=n.placeholder;n.placeholder="Invalid Magnet!",setTimeout((function(){n.placeholder=i}),2e3)}})).catch((function(e){console.log("[ERROR] in SendMagnet:",e)}))}(t.id,t.value)}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"add-magnet-div",children:[Object(a.jsx)("input",{id:"add-magnet-box",type:"text",placeholder:"Add Magnet Link"}),Object(a.jsx)("img",{className:"add-magnet-icon",src:"/autolycus/icons/bxs-file-plus.svg",onClick:this.handleMagnetSubmit})]}),this.props.videoUrl&&Object(a.jsx)(H,{src:this.props.videoUrl})]})}}]),n}(i.Component),U=(n(23),n(26)),J=(n(65),n(4)),V=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={threeDotMenuVisible:!1,explorerCard:null},a.humanFileSize=a.humanFileSize.bind(Object(h.a)(a)),a.handleDotMenu=a.handleDotMenu.bind(Object(h.a)(a)),a.handleOutsideClick=a.handleOutsideClick.bind(Object(h.a)(a)),a.handleDownload=a.handleDownload.bind(Object(h.a)(a)),a.handleDelete=a.handleDelete.bind(Object(h.a)(a)),a.trimString=a.trimString.bind(Object(h.a)(a)),a.getTorrentSize=a.getTorrentSize.bind(Object(h.a)(a)),a.handlePaste=a.handlePaste.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"humanFileSize",value:function(e){if(!e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}},{key:"handleDotMenu",value:function(){this.state.threeDotMenuVisible?(this.setState({threeDotMenuVisible:!1}),document.removeEventListener("click",this.handleOutsideClick,!1)):(this.setState({threeDotMenuVisible:!0}),document.addEventListener("click",this.handleOutsideClick,!1))}},{key:"handleOutsideClick",value:function(e){this.node.contains(e.target)||this.handleDotMenu()}},{key:"handleDownload",value:function(e){J.a.loading("archiving directory",{position:"top-center"}).then((function(){z(e.download_path).then((function(t){t.json().then((function(n){if(200===t.status){var a=g()+"/public/"+n.public_url_hash;a+="?download=true";var i=document.createElement("a");i.href=a,i.download=e.name,i.click(),i.remove(),J.a.success("download started",{position:"top-center",hideAfter:1})}}))}))}))}},{key:"handleDelete",value:function(){(function(e){if(T())return fetch(g()+"/torrents/remove?hash="+e,R("GET"))})(this.props.data.hash).then((function(e){e.ok&&J.a.success("torrent deleted",{position:"top-center",hideAfter:1})})).catch((function(e){console.log("[ERROR] in DeleteTorrent:",e)}))}},{key:"trimString",value:function(e,t){if(window.innerWidth>=800)return e;var n="";return e.length>t&&(n="..."),e.slice(0,t).trim()+n}},{key:"getTorrentSize",value:function(){return this.props.data.is_finished?this.humanFileSize(this.props.data.total_bytes):this.humanFileSize(this.props.data.downloaded_bytes)+" / "+this.humanFileSize(this.props.data.total_bytes)+" ("+this.humanFileSize(this.props.data.download_speed)+"/s)"}},{key:"handlePaste",value:function(){var e={path:this.props.data.download_path,type:"directory"},t=JSON.parse(window.localStorage.getItem("autolycus_copy_path"));t.item?"directory"===e.type&&e.path!=t.item.path?F(t.item.path,e.path,t.iscut).then((function(e){e.json().then((function(t){200==e.status?(J.a.success("Pasted",{position:"top-center",hideAfter:1}),window.localStorage.removeItem("autolycus_copy_path")):(console.error(t),J.a.error("Unable to paste",{position:"top-center",hideAfter:1}))}))})):J.a.warn("Not allowed",{position:"top-center",hideAfter:1}):J.a.error("Nothing to paste",{position:"top-center",hideAfter:1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"torrent-card",id:"torrent-card",onMouseOver:function(){return e.props.updateActiveItemHover(e.props.data)},onMouseOut:function(){return e.props.updateActiveItemHover()},children:[Object(a.jsxs)("div",{className:"torrent-card-info",onClick:function(){return e.props.cardHandler(e.props.data)},children:[Object(a.jsx)("img",{src:"/autolycus/icons/mac-folder-icon.svg"}),Object(a.jsxs)("div",{className:"torrent-card-wrapper",children:[Object(a.jsx)("p",{className:"torrent-card-info-name",children:this.trimString(this.props.data.name,30)}),!this.props.data.is_finished&&Object(a.jsx)(U.Progress,{percent:this.props.data.progress,status:"active"}),Object(a.jsx)("p",{className:"torrent-card-info-size",children:this.getTorrentSize()})]})]}),Object(a.jsxs)("div",{className:"torrent-card-menu",children:[Object(a.jsxs)("div",{className:"torrent-card-menu-dot-wrapper",ref:function(t){e.node=t},onClick:this.handleDotMenu,children:[Object(a.jsx)("div",{className:"torrent-card-menu-dot"}),Object(a.jsx)("div",{className:"torrent-card-menu-dot"}),Object(a.jsx)("div",{className:"torrent-card-menu-dot"})]}),this.state.threeDotMenuVisible&&Object(a.jsxs)("div",{className:"torrent-card-menu-contents",children:[Object(a.jsxs)("div",{onClick:function(){return e.handleDownload(e.props.data,!0)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bxs-cloud-download.svg"}),Object(a.jsx)("p",{children:"Download"})]}),Object(a.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-link-alt.svg"}),Object(a.jsx)("p",{children:"Copy Link"})]}),Object(a.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-edit-alt.svg"}),Object(a.jsx)("p",{children:"Rename"})]}),Object(a.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-copy-alt.svg"}),Object(a.jsx)("p",{children:"Copy"})]}),Object(a.jsxs)("div",{className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-cut.svg"}),Object(a.jsx)("p",{children:"Cut"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handlePaste()},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-paste.svg"}),Object(a.jsx)("p",{children:"Paste"})]}),Object(a.jsxs)("div",{onClick:this.handleDelete,className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-trash.svg"}),Object(a.jsx)("p",{children:"Delete"})]})]})]})]})}}]),n}(i.Component),W=(n(66),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={data:null,threeDotMenuVisible:"",MenuTranslateY:"0px"},a.humanFileSize=a.humanFileSize.bind(Object(h.a)(a)),a.trimString=a.trimString.bind(Object(h.a)(a)),a.getFileIcon=a.getFileIcon.bind(Object(h.a)(a)),a.handleDotMenu=a.handleDotMenu.bind(Object(h.a)(a)),a.handleOutsideClick=a.handleOutsideClick.bind(Object(h.a)(a)),a.handleDownload=a.handleDownload.bind(Object(h.a)(a)),a.handleCopy=a.handleCopy.bind(Object(h.a)(a)),a.handlePaste=a.handlePaste.bind(Object(h.a)(a)),a.handleDelete=a.handleDelete.bind(Object(h.a)(a)),a.handleRename=a.handleRename.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.tFetcher(!1),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.addEventListener("popstate",(function(){e.props.goBack()}),!1)}},{key:"componentWillUnmount",value:function(){this.props.tFetcher(!0)}},{key:"goBack",value:function(){this.setState({data:null})}},{key:"humanFileSize",value:function(e){if(!e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}},{key:"trimString",value:function(e,t){if(window.innerWidth>=800)return e;var n="";return e.length>t&&(n="..."),e.slice(0,t).trim()+n}},{key:"getFileIcon",value:function(e){return[".mkv",".mp4",".avi"].includes(e)?"/autolycus/icons/video-file-icon.svg":[".txt",".srt",".md",".docx"].includes(e)?"/autolycus/icons/doc-file-icon.svg":[".mp3",".wav"].includes(e)?"/autolycus/icons/music-file-icon.svg":"/autolycus/icons/unknown-file-icon.svg"}},{key:"handleDotMenu",value:function(e,t){var n=window.innerHeight-30,a=220;if(this.state.threeDotMenuVisible)this.setState({threeDotMenuVisible:"",MenuTranslateY:"0px"}),document.removeEventListener("click",this.handleOutsideClick,!1);else{this.setState({threeDotMenuVisible:t}),document.addEventListener("click",this.handleOutsideClick,!1);try{if((a=e.clientY+a)>n){var i=50;window.innerWidth<800&&(i=100),this.setState({MenuTranslateY:n-i-a+"px"})}}catch(s){}}}},{key:"handleOutsideClick",value:function(e){["torrent-card-menu-dot","torrent-card-menu-dot-wrapper"].includes(e.target.className)||this.handleDotMenu()}},{key:"handleCopy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="Item copied";t&&(n="Item cut"),J.a.info(n,{position:"top-center",hideAfter:1}),window.localStorage.setItem("autolycus_copy_path",JSON.stringify({item:e,iscut:t}))}},{key:"handlePaste",value:function(e){var t=this,n=JSON.parse(window.localStorage.getItem("autolycus_copy_path"));n?"directory"===e.type&&e.path!=n.item.path?F(n.item.path,e.path,n.iscut).then((function(a){a.json().then((function(i){200==a.status?(t.props.addItem(e,n.item),J.a.success("Pasted",{position:"top-center",hideAfter:1}),n.iscut&&window.localStorage.removeItem("autolycus_copy_path")):(console.error(i),J.a.error("Unable to paste",{position:"top-center",hideAfter:1}))}))})):J.a.warn("Not allowed",{position:"top-center",hideAfter:1}):J.a.error("Nothing to paste",{position:"top-center",hideAfter:1})}},{key:"handleDownload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"directory"===e.type?J.a.loading("archiving directory",{position:"top-center"}).then((function(){z(e.path).then((function(t){t.json().then((function(n){if(200===t.status){var a=g()+"/public/"+n.public_url_hash;a+="?download=true";var i=document.createElement("a");i.href=a,i.download=e.name,i.click(),i.remove(),J.a.success("download started",{position:"top-center",hideAfter:1})}}))}))})):z(e.path).then((function(n){n.json().then((function(a){if(200===n.status){var i=g()+"/public/"+a.public_url_hash;if(t){var s=document.createElement("textarea");s.value=i,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),J.a.success("copied to clipboard",{position:"top-center",hideAfter:1})}else{i+="?download=true";var o=document.createElement("a");o.href=i,o.download=e.name,o.click(),o.remove(),J.a.success("download started",{position:"top-center",hideAfter:1})}}}))}))}},{key:"handleDelete",value:function(e){var t=this,n=J.a.loading(Object(a.jsxs)("div",{className:"toast-confirmation",children:[Object(a.jsx)("p",{children:"Are you sure ?"}),Object(a.jsx)("button",{style:{backgroundColor:"red"},onClick:function(){return i()},children:"Yes"}),Object(a.jsx)("button",{style:{backgroundColor:"#4CAF50"},onClick:function(){return n()},children:"No"})]}),{hideAfter:0}).hide,i=function(){var a;n(),(a=e.path,fetch(g()+"/torrents/files/delete-file",{method:"DELETE",body:JSON.stringify({path:a}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P().access_token}})).then((function(n){n.json().then((function(a){200===n.status?t.props.removeItem(e):(J.a.error("error occured",{position:"top-center",hideAfter:1}),console.error(a))}))}))}}},{key:"handleRename",value:function(e){var t=this,n=J.a.loading(Object(a.jsxs)("div",{className:"toast-confirmation",children:[Object(a.jsx)("p",{style:{paddingBottom:"1px"},children:"Rename"}),Object(a.jsx)("input",{type:"text",id:"toast-rename-box",onFocus:function(e){e.target.select()},placeholder:"Enter new name",defaultValue:e.name}),Object(a.jsx)("button",{style:{backgroundColor:"#1b53f4"},onClick:function(){return i()},children:"Confirm"}),Object(a.jsx)("button",{style:{backgroundColor:"#4CAF50"},onClick:function(){return n()},children:"Cancel"})]}),{hideAfter:0}).hide,i=function(){var a=document.getElementById("toast-rename-box");a.value&&a.value!==e.name&&(function(e,t){return fetch(g()+"/torrents/files/rename-file",{method:"POST",body:JSON.stringify({path:e,newname:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P().access_token}})}(e.path,a.value).then((function(n){n.json().then((function(i){200===n.status?(e.name=a.value,t.props.renameItem(e,a.value)):console.error(i)}))})),n())}}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"file-card",style:{cursor:"pointer"},onClick:function(){return e.props.goBack()},children:Object(a.jsxs)("div",{className:"file-card-info",children:[Object(a.jsx)("img",{style:{width:"20px"},src:"/autolycus/icons/up-arrow.svg"}),Object(a.jsx)("p",{className:"file-card-wrapper file-card-info-size",children:"Folder Up"})]})}),this.props.data.children&&this.props.data.children.map((function(t){return Object(a.jsxs)("div",{className:"file-card",id:"file-card",children:[Object(a.jsxs)("div",{className:"file-card-info",children:["directory"===t.type&&Object(a.jsx)("img",{src:"/autolycus/icons/mac-folder-icon.svg"}),"file"===t.type&&Object(a.jsx)("img",{style:{width:"32px"},src:e.getFileIcon(t.ext)}),Object(a.jsxs)("div",{className:"file-card-wrapper",children:[Object(a.jsx)("p",{className:"file-card-info-name",onClick:function(){return e.props.updateCard(t,e.props.data)},children:e.trimString(t.name,30)}),"file"===t.type&&Object(a.jsx)("p",{className:"file-card-info-size",children:e.humanFileSize(t.size)})]})]}),Object(a.jsxs)("div",{className:"torrent-card-menu",children:[Object(a.jsxs)("div",{className:"torrent-card-menu-dot-wrapper",onClick:function(n){return e.handleDotMenu(n,t.name)},children:[Object(a.jsx)("div",{className:"torrent-card-menu-dot"}),Object(a.jsx)("div",{className:"torrent-card-menu-dot"}),Object(a.jsx)("div",{className:"torrent-card-menu-dot"})]}),e.state.threeDotMenuVisible===t.name&&Object(a.jsxs)("div",{style:{transform:"translate(0px, "+e.state.MenuTranslateY+")"},className:"torrent-card-menu-contents",children:[Object(a.jsxs)("div",{onClick:function(){return e.handleDownload(t)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bxs-cloud-download.svg"}),Object(a.jsx)("p",{children:"Download"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handleDownload(t,!0)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-link-alt.svg"}),Object(a.jsx)("p",{children:"Copy Link"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handleRename(t)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-edit-alt.svg"}),Object(a.jsx)("p",{children:"Rename"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handleCopy(t)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-copy-alt.svg"}),Object(a.jsx)("p",{children:"Copy"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handleCopy(t,!0)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-cut.svg"}),Object(a.jsx)("p",{children:"Cut"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handlePaste(t)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-paste.svg"}),Object(a.jsx)("p",{children:"Paste"})]}),Object(a.jsxs)("div",{onClick:function(){return e.handleDelete(t)},className:"torrent-card-menu-contents-items",children:[Object(a.jsx)("img",{src:"/autolycus/icons/bx-trash.svg"}),Object(a.jsx)("p",{children:"Delete"})]})]})]})]})}))]})}}]),n}(i.Component)),G=(n(67),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={card:null,data:null,parent_items:[],videoUrl:null},a.cardHandler=a.cardHandler.bind(Object(h.a)(a)),a.goBack=a.goBack.bind(Object(h.a)(a)),a.updateCard=a.updateCard.bind(Object(h.a)(a)),a.removeItem=a.removeItem.bind(Object(h.a)(a)),a.addItem=a.addItem.bind(Object(h.a)(a)),a.renameItem=a.renameItem.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.tFetcher(!0),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.history.pushState({name:"browserBack"},"on browser back click",window.location.href),window.addEventListener("popstate",(function(){}),!1)}},{key:"componentWillUnmount",value:function(){this.props.tFetcher(!1)}},{key:"cardHandler",value:function(e){var t=this;_(e.hash).then((function(n){n.ok?n.json().then((function(n){t.setState({card:e,data:n})})):J.a.error("file not found",{position:"top-center",hideAfter:1})})).catch((function(e){console.log("[ERROR] from getFileDetails:",e)}))}},{key:"goBack",value:function(){var e=this.state.parent_items.slice(-1)[0];this.setState({data:e,parent_items:this.state.parent_items.filter((function(t){return t!==e}))})}},{key:"updateCard",value:function(e,t){if("directory"===e.type)this.setState({data:e,parent_items:this.state.parent_items.concat([t])});else{var n=btoa(unescape(encodeURIComponent(e.path))),a=g()+"/public/"+n+"?token="+P().access_token;if([".mkv",".mp4",".avi"].includes(e.ext))this.setState({videoUrl:a});else if([".txt",".srt",".jpg",".mp3",".wav"].includes(e.ext)){window.open(a,"_blank").focus()}}}},{key:"removeItem",value:function(e){var t=this.state.data.children.filter((function(t){return t.path!==e.path})),n=this.state.data;n.children=t,this.setState({data:n})}},{key:"addItem",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";return function(a){if("none"===a)a=n.state.data;if(a.children)for(var i=0;i<a.children.length;i++){var s=a.children[i];if("directory"===s.type&&n.addItem(e,t,s),e.path===s.path){var o=e.path.split("/"),c=o.slice(0,o.length).join("/")+"/"+t.name;t.path=c;for(var r=0;r<e.children.length;r++){e.children[r].name!==t.name&&e.children.push(t)}}}}(a)}},{key:"renameItem",value:function(e,t){var n=e.path.split("/"),a=n.slice(0,n.length-1).join("/")+"/"+t;e.name=t,e.path=a}},{key:"render",value:function(){var e=this;return this.state.data?Object(a.jsxs)("div",{style:{scrollBehavior:"smooth"},children:[Object(a.jsx)(L,{videoUrl:this.state.videoUrl}),Object(a.jsx)(W,{data:this.state.data,updateActiveItemHover:this.props.updateActiveItemHover,removeItem:this.removeItem,addItem:this.addItem,renameItem:this.renameItem,tFetcher:this.props.tFetcher,goBack:this.goBack,updateCard:this.updateCard},this.state.data)]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(L,{videoUrl:this.state.videoUrl}),this.props.torrents.map((function(t){return Object(a.jsx)(V,{data:t,updateActiveItemHover:e.props.updateActiveItemHover,cardHandler:e.cardHandler},t.name)}))]})}}]),n}(i.Component));function Y(){return Object(a.jsx)("p",{children:"Starred"})}function q(){return Object(a.jsx)("p",{children:"RecycleBin"})}function K(){return Object(a.jsx)("p",{children:"Help"})}function Q(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Settings"}),Object(a.jsx)("button",{onClick:x,children:"Logout"})]})}var X=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return"Home"===this.props.view?Object(a.jsx)(G,{torrents:this.props.torrents,updateActiveItemHover:this.props.updateActiveItemHover,tFetcher:this.props.tFetcher}):"Starred"===this.props.view?Object(a.jsx)(Y,{}):"RecycleBin"===this.props.view?Object(a.jsx)(q,{}):"Help"===this.props.view?Object(a.jsx)(K,{}):"Settings"===this.props.view?Object(a.jsx)(Q,{}):void 0}}]),n}(i.Component),Z=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).humanDate=a.humanDate.bind(Object(h.a)(a)),a.humanFileSize=a.humanFileSize.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"humanDate",value:function(e){var t=new Date(1e3*e);return t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+", "+function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"PM":"AM";return(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a}(t)}},{key:"humanFileSize",value:function(e){if(!e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}},{key:"render",value:function(){return this.props.activeItem.name?Object(a.jsxs)("div",{children:[Object(a.jsx)("h5",{children:"Name"}),Object(a.jsx)("p",{children:this.props.activeItem.name}),Object(a.jsx)("h5",{children:"Magnet"}),Object(a.jsx)("p",{children:this.props.activeItem.magnet}),Object(a.jsx)("h5",{children:"Created"}),Object(a.jsx)("p",{children:this.humanDate(this.props.activeItem.added_time)}),Object(a.jsx)("h5",{children:"Size"}),Object(a.jsx)("p",{children:this.humanFileSize(this.props.activeItem.downloaded_bytes)})]}):Object(a.jsx)("p",{children:"File info will appear here"})}}]),n}(i.Component),$=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={view:"Home",torrents:[],activeItem:{}},a.username=JSON.parse(localStorage.getItem("autolycus-auth")).username,a.updateView=a.updateView.bind(Object(h.a)(a)),a.timer=null,a.updateTorrents=a.updateTorrents.bind(Object(h.a)(a)),a.tFetcher=a.tFetcher.bind(Object(h.a)(a)),a.updateActiveItemHover=a.updateActiveItemHover.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"tFetcher",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.timer=setInterval(this.updateTorrents,2e3):clearInterval(this.timer)}},{key:"updateTorrents",value:function(){var e=this,t=function(){if(T())return fetch(g()+"/torrents/status",R("GET"))}();t&&t.then((function(t){t.json().then((function(t){e.setState({torrents:t.torrents})}))})).catch((function(e){console.log("[ERROR] in FetchTorrents:",e)}))}},{key:"updateView",value:function(e){this.setState({view:e});var t=document.getElementsByClassName("left-section-menu-items");if(window.innerWidth>=800){for(var n=0;n<t.length;n++)t[n].style.backgroundColor="transparent";document.getElementById(e+"NavButton").style.backgroundColor="rgb(42 154 245 / 10%)"}}},{key:"updateActiveItemHover",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.setState({activeItem:e}):this.setState({activeItem:{}})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"container-section",children:[Object(a.jsx)("div",{className:"left-section",children:Object(a.jsxs)("div",{className:"left-section-menu",children:[Object(a.jsxs)("div",{className:"left-section-logo",children:[Object(a.jsx)("img",{className:"left-section-logo-icon",width:"35px",src:"/autolycus/icons/bx-meteor.svg"}),Object(a.jsx)("h3",{className:"left-section-logo-text",children:"Autolycus"})]}),Object(a.jsxs)("div",{className:"left-section-menu-items",id:"HomeNavButton",onClick:function(){return e.updateView("Home")},children:[Object(a.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-home-alt.svg"}),Object(a.jsx)("p",{style:{backgroundColor:"none"},className:"left-section-menu-texts",children:"Home"})]}),Object(a.jsxs)("div",{className:"left-section-menu-items",id:"StarredNavButton",onClick:function(){return e.updateView("Starred")},children:[Object(a.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-star.svg"}),Object(a.jsx)("p",{className:"left-section-menu-texts",children:"Starred"})]}),Object(a.jsxs)("div",{className:"left-section-menu-items",id:"RecycleBinNavButton",onClick:function(){return e.updateView("RecycleBin")},children:[Object(a.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-trash.svg"}),Object(a.jsx)("p",{className:"left-section-menu-texts",children:"Recycle bin"})]}),Object(a.jsxs)("div",{className:"left-section-menu-items",id:"HelpNavButton",onClick:function(){return e.updateView("Help")},children:[Object(a.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-help-circle.svg"}),Object(a.jsx)("p",{className:"left-section-menu-texts",children:"Help"})]}),Object(a.jsxs)("div",{className:"left-section-menu-items",id:"SettingsNavButton",onClick:function(){return e.updateView("Settings")},children:[Object(a.jsx)("img",{className:"left-section-menu-/autolycus/icons",src:"/autolycus/icons/bx-slider-alt.svg"}),Object(a.jsx)("p",{className:"left-section-menu-texts",children:"Settings"})]})]})}),Object(a.jsx)("div",{className:"middle-section",id:"middle-section",children:Object(a.jsx)(X,{username:this.username,updateActiveItemHover:this.updateActiveItemHover,view:this.state.view,torrents:this.state.torrents,tFetcher:this.tFetcher})}),Object(a.jsx)("div",{className:"right-section",children:Object(a.jsx)(Z,{activeItem:this.state.activeItem})})]})})}}]),n}(i.Component),ee=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={loading:!0,authorized:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;S(!0,3600).then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):k().then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):e.setState({loading:!1,authorized:!1})}))}))}},{key:"render",value:function(){return this.state.loading?Object(a.jsx)(M,{}):this.state.authorized?Object(a.jsx)("div",{children:Object(a.jsx)($,{})}):Object(a.jsx)(l.a,{component:ne})}}]),n}(i.Component),te=(n(68),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).timer=null,a.state={apiDown:!0},a.pingAPI=a.pingAPI.bind(Object(h.a)(a)),a.handleConfigureClick=a.handleConfigureClick.bind(Object(h.a)(a)),a.handleReset=a.handleReset.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.findGetParameter=a.findGetParameter.bind(Object(h.a)(a));var i=a.findGetParameter("api");return i&&(i=decodeURIComponent(i),localStorage.setItem("autolycus-uri",i),window.location.href=window.location.origin),a}return Object(u.a)(n,[{key:"pingAPI",value:function(){var e=this;fetch(g()+"/ping").then((function(t){t.ok&&e.setState({apiDown:!1})})).catch((function(t){e.setState({apiDown:!0})}))}},{key:"findGetParameter",value:function(e){return(window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)"))||[,null])[1]}},{key:"componentDidMount",value:function(){this.timer=setInterval(this.pingAPI,1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"handleReset",value:function(e){clearInterval(this.timer),localStorage.setItem("autolycus-uri",v),document.getElementById("enter-api-address").value=v}},{key:"handleConfigureClick",value:function(){var e=document.getElementById("server-down-configure-box"),t=document.getElementById("server-down-configure-text");e.style.display="block",t.style.display="none"}},{key:"handleSubmit",value:function(){var e=this,t=document.getElementById("enter-api-address");t.value.startsWith("http")?fetch(t.value+"/ping").then((function(n){n.ok?(localStorage.setItem("autolycus-uri",t.value),e.setState({apiDown:!1})):J.a.error("API address is not reachable",{position:"top-center",hideAfter:1})})).catch((function(t){J.a.error("API address is not reachable",{position:"top-center",hideAfter:1}),e.setState({apiDown:!0})})):J.a.error("invalid API address",{position:"top-center",hideAfter:1})}},{key:"render",value:function(){return this.state.apiDown?Object(a.jsx)("div",{className:"server-down-container",children:Object(a.jsxs)("div",{className:"server-down",children:[Object(a.jsx)("img",{src:"/autolycus/icons/server-down.svg",width:"30%"}),Object(a.jsx)("h3",{children:"Our Server is Feeling a Little Down"}),Object(a.jsxs)("p",{children:["Please try again in a few moments.",Object(a.jsx)("br",{}),"We'll be  back up in  no time."]}),Object(a.jsxs)("div",{className:"server-down-configure",style:{cursor:"pointer"},children:[Object(a.jsx)("p",{id:"server-down-configure-text",onClick:this.handleConfigureClick,children:"Configure API Address"}),Object(a.jsxs)("div",{className:"server-down-configure-box",id:"server-down-configure-box",style:{display:"none"},children:[Object(a.jsx)("input",{className:"server-down-configure-input",type:"text",id:"enter-api-address",placeholder:"Enter API Address",defaultValue:g()}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:this.handleSubmit,className:"server-down-configure-box-submit",children:"Submit"}),Object(a.jsxs)("div",{className:"server-down-reset-div",children:[Object(a.jsx)("p",{style:{color:"#484848"},children:"No idea about this?"}),Object(a.jsx)("p",{onClick:this.handleReset,className:"server-down-reset-link",children:"Reset"})]})]})]})]})}):Object(a.jsx)(ne,{})}}]),n}(i.Component)),ne=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).state={loading:!0,authorized:!1,apiDown:!1},a.pingAPI=a.pingAPI.bind(Object(h.a)(a)),a.timer=null;var i=a.findGetParameter("api");return i&&(i=decodeURIComponent(i),localStorage.setItem("autolycus-uri",i),window.location.href=window.location.origin),a}return Object(u.a)(n,[{key:"findGetParameter",value:function(e){return(window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)"))||[,null])[1]}},{key:"pingAPI",value:function(){var e=this;fetch(g()+"/ping").then((function(t){t.ok&&e.setState({apiDown:!1})})).catch((function(t){e.setState({apiDown:!0})}))}},{key:"componentDidMount",value:function(){var e=this;this.pingAPI(),localStorage.getItem("autolycus-auth")||y(),S().then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):k().then((function(t){!0===t?e.setState({loading:!1,authorized:!0}):e.setState({loading:!1,authorized:!1})}))}))}},{key:"render",value:function(){return this.state.loading?Object(a.jsx)(M,{}):this.state.authorized?Object(a.jsx)(l.a,{component:ee}):this.state.apiDown?Object(a.jsx)(te,{}):Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"home-section",children:[Object(a.jsx)("div",{className:"carousel-section"}),Object(a.jsx)("div",{className:"login-section",children:Object(a.jsx)("div",{className:"login-form",children:Object(a.jsx)(A,{})})})]})})}}]),n}(i.Component);function ae(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(r.a,{basename:"/autolycus",children:Object(a.jsx)(l.c,{children:Object(a.jsx)(l.a,{exact:!0,path:"/",component:ne})})})})}c.a.render(Object(a.jsx)(ae,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.90867616.chunk.js.map