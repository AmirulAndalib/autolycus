{"version":3,"sources":["uri.js","services/LoginService.js","services/SignupService.js","components/Login.js","components/ThreeDotLoader.js","components/FileManager/services/TorrentService.js","components/FileManager/services/FileService.js","components/VideoPlayer.js","components/FileManager/components/AddMagnet.js","components/FileManager/components/TorrentCard.js","components/FileManager/components/FileCard.js","components/FileManager/components/Home.js","components/FileManager/FileManagerViews.js","components/FileManager/FileManagerInfo.js","components/FileManager/FileManager.js","views/Dashboard.js","views/ConfigureServer.js","views/Home.js","index.js"],"names":["API_URL","uri","localStorage","getItem","handleErrors","response","ok","status","message","statusText","clearTokens","setItem","undefined","AuthLogout","auth","JSON","parse","fetch","method","headers","access_token","body","stringify","then","window","location","reload","refreshAccessToken","a","authorized","refresh_token","json","catch","err","console","log","ValidateAuth","auto_refresh","interval","setInterval","username","email","password","name","Login","props","state","handleChange","bind","handleSubmit","handleCreateAccount","validateInputs","key","e","target","value","this","setState","reset","color","document","getElementById","style","border","usernamebox","ValidateUsername","password_box","AuthLogin","DoesUserExists","emailbox","DoesEmailExists","AuthSignup","id","display","getElementsByClassName","innerHTML","button","className","type","onChange","placeholder","href","onClick","React","Component","withRouter","ThreeDotLoader","position","top","left","marginLeft","marginTop","height","width","getAuthToken","getAuthHeader","getFileDetails","Hash","downloadFileUrl","path","file_path","copyFile","from","to","iscut","VideoPlayer","updatePlayerWidth","timer","clearInterval","offsetWidth","marginBottom","borderRadius","controls","autoPlay","playsInline","src","AddMagnet","handleMagnetSubmit","inputBox","element_id","magnet","element","setTimeout","SendMagnet","videoUrl","TorrentCard","threeDotMenuVisible","explorerCard","humanFileSize","handleDotMenu","handleOutsideClick","handleDownload","handleDelete","trimString","getTorrentSize","handlePaste","size","i","Math","floor","pow","toFixed","removeEventListener","addEventListener","node","contains","item","cogoToast","loading","download_path","url","public_url_hash","createElement","download","click","remove","success","hideAfter","DeleteTorrent","data","hash","string","length","innerWidth","postfix","slice","trim","is_finished","total_bytes","downloaded_bytes","download_speed","removeItem","error","warn","onMouseOver","updateActiveItemHover","onMouseOut","cardHandler","percent","progress","ref","FileCard","MenuTranslateY","getFileIcon","handleCopy","handleRename","tFetcher","history","pushState","goBack","ext","includes","windowH","innerHeight","menuH","clientY","adjust","info","addItem","copyLink","el","appendChild","select","execCommand","removeChild","hide","backgroundColor","confirmDelete","paddingBottom","onFocus","defaultValue","confirmRename","newname","renameFile","renameItem","cursor","children","map","updateCard","transform","Home","card","parent_items","previous_item","filter","concat","b64","btoa","unescape","encodeURIComponent","open","focus","parent","child","s","split","newpath","join","j","push","scrollBehavior","torrents","Starred","RecycleBin","Help","Settings","FileManagerViews","view","FileManagerInfo","humanDate","unixTimestamp","dateObject","Date","toLocaleDateString","weekday","year","month","day","date","hours","getHours","minutes","getMinutes","ampm","formatAMPM","activeItem","added_time","FileManager","updateView","updateTorrents","Fetch","FetchTorrents","elements","Dashboard","component","ConfigureServer","apiDown","pingAPI","handleConfigureClick","handleReset","findGetParameter","apiParameter","decodeURIComponent","origin","resp","q","search","match","RegExp","configureBox","toggle","input","startsWith","App","basename","process","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.90867616.chunk.js","sourcesContent":["let API_URL = 'http://localhost:5000/api'\n\nfunction uri(){\n    let uri = localStorage.getItem('autolycus-uri');\n    if (uri){\n        return uri;\n    } else {\n        return API_URL;\n    }\n}\n\nexport {\n    API_URL,\n    uri\n}","import {uri} from '../uri';\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        return {status: response.status, message: response.statusText};\n    }\n    return response;\n}\n\nfunction clearTokens(){\n    localStorage.setItem('autolycus-auth', undefined);\n}\n\nfunction AuthLogin(username, password) {\n    let password_box = document.getElementById(\"login-password-box\");\n    fetch(uri()+\"/auth/login\", {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ username: username, password: password })\n        })\n        .then(handleErrors)\n        .then(response => {\n            response.json().then(json => {\n                if (response.status === 200){\n                    // console.log(\"success json\", json);\n                    password_box.style.border = \"1px solid #efefef\";\n                    json[\"username\"] = username;\n                    localStorage.setItem('autolycus-auth', JSON.stringify(json));\n                    window.location.reload(true);\n                    // var retrievedObject = localStorage.getItem('autolycus-auth');\n                    // console.log('retrievedObject: ', JSON.parse(retrievedObject));\n                } else {\n                    clearTokens();\n                    password_box.style.border = \"1px solid red\";\n                };\n            });\n        }).catch(err => {\n            clearTokens();\n            password_box.style.border = \"1px solid red\";\n            console.log(\"[ERROR] in AuthLogin:\", err);\n        });\n    };\n\nfunction AuthLogout(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n\n    if (auth){\n        fetch(uri()+\"/auth/logout\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            },\n            body: JSON.stringify(auth)\n        })\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                clearTokens();\n                window.location.reload(true);\n            }\n        })\n    }\n}\n\nfunction ValidateUsername(username){\n    let usernamebox = document.getElementById(\"login-username-box\");\n    return fetch(uri()+\"/auth/user-exists?username=\"+username)\n        // .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                usernamebox.style.border = \"1px solid #efefef\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                usernamebox.style.border = \"1px solid red\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in AuthLogin:\", err);\n        });\n    }\n\n\nasync function refreshAccessToken() {\n        let auth = localStorage.getItem('autolycus-auth');\n        let authorized = false;\n    \n        if (auth !== \"undefined\"){\n            auth = JSON.parse(auth)\n        }\n\n        if (auth){\n            // try to get new access token using refresh token\n            await fetch(uri()+\"/auth/refresh-token\", {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + auth.refresh_token\n                }\n            })\n            .then(handleErrors)\n            .then(response => {\n                if (response.status === 200){\n                    response.json()\n                    .then(response => {\n                        authorized = true;\n                        // console.log(\"access token refreshed\")\n                        auth.access_token = response.access_token;\n                        localStorage.setItem('autolycus-auth', JSON.stringify(auth));\n                    })\n                }\n            }).catch(err => {\n                console.log(\"[ERROR] in refreshAccessToken:\",err)\n            })\n        }\n\n        return authorized;\n    }\n\nasync function ValidateAuth (auto_refresh=false, interval=2) {\n    let auth = localStorage.getItem('autolycus-auth');\n    let authorized = false;\n\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n\n    if (auth){\n        await fetch(uri()+\"/auth/user-details\", {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            }\n        })\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                authorized = true;\n                if (auto_refresh){\n                    window.setInterval(refreshAccessToken, 1000*interval);\n                }\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in ValidateAuth:\", err)\n        })\n    }\n\n    return authorized;\n}\n\nexport {\n    AuthLogin,\n    ValidateUsername,\n    ValidateAuth,\n    refreshAccessToken,\n    clearTokens,\n    AuthLogout\n}","import {uri} from \"../uri\";\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        return {status: response.status, message: response.statusText};\n    }\n    return response;\n}\n\nfunction DoesUserExists(username){\n    let usernamebox = document.getElementById(\"login-username-box\");\n\n    return fetch(uri()+\"/auth/user-exists?username=\"+username)\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                usernamebox.style.border = \"1px solid red\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                usernamebox.style.border = \"1px solid #efefef\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in DoesUserExists:\", err);\n        });\n    }\n\nfunction DoesEmailExists(email){\n    let emailbox = document.getElementById(\"signup-email-box\");\n\n    return fetch(uri()+\"/auth/email-exists?email=\"+email)\n        .then(handleErrors)\n        .then(response => {\n            if (response.status === 200){\n                // console.log(\"user \"+username+\" exists\");\n                emailbox.style.border = \"1px solid red\";\n            } else {\n                // console.error(\"user \"+username+\" doesn't exists\");\n                emailbox.style.border = \"1px solid #efefef\";\n            }\n        }).catch(err => {\n            console.log(\"[ERROR] in DoesEmailExists:\", err);\n        });\n}\n\nasync function AuthSignup(username, email, password) {\n    await fetch(uri()+\"/auth/signup\", {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({name: username, username: username, email: email, password: password})\n    })\n    .then(handleErrors)\n    .then(response => {\n        if (response.status === 200){\n            response.json().then( json => {\n                localStorage.setItem('autolycus-auth', JSON.stringify(json));\n                window.location.reload(true);\n            })\n        }\n    }).catch(err => {\n        console.log(\"[ERROR] in AuthSignup\", err)\n    })\n}\n\nexport {\n    DoesUserExists,\n    DoesEmailExists,\n    AuthSignup\n}","import React, { Component } from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport '../styles/Login.css';\nimport {AuthLogin, ValidateUsername, clearTokens} from '../services/LoginService';\nimport { DoesUserExists, DoesEmailExists, AuthSignup } from '../services/SignupService';\nimport {uri} from \"../uri\";\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {username: '', email:'', password: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleCreateAccount = this.handleCreateAccount.bind(this);\n        this.validateInputs = this.validateInputs.bind(this);\n    }\n\n    handleChange(key) {\n        return function (e) {\n          var state = {};\n          state[key] = e.target.value;\n          this.setState(state);\n        }.bind(this);\n    }\n\n    validateInputs(reset=false){\n        let color = reset ? \"1px solid #efefef\":\"1px solid red\";\n        if (!this.state.username){\n            document.getElementById(\"login-username-box\").style.border = color;\n        }\n        if (!this.state.email){\n            document.getElementById(\"signup-email-box\").style.border = color;\n        }\n        if (!this.state.password){\n            document.getElementById(\"login-password-box\").style.border = color;\n        }\n    }\n\n    handleSubmit(e) {\n        this.validateInputs()\n    \n        if (e.target.value === \"login-account\"){\n            if (this.state.username && this.state.password){\n                ValidateUsername(this.state.username);\n                AuthLogin(this.state.username, this.state.password);\n            }\n        } else{\n            if (this.state.username && this.state.password){\n                DoesUserExists(this.state.username)\n                DoesEmailExists(this.state.email)\n                AuthSignup(this.state.username, this.state.email, this.state.password)\n            }\n        }\n        \n    }\n\n    handleCreateAccount(e){\n        this.validateInputs(true);\n        \n        if (e.target.id === \"create-account-link\"){\n            document.getElementById(\"signup-email-container\").style.display = \"block\";\n            document.getElementById(\"forgot-password-text\").style.display = \"none\";\n            document.getElementsByClassName(\"login-title\")[0].innerHTML = \"Signup\";\n            document.getElementById(\"create-account-text\").innerHTML = \"Already have an account?\";\n            document.getElementById(\"create-account-link\").innerHTML = \"Login\";\n            let button = document.getElementById(\"login-submit-button\");\n            button.value = \"create-account\"; button.innerHTML = \"Signup\";\n            document.getElementById(\"create-account-link\").id = \"login-account-link\";\n        } else {\n            document.getElementById(\"signup-email-container\").style.display = \"none\";\n            document.getElementById(\"forgot-password-text\").style.display = \"block\";\n            document.getElementsByClassName(\"login-title\")[0].innerHTML = \"Login\";\n            document.getElementById(\"create-account-text\").innerHTML = \"Don't have an account yet?\"\n            document.getElementById(\"login-account-link\").innerHTML = \"Signup\"\n            let button = document.getElementById(\"login-submit-button\");\n            button.value = \"login-account\"; button.innerHTML = \"Login\";\n            document.getElementById(\"login-account-link\").id = \"create-account-link\";\n        }\n    }\n\n    render () {\n        return (\n            <div className='login-card'>\n                <div className=\"login-form\"  id=\"login-form\">\n                    <p className=\"login-title\">Login</p>\n                    <br></br>\n                    <p>Username</p>\n                    <input type=\"text\" id=\"login-username-box\" value={this.state.username} onChange={this.handleChange('username')} placeholder=\"Username\" />\n                    \n                    <div id=\"signup-email-container\" style={{display: \"none\"}}>\n                        <p>Email</p>\n                        <input type=\"text\" id=\"signup-email-box\" value={this.state.email} onChange={this.handleChange('email')} placeholder=\"Email\" />\n                    </div>\n                    \n                    <div className=\"password-forgot-combined\">\n                        <p>Password</p>\n                        <a href=\"#\" id=\"forgot-password-text\" className=\"forgot-password\">Forgot password ?</a>\n                    </div>\n\n                    <input type=\"password\" id=\"login-password-box\"value={this.state.password} onChange={this.handleChange('password')} placeholder=\"Password\"></input>\n                    <button type=\"submit\" value=\"login-account\" id=\"login-submit-button\" onClick={this.handleSubmit} className=\"login-submit-button\">Login</button>\n                </div>\n\n                <div className=\"create-account\">\n                    <p id=\"create-account-text\">Don't have an account yet?</p>\n                    <p className=\"create-account-link\" id=\"create-account-link\" onClick={this.handleCreateAccount}>Signup</p>\n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import Loader from 'react-loader-spinner';\n\nfunction ThreeDotLoader() {\n    return (\n        <div style={{position: \"fixed\", top: \"50%\", left: \"50%\", marginLeft: \"-20px\", marginTop: \"-25px\"}}>\n            <Loader\n            type=\"ThreeDots\"\n            color=\"#e0e0e0\"\n            height={50}\n            width={50}        \n            />\n        </div>\n    )\n}\n\nexport default ThreeDotLoader;","import {uri} from \"../../../uri\";\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\n\nfunction SendMagnet(element_id, magnet){\n    let auth = getAuthToken();\n\n    if (auth){\n        fetch(uri()+\"/torrents/add?magnet=\"+magnet, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + auth.access_token\n            }\n        })\n        .then(response => {\n            let element = document.getElementById(element_id);\n\n            if (response.ok){    \n                element.value = \"\";\n                let placeholder = element.placeholder;\n                element.placeholder = \"Magnet Added!\";\n\n                setTimeout(() => {\n                    element.placeholder = placeholder;\n                }, 2000);\n\n            } else {\n                element.value = \"\";\n                let placeholder = element.placeholder;\n                element.placeholder = \"Invalid Magnet!\";\n\n                setTimeout(() => {\n                    element.placeholder = placeholder;\n                }, 2000);\n            }\n        })\n        .catch(err => {\n            console.log(\"[ERROR] in SendMagnet:\", err)\n        })\n    }\n}\n\nfunction FetchTorrents(){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/status\", getAuthHeader(\"GET\"))\n    }\n    \n}\n\nfunction DeleteTorrent(Hash){\n    let auth = getAuthToken();\n    if (auth){\n        return fetch(uri()+\"/torrents/remove?hash=\"+Hash, getAuthHeader(\"GET\"))\n    }\n    \n}\n\nexport {\n    SendMagnet,\n    FetchTorrents,\n    DeleteTorrent\n};","import {uri} from \"../../../uri\";\n\nfunction getAuthToken(){\n    let auth = localStorage.getItem('autolycus-auth');\n    if (auth !== \"undefined\"){\n        auth = JSON.parse(auth)\n    }\n    return auth;\n}\n\nfunction getAuthHeader(method=\"POST\"){\n    let auth = getAuthToken();\n    return { \n        method: method,\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + auth.access_token}\n        }\n}\n\nfunction getFileDetails(Hash){\n    return fetch(uri()+\"/torrents/files?hash=\"+Hash, getAuthHeader(\"GET\"))\n}\n\nfunction downloadFileUrl(path){\n    return fetch(uri()+\"/public/create\", {\n        method: \"POST\",\n        body: JSON.stringify({file_path: path}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n\n    // let b64 = btoa(unescape(encodeURIComponent(path)));\n    // return uri+\"/torrent-files?path=\"+b64+\"&auth=\"+auth.access_token;\n}\n\nfunction copyFile(from, to, iscut=false){\n    return fetch(uri()+\"/torrents/files/copy-file\", {\n        method: \"POST\",\n        body: JSON.stringify({from: from, to:to, iscut: iscut}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n}\n\nfunction deleteFile(path){\n    return fetch(uri()+\"/torrents/files/delete-file\", {\n        method: \"DELETE\",\n        body: JSON.stringify({path: path}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n}\n\nfunction renameFile(path, newname){\n    return fetch(uri()+\"/torrents/files/rename-file\", {\n        method: \"POST\",\n        body: JSON.stringify({path: path, newname: newname}),\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getAuthToken().access_token\n        }\n    })\n}\n\nexport {\n    getAuthToken,\n    getFileDetails,\n    downloadFileUrl,\n    copyFile,\n    deleteFile,\n    renameFile\n}","import React, { Component } from 'react';\nimport {getAuthToken} from \"./FileManager/services/FileService\";\nimport {uri} from \"../uri\";\n\nclass VideoPlayer extends Component {\n    constructor(props){\n        super(props);\n        this.state = {width: \"10px\", height: \"10px\"}\n        this.updatePlayerWidth = this.updatePlayerWidth.bind(this);\n    }\n\n    componentDidMount(){\n        this.timer = setInterval(this.updatePlayerWidth, 100);\n    }\n\n    componentWillUnmount(){\n        clearInterval(this.timer);\n    }\n\n    updatePlayerWidth(){\n        let e = document.getElementById(\"file-card\");\n        if (!e){\n            e = document.getElementById(\"torrent-card\");\n        }\n\n        if (this.state.width !== e.offsetWidth){\n            this.setState({width: e.offsetWidth});\n        }\n    }\n\n    render(){\n        return (\n            <div className=\"video-player-container\" style={{marginBottom: \"5px\"}}>\n                <video id=\"video-player\" style={{borderRadius: \"10px\"}} width={this.state.width} controls autoPlay playsInline>\n                    <source src={this.props.src} type=\"video/mp4\"></source>\n                </video>\n            </div>\n        \n        )\n    }\n}\n\nexport default VideoPlayer;","import React, { Component } from 'react';\nimport \"../styles/AddMagnet.css\"\nimport { SendMagnet } from \"../services/TorrentService\";\nimport VideoPlayer from \"../../VideoPlayer\";\n\nclass AddMagnet extends Component {\n    constructor(props) {\n        super(props);\n        this.handleMagnetSubmit = this.handleMagnetSubmit.bind(this);\n    }\n\n    handleMagnetSubmit(e){\n        let inputBox = document.getElementById(\"add-magnet-box\");\n        if (inputBox.value){\n            SendMagnet(inputBox.id, inputBox.value);\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"add-magnet-div\">\n                    <input id=\"add-magnet-box\" type=\"text\" placeholder=\"Add Magnet Link\" />\n                    <img className=\"add-magnet-icon\" src=\"/autolycus/icons/bxs-file-plus.svg\" onClick={this.handleMagnetSubmit}/>\n                </div>\n                {this.props.videoUrl && <VideoPlayer src={this.props.videoUrl}/>}\n            </div>\n\n        )\n    }\n\n}\n\nexport default AddMagnet;","import React, { Component } from 'react';\nimport \"../styles/TorrentCard.css\";\nimport {DeleteTorrent} from \"../services/TorrentService\";\nimport {downloadFileUrl, copyFile} from \"../services/FileService\";\nimport { Progress } from 'react-sweet-progress';\nimport \"react-sweet-progress/lib/style.css\";\nimport cogoToast from 'cogo-toast';\nimport {uri} from \"../../../uri\";\n\nclass TorrentCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {threeDotMenuVisible: false, explorerCard: null}\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.handleDotMenu = this.handleDotMenu.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.getTorrentSize = this.getTorrentSize.bind(this);\n        this.handlePaste = this.handlePaste.bind(this);\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 B\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    handleDotMenu(){\n        if (!this.state.threeDotMenuVisible){\n            this.setState({threeDotMenuVisible: true});\n            document.addEventListener('click', this.handleOutsideClick, false);\n        }else {\n            this.setState({threeDotMenuVisible: false});\n            document.removeEventListener('click', this.handleOutsideClick, false);\n        }\n    }\n\n    handleOutsideClick(e) {\n        // ignore clicks on the component itself\n        if (this.node.contains(e.target)){\n            return\n        }; this.handleDotMenu();\n    }\n\n    handleDownload(item, copyLink=false){\n        cogoToast.loading(\"archiving directory\", {position: \"top-center\"}).then(() => {\n            downloadFileUrl(item.download_path).then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        let url = uri()+\"/public/\"+json.public_url_hash\n                        // download file\n                        url = url+\"?download=true\"\n                        let a = document.createElement('a');\n                        a.href = url;\n                        a.download = item.name;\n                        a.click(); a.remove();\n                        cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                    }\n                })\n            })\n        });\n    }\n\n\n    handleDelete(){\n        DeleteTorrent(this.props.data.hash)\n        .then( response => {\n            if (response.ok){\n                cogoToast.success(\"torrent deleted\", {position: \"top-center\", hideAfter: 1});\n            }\n        })\n        .catch(err => {\n            console.log(\"[ERROR] in DeleteTorrent:\", err)\n        })\n    }\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    getTorrentSize(){\n        if (!this.props.data.is_finished){\n            return this.humanFileSize(this.props.data.downloaded_bytes)+\" / \"+this.humanFileSize(this.props.data.total_bytes)+ \" (\"+ this.humanFileSize(this.props.data.download_speed)+\"/s)\";\n        }else{\n            return this.humanFileSize(this.props.data.total_bytes);\n        }\n    }\n\n    handlePaste(){\n        let item = {path: this.props.data.download_path, type: 'directory'};\n        let path = JSON.parse(window.localStorage.getItem('autolycus_copy_path'));\n        if (path.item){\n            if (item.type === \"directory\" && item.path != path.item.path){\n                copyFile(path.item.path, item.path, path.iscut).then(response => {\n                    response.json().then(json => {\n                        if (response.status == 200){\n                            cogoToast.success(\"Pasted\", {position: \"top-center\", hideAfter: 1});\n                            window.localStorage.removeItem('autolycus_copy_path');\n                        }else{\n                            console.error(json);\n                            cogoToast.error(\"Unable to paste\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    })\n                })\n            }else{\n                cogoToast.warn(\"Not allowed\", {position: \"top-center\", hideAfter: 1});\n            }\n        }else{\n            cogoToast.error(\"Nothing to paste\", {position: \"top-center\", hideAfter: 1});\n        }\n        \n    }\n\n    render(){\n        return(\n            <div className=\"torrent-card\" id=\"torrent-card\" onMouseOver={() => this.props.updateActiveItemHover(this.props.data)} onMouseOut={() => this.props.updateActiveItemHover()}>\n                <div className=\"torrent-card-info\" onClick={() => this.props.cardHandler(this.props.data)}>\n                    <img src=\"/autolycus/icons/mac-folder-icon.svg\"/>\n                    <div className=\"torrent-card-wrapper\">\n                        <p className=\"torrent-card-info-name\">{this.trimString(this.props.data.name, 30)}</p>\n                        {!this.props.data.is_finished && <Progress percent={this.props.data.progress} status=\"active\" />}\n                        <p className=\"torrent-card-info-size\">{this.getTorrentSize()}</p>\n                    </div>\n                </div>\n\n                <div className=\"torrent-card-menu\">\n                    <div className=\"torrent-card-menu-dot-wrapper\" ref={node => { this.node = node; }} onClick={this.handleDotMenu}>\n                        <div className=\"torrent-card-menu-dot\" />\n                        <div className=\"torrent-card-menu-dot\" />\n                        <div className=\"torrent-card-menu-dot\" />\n                    </div>\n                    {this.state.threeDotMenuVisible && (\n                        <div className=\"torrent-card-menu-contents\">\n                            <div onClick={() => this.handleDownload(this.props.data, true)} className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bxs-cloud-download.svg\"/>\n                                <p>Download</p>\n                            </div>\n                            \n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-link-alt.svg\"/>\n                                <p>Copy Link</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-edit-alt.svg\"/>\n                                <p>Rename</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-copy-alt.svg\"/>\n                                <p>Copy</p>\n                            </div>\n\n                            <div className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-cut.svg\"/>\n                                <p>Cut</p>\n                            </div>\n\n                            <div onClick={() => this.handlePaste()} className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-paste.svg\"/>\n                                <p>Paste</p>\n                            </div>\n\n                            <div onClick={this.handleDelete} className=\"torrent-card-menu-contents-items\">\n                                <img src=\"/autolycus/icons/bx-trash.svg\"/>\n                                <p>Delete</p>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default TorrentCard;","import React, { Component } from 'react';\nimport \"../styles/FileCard.css\";\nimport \"../styles/TorrentCard.css\";\nimport {downloadFileUrl, copyFile, deleteFile, renameFile} from \"../services/FileService\";\nimport cogoToast from 'cogo-toast';\nimport {uri} from \"../../../uri\";\n\nclass FileCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {data: null, threeDotMenuVisible: \"\", MenuTranslateY: \"0px\"};\n        this.humanFileSize = this.humanFileSize.bind(this);\n        this.trimString = this.trimString.bind(this);\n        this.getFileIcon = this.getFileIcon.bind(this);\n        this.handleDotMenu = this.handleDotMenu.bind(this);\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n        this.handleCopy = this.handleCopy.bind(this);\n        this.handlePaste = this.handlePaste.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.handleRename = this.handleRename.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.tFetcher(false);\n\n        // reason to write below line twice: https://stackoverflow.com/questions/55966533/show-alert-on-browser-back-button-event-on-react-js\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        \n        // switch to previous directory when user presses back button in browser\n        window.addEventListener('popstate', () => {this.props.goBack()}, false)\n    }\n\n    componentWillUnmount() {\n        this.props.tFetcher(true);\n    }\n\n    goBack(){\n        this.setState({data: null})\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 Bytes\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    trimString(string, length){\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            return string;\n        }else {\n            let postfix = \"\";\n            if (string.length > length){\n                postfix = \"...\";\n            }\n            return string.slice(0, length).trim()+postfix;\n        }\n    }\n\n    getFileIcon(ext){\n        if ([\".mkv\", \".mp4\", \".avi\"].includes(ext)){\n            return \"/autolycus/icons/video-file-icon.svg\";\n        }else if ([\".txt\", \".srt\", \".md\", \".docx\"].includes(ext)){\n            return \"/autolycus/icons/doc-file-icon.svg\";\n        }else if ([\".mp3\", \".wav\"].includes(ext)){\n            return \"/autolycus/icons/music-file-icon.svg\";\n        }else{\n            return \"/autolycus/icons/unknown-file-icon.svg\";\n        }\n    }\n\n    handleDotMenu(e, name){\n        let windowH = window.innerHeight-30;\n        let menuH = 220;\n\n        if (!this.state.threeDotMenuVisible){\n            this.setState({threeDotMenuVisible: name});\n            document.addEventListener('click', this.handleOutsideClick, false);\n            \n            try{\n                menuH = e.clientY+menuH;\n                if (menuH > windowH){\n                    let adjust = 50;\n                    if (window.innerWidth < 800){\n                        // adjust overflow menu\n                        adjust = 100;\n                    }\n                    this.setState({MenuTranslateY: windowH-adjust-menuH+\"px\"});\n                }\n            } catch(err){}\n\n        }else {\n            this.setState({threeDotMenuVisible: \"\", MenuTranslateY: \"0px\"});\n            document.removeEventListener('click', this.handleOutsideClick, false);\n        }\n    }\n\n    handleOutsideClick(e) {\n        if (![\"torrent-card-menu-dot\", \"torrent-card-menu-dot-wrapper\"].includes(e.target.className)){\n            this.handleDotMenu();\n        }\n    }\n\n    handleCopy(item, iscut=false){\n        let message = \"Item copied\";\n        if (iscut){\n            message = \"Item cut\";\n        }\n        cogoToast.info(message, {position: \"top-center\", hideAfter: 1});\n        window.localStorage.setItem('autolycus_copy_path', JSON.stringify({item: item, iscut: iscut}));\n    }\n\n    handlePaste(item){\n        let path = JSON.parse(window.localStorage.getItem('autolycus_copy_path'));\n        if (path){\n            if (item.type === \"directory\" && item.path != path.item.path){\n                copyFile(path.item.path, item.path, path.iscut).then(response => {\n                    response.json().then(json => {\n                        if (response.status == 200){\n                            this.props.addItem(item, path.item);\n                            cogoToast.success(\"Pasted\", {position: \"top-center\", hideAfter: 1});\n                            if (path.iscut){\n                                window.localStorage.removeItem('autolycus_copy_path');\n                            }\n                        }else{\n                            console.error(json);\n                            cogoToast.error(\"Unable to paste\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    })\n                })\n            }else{\n                cogoToast.warn(\"Not allowed\", {position: \"top-center\", hideAfter: 1});\n            }\n        }else{\n            cogoToast.error(\"Nothing to paste\", {position: \"top-center\", hideAfter: 1});\n        }\n        \n    }\n\n    handleDownload(item, copyLink=false){\n        if (item.type === \"directory\"){\n            cogoToast.loading(\"archiving directory\", {position: \"top-center\"}).then(() => {\n                downloadFileUrl(item.path).then(response => {\n                    response.json().then(json => {\n                        if (response.status === 200){\n                            let url = uri()+\"/public/\"+json.public_url_hash\n                            // download file\n                            url = url+\"?download=true\"\n                            let a = document.createElement('a');\n                            a.href = url;\n                            a.download = item.name;\n                            a.click(); a.remove();\n                            cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    })\n                })\n            });\n        } else {\n\n            downloadFileUrl(item.path).then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        let url = uri()+\"/public/\"+json.public_url_hash\n                        if (copyLink){\n                            // copy link to clipboard\n                            const el = document.createElement('textarea');\n                            el.value = url;\n                            document.body.appendChild(el);\n                            el.select();\n                            document.execCommand('copy');\n                            document.body.removeChild(el);\n                            cogoToast.success(\"copied to clipboard\", {position: \"top-center\", hideAfter: 1});\n                            \n                        }else{\n                            // download file\n                            url = url+\"?download=true\"\n                            let a = document.createElement('a');\n                            a.href = url;\n                            a.download = item.name;\n                            a.click(); a.remove();\n                            cogoToast.success(\"download started\", {position: \"top-center\", hideAfter: 1});\n                        }\n                    }\n                })\n            })\n        \n        }\n\n    }\n\n    handleDelete(item){\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p>Are you sure ?</p>\n                <button style={{backgroundColor: \"red\"}} onClick={() => confirmDelete()}>Yes</button>\n                <button style={{backgroundColor: \"#4CAF50\"}} onClick={() => hide()}>No</button>\n            </div>, {\n            hideAfter: 0\n        });\n\n        var confirmDelete = () => {\n            hide();\n            deleteFile(item.path).then(response => {\n                response.json().then(json => {\n                    if (response.status === 200){\n                        this.props.removeItem(item);\n                        // cogoToast.success(\"file deleted\", {position: \"top-center\", hideAfter: 1});\n                    }else{\n                        cogoToast.error(\"error occured\", {position: \"top-center\", hideAfter: 1});\n                        console.error(json);\n                    }\n                })\n            })\n        }\n    }\n\n    handleRename(item){\n        const selectAllText = (e) => {e.target.select()};\n        const { hide } = cogoToast.loading(\n            <div className=\"toast-confirmation\">\n                <p style={{paddingBottom: \"1px\"}}>Rename</p>\n                <input type=\"text\" id=\"toast-rename-box\" onFocus={selectAllText} placeholder=\"Enter new name\" defaultValue={item.name}></input>\n                <button style={{backgroundColor: \"#1b53f4\"}} onClick={() => confirmRename()}>Confirm</button>\n                <button style={{backgroundColor: \"#4CAF50\"}} onClick={() => hide()}>Cancel</button>\n            </div>, {\n            hideAfter: 0\n        });\n\n        var confirmRename = () => {\n            let newname = document.getElementById(\"toast-rename-box\");\n            if (newname.value && newname.value !== item.name){\n                renameFile(item.path, newname.value).then(response => {\n                    response.json().then(json => {\n                        if (response.status === 200){\n                            item.name = newname.value;\n                            this.props.renameItem(item, newname.value);\n                        }else{\n                            console.error(json);\n                        }\n                    })\n                })\n                hide();\n            }\n            \n            \n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"file-card\" style={{cursor: \"pointer\"}} onClick={() => this.props.goBack()}>\n                    <div className=\"file-card-info\">\n                        <img style={{width: \"20px\"}} src=\"/autolycus/icons/up-arrow.svg\"/>\n                        <p className=\"file-card-wrapper file-card-info-size\">Folder Up</p>\n                    </div>\n                </div>\n\n                {this.props.data.children &&\n                this.props.data.children.map((item) => {\n                    return (\n                        <div className=\"file-card\" id=\"file-card\">\n                            <div className=\"file-card-info\">\n                                {item.type === \"directory\" && <img src=\"/autolycus/icons/mac-folder-icon.svg\"/>}\n                                {item.type === \"file\" && <img style={{width:\"32px\"}} src={this.getFileIcon(item.ext)}/>}\n\n                                <div className=\"file-card-wrapper\">\n                                    <p className=\"file-card-info-name\" onClick={() => this.props.updateCard(item, this.props.data)}>{this.trimString(item.name, 30)}</p>\n                                    {item.type === \"file\" && <p className=\"file-card-info-size\">{this.humanFileSize(item.size)}</p>}\n                                </div>\n                            </div>\n\n\n                            <div className=\"torrent-card-menu\">\n                                <div className=\"torrent-card-menu-dot-wrapper\" onClick={(e) => this.handleDotMenu(e, item.name)}>\n                                    <div className=\"torrent-card-menu-dot\" />\n                                    <div className=\"torrent-card-menu-dot\" />\n                                    <div className=\"torrent-card-menu-dot\" />\n                                </div>\n                                {this.state.threeDotMenuVisible === item.name && (\n                                    <div style={{transform: \"translate(0px, \"+this.state.MenuTranslateY+\")\"}} className=\"torrent-card-menu-contents\">\n                                        <div onClick={() => this.handleDownload(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bxs-cloud-download.svg\"/>\n                                            <p>Download</p>\n                                        </div>\n                                        \n                                        <div onClick={() => this.handleDownload(item, true)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-link-alt.svg\"/>\n                                            <p>Copy Link</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleRename(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-edit-alt.svg\"/>\n                                            <p>Rename</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleCopy(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-copy-alt.svg\"/>\n                                            <p>Copy</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleCopy(item, true)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-cut.svg\"/>\n                                            <p>Cut</p>\n                                        </div>\n\n                                        <div onClick={() => this.handlePaste(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-paste.svg\"/>\n                                            <p>Paste</p>\n                                        </div>\n\n                                        <div onClick={() => this.handleDelete(item)} className=\"torrent-card-menu-contents-items\">\n                                            <img src=\"/autolycus/icons/bx-trash.svg\"/>\n                                            <p>Delete</p>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )\n                })}\n            </div>\n        )\n    }\n}\n\nexport default FileCard;","import React, { Component } from 'react';\nimport AddMagnet from \"./AddMagnet\";\nimport TorrentCard from \"./TorrentCard\";\nimport FileCard from \"./FileCard\";\nimport \"../styles/Home.css\";\nimport {getFileDetails} from \"../services/FileService\";\nimport cogoToast from 'cogo-toast';\nimport {getAuthToken} from \"../services/FileService\";\nimport {uri} from \"../../../uri\";\nimport VideoPlayer from \"../../VideoPlayer\";\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {card: null, data:null, parent_items: [], videoUrl: null}\n        this.cardHandler = this.cardHandler.bind(this);\n        this.goBack = this.goBack.bind(this);\n        this.updateCard = this.updateCard.bind(this);\n        this.removeItem = this.removeItem.bind(this);\n        this.addItem = this.addItem.bind(this);\n        this.renameItem = this.renameItem.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.tFetcher(true);\n\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        window.history.pushState({name: \"browserBack\"}, \"on browser back click\", window.location.href);\n        \n        // switch to previous directory when user presses back button in browser\n        window.addEventListener('popstate', () => {\n            // pass when on Home screen\n        }, false)\n    }\n\n    componentWillUnmount() {\n        this.props.tFetcher(false);\n    }\n\n    cardHandler(card){\n        getFileDetails(card.hash)\n        .then( response => {\n            if (response.ok){\n                response.json().then(json => {\n                    this.setState({card:card, data:json})\n                })\n            }else {\n                cogoToast.error(\"file not found\", {position: \"top-center\", hideAfter: 1});\n            }\n        }).catch( err => {\n            console.log(\"[ERROR] from getFileDetails:\", err)\n        })\n    }\n\n    goBack(){\n        let previous_item = this.state.parent_items.slice(-1)[0];\n        this.setState({data: previous_item, parent_items: this.state.parent_items.filter(i => i !== previous_item)});\n    }\n\n    updateCard(data, previous_item){\n        if (data.type === \"directory\"){\n            this.setState({ data: data, parent_items: this.state.parent_items.concat([previous_item]) })\n        }else {\n            let b64 = btoa(unescape(encodeURIComponent(data.path)));\n            let url = uri()+\"/public/\"+b64+\"?token=\"+getAuthToken().access_token;\n            if ([\".mkv\", \".mp4\", \".avi\"].includes(data.ext)){    \n                this.setState({videoUrl: url});\n            }else if ([\".txt\", \".srt\", \".jpg\", \".mp3\", \".wav\"].includes(data.ext)) {\n                let win = window.open(url, '_blank');\n                win.focus();\n            }\n        }\n    }\n\n    removeItem(e){\n        let children = this.state.data.children.filter(function(item) {\n            return item.path !== e.path\n        });\n        \n        let data = this.state.data\n        data.children = children;\n        this.setState({data: data})\n    }\n    \n    addItem(parent, child, data='none'){\n        if (data === 'none'){\n            var data = this.state.data;\n        }\n\n        if (data['children']){\n            for (var i = 0; i < data.children.length; i++) {\n                let item = data.children[i];                \n                if (item.type === 'directory'){\n                    this.addItem(parent, child, item)\n                }\n\n                if (parent.path === item.path){\n                    var filename = parent.path;\n                    var s = filename.split(\"/\");\n                    var newpath = s.slice(0, s.length).join(\"/\") + \"/\" +child.name;\n                    child.path = newpath;\n                    for (var j=0; j< parent.children.length; j++){\n                        let subchild = parent.children[j];\n                        if (subchild.name !== child.name){\n                            parent.children.push(child);\n                        }\n                    }\n                    \n                }\n            }\n        }\n    }\n\n    renameItem(item, newname){\n        var filename = item.path;\n        var s = filename.split(\"/\");\n        var newpath = s.slice(0, s.length-1).join(\"/\") + \"/\" +newname;\n        item.name = newname;\n        item.path = newpath;\n    }\n\n    render(){\n        if (this.state.data){\n            return (\n                <div style={{scrollBehavior: \"smooth\"}}>\n                    <AddMagnet videoUrl={this.state.videoUrl}/>\n                    <FileCard data={this.state.data} updateActiveItemHover={this.props.updateActiveItemHover} removeItem={this.removeItem} addItem={this.addItem} renameItem={this.renameItem} key={this.state.data} tFetcher={this.props.tFetcher} goBack={this.goBack} updateCard={this.updateCard}/>\n                </div>\n            )\n        } else {\n            return(\n                <div>\n                    <AddMagnet videoUrl={this.state.videoUrl}/>\n                    {this.props.torrents.map((data) => {return <TorrentCard data={data} key={data.name} updateActiveItemHover={this.props.updateActiveItemHover} cardHandler={this.cardHandler}/>})}\n                </div>\n            )\n        }\n    }\n\n}\n\nexport default Home;","import React, { Component } from 'react';\nimport Home from \"./components/Home\";\nimport {AuthLogout} from \"../../services/LoginService\";\n\nfunction Starred(){\n    return(<p>Starred</p>)\n}\n\nfunction RecycleBin(){\n    return(<p>RecycleBin</p>)\n}\n\nfunction Help(){\n    return(<p>Help</p>)\n}\n\nfunction Settings(){\n    return(\n        <div>\n            <p>Settings</p>\n            <button onClick={AuthLogout}>Logout</button>\n        </div>\n    )\n}\n\nclass FileManagerViews extends Component {\n    constructor(props){\n        super(props);\n        this.state = {}\n    }\n\n    render() {\n        if (this.props.view === \"Home\"){\n            return (<Home torrents={this.props.torrents} updateActiveItemHover={this.props.updateActiveItemHover} tFetcher={this.props.tFetcher}/>)\n        } else if  (this.props.view === \"Starred\"){\n            return (<Starred/>)\n        } else if (this.props.view === \"RecycleBin\"){\n            return (<RecycleBin/>)\n        } else if (this.props.view === \"Help\"){\n            return (<Help/>)\n        } else if (this.props.view === \"Settings\"){\n            return (<Settings/>)\n        }\n    }\n}\n\nexport default FileManagerViews;","import React, { Component } from 'react';\nimport Home from \"./components/Home\";\nimport {AuthLogout} from \"../../services/LoginService\";\n\nclass FileManagerInfo extends Component {\n    constructor(props){\n        super(props);\n        this.humanDate = this.humanDate.bind(this);\n        this.humanFileSize = this.humanFileSize.bind(this);\n    }\n\n    humanDate(unixTimestamp){\n        function formatAMPM(date) {\n            var hours = date.getHours();\n            var minutes = date.getMinutes();\n            var ampm = hours >= 12 ? 'PM' : 'AM';\n            hours = hours % 12;\n            hours = hours ? hours : 12; // the hour '0' should be '12'\n            minutes = minutes < 10 ? '0'+minutes : minutes;\n            var strTime = hours + ':' + minutes + ' ' + ampm;\n            return strTime;\n        }\n\n        let milliseconds = unixTimestamp * 1000;\n        let dateObject = new Date(milliseconds);\n        let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'};\n        return dateObject.toLocaleDateString(\"en-US\", options) + \", \" + formatAMPM(dateObject);\n    }\n\n    humanFileSize(size) {\n        if (!size){return \"0 B\"}\n\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n    };\n\n    render() {        \n        if (this.props.activeItem.name){\n            return (\n                <div>\n                    <h5>Name</h5>\n                    <p>{this.props.activeItem.name}</p>\n\n                    <h5>Magnet</h5>\n                    <p>{this.props.activeItem.magnet}</p>\n\n                    <h5>Created</h5>\n                    <p>{this.humanDate(this.props.activeItem.added_time)}</p>\n\n                    <h5>Size</h5>\n                    <p>{this.humanFileSize(this.props.activeItem.downloaded_bytes)}</p>\n                </div>\n            )\n            \n        }else {\n            return (<p>File info will appear here</p>)\n        }\n    }\n}\n\nexport default FileManagerInfo;","import React, { Component } from 'react';\nimport \"../../styles/FileManager.css\";\nimport FileManagerViews from \"./FileManagerViews\";\nimport FileManagerInfo from \"./FileManagerInfo\";\nimport { FetchTorrents } from \"./services/TorrentService\";\n\nclass FileManager extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {view: \"Home\", torrents: [], activeItem: {}};\n        this.username = JSON.parse(localStorage.getItem('autolycus-auth')).username;\n        this.updateView = this.updateView.bind(this);\n\n        this.timer = null;\n        this.updateTorrents = this.updateTorrents.bind(this);\n        this.tFetcher = this.tFetcher.bind(this);\n        this.updateActiveItemHover = this.updateActiveItemHover.bind(this);\n    }\n\n    tFetcher(fetch=null){\n        if (fetch){\n            this.timer = setInterval(this.updateTorrents, 2000);\n        } else {\n            clearInterval(this.timer);\n        }\n    }\n\n    updateTorrents(){\n        let Fetch = FetchTorrents();\n        if (Fetch){\n            Fetch.then(response => {\n                response.json().then(json => {\n                    this.setState({torrents: json.torrents})\n                })\n            })\n            .catch(err => {\n                console.log(\"[ERROR] in FetchTorrents:\",err);\n            })\n        }\n    }\n\n    updateView(view){\n        this.setState({ view: view});\n        let elements = document.getElementsByClassName(\"left-section-menu-items\");\n        let w = window.innerWidth;\n        \n        if ( w >= 800){\n            for (var i = 0; i < elements.length; i++) {\n                elements[i].style.backgroundColor=\"transparent\";\n            }\n            document.getElementById(view+\"NavButton\").style.backgroundColor = \"rgb(42 154 245 / 10%)\";\n        }\n    }\n\n    updateActiveItemHover(item=null){\n        if (item){\n            this.setState({activeItem: item});\n        }else{\n            this.setState({activeItem: {}});\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <div className=\"container-section\">\n                    <div className=\"left-section\">\n                        <div className=\"left-section-menu\">\n\n                            <div className=\"left-section-logo\">\n                                <img className=\"left-section-logo-icon\" width=\"35px\" src=\"/autolycus/icons/bx-meteor.svg\"/>\n                                <h3 className=\"left-section-logo-text\">Autolycus</h3>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"HomeNavButton\" onClick={() => this.updateView('Home')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-home-alt.svg\"/>\n                                <p style={{backgroundColor: \"none\"}} className=\"left-section-menu-texts\">Home</p>\n                            </div>\n                                \n                            <div className=\"left-section-menu-items\" id=\"StarredNavButton\" onClick={() => this.updateView('Starred')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-star.svg\"/>\n                                <p className=\"left-section-menu-texts\">Starred</p>\n                            </div>\n                                \n                            <div className=\"left-section-menu-items\" id=\"RecycleBinNavButton\" onClick={() => this.updateView('RecycleBin')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-trash.svg\"/>\n                                <p className=\"left-section-menu-texts\">Recycle bin</p>\n                            </div>\n                        \n                            <div className=\"left-section-menu-items\" id=\"HelpNavButton\" onClick={() => this.updateView('Help')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-help-circle.svg\"/>\n                                <p className=\"left-section-menu-texts\">Help</p>\n                            </div>\n\n                            <div className=\"left-section-menu-items\" id=\"SettingsNavButton\" onClick={() => this.updateView('Settings')}>\n                                <img className=\"left-section-menu-/autolycus/icons\" src=\"/autolycus/icons/bx-slider-alt.svg\"/>\n                                <p className=\"left-section-menu-texts\">Settings</p>\n                            </div>\n\n                            {/* <p>Upgrade</p> */}\n\n                        </div>\n                    </div>\n\n                    <div className=\"middle-section\" id=\"middle-section\">\n                        <FileManagerViews username={this.username} updateActiveItemHover={this.updateActiveItemHover} view={this.state.view} torrents={this.state.torrents} tFetcher={this.tFetcher}/>\n                    </div>\n                        \n                    <div className=\"right-section\">\n                        <FileManagerInfo activeItem={this.state.activeItem}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default FileManager;","import React, { Component } from 'react';\nimport { Route } from \"react-router-dom\";\nimport {ValidateAuth, refreshAccessToken} from \"../services/LoginService\";\nimport FileManager from \"../components/FileManager/FileManager\";\nimport ThreeDotLoader from \"../components/ThreeDotLoader\";\nimport Home from './Home';\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, authorized: false};\n      }\n\n    componentDidMount() {\n        // refresh access token every 1 hour\n        ValidateAuth(true, 60*60).then(authorized => {\n            if (authorized === true){\n                    this.setState({ loading: false, authorized: true });\n                } else {\n                    refreshAccessToken().then(authorized => {\n                        if (authorized === true){\n                            this.setState({ loading: false, authorized: true });\n                        } else {\n                            this.setState({ loading: false, authorized: false });\n                        }\n                    })\n                }\n            }\n        )\n    }\n\n    render() {\n        if (this.state.loading){return (<ThreeDotLoader/>)}\n        if (this.state.authorized) {\n            return (\n                <div>\n                    <FileManager />\n                </div>\n            )\n        } else {\n            return (<Route component={Home} />)\n        }\n    }\n\n}\n\nexport default Dashboard;","import React, { Component } from 'react';\nimport cogoToast from 'cogo-toast';\nimport {API_URL, uri} from '../uri';\nimport '../styles/ServerDown.css'\nimport Home from '../views/Home';\n\nclass ConfigureServer extends Component {\n    constructor(props) {\n        super(props);\n        this.timer = null;\n        this.state = {apiDown: true};\n        this.pingAPI = this.pingAPI.bind(this);\n        this.handleConfigureClick = this.handleConfigureClick.bind(this);\n        this.handleReset = this.handleReset.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.findGetParameter = this.findGetParameter.bind(this);\n\n        // forcefully set api address using query parameter\n        let apiParameter = this.findGetParameter('api');\n        if (apiParameter){\n            apiParameter = decodeURIComponent(apiParameter);\n            localStorage.setItem('autolycus-uri', apiParameter)\n            window.location.href = window.location.origin;\n        }\n\n    }\n\n    pingAPI(){\n        fetch(uri()+\"/ping\").then( resp => {\n            if (resp.ok){\n                this.setState({apiDown: false});\n            }\n        }).catch(err => {\n            this.setState({apiDown: true});\n        });\n    }\n\n    findGetParameter(q) {\n            return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [, null])[1];\n    }\n\n    componentDidMount() {\n        this.timer = setInterval(this.pingAPI, 1000*10);\n    }\n    \n    componentWillUnmount(){\n        clearInterval(this.timer);\n    }\n\n    handleReset(e){\n        clearInterval(this.timer);\n\n        localStorage.setItem('autolycus-uri', API_URL);\n        let input = document.getElementById('enter-api-address');\n        input.value = API_URL;\n    }\n\n    handleConfigureClick(){\n        let configureBox = document.getElementById('server-down-configure-box');\n        let toggle = document.getElementById('server-down-configure-text');\n        configureBox.style.display = 'block';\n        toggle.style.display = 'none';\n    }\n\n    handleSubmit(){\n        let input = document.getElementById('enter-api-address');\n        if (input.value.startsWith(\"http\")){\n            fetch(input.value+\"/ping\").then( resp => {\n                if (resp.ok){\n                    localStorage.setItem('autolycus-uri', input.value);\n                    this.setState({apiDown: false});\n                }else{\n                    cogoToast.error(\"API address is not reachable\", {position: \"top-center\", hideAfter: 1});\n                }\n            }).catch(err => {\n                cogoToast.error(\"API address is not reachable\", {position: \"top-center\", hideAfter: 1});\n                this.setState({apiDown: true});\n            });\n        }else {\n            cogoToast.error(\"invalid API address\", {position: \"top-center\", hideAfter: 1});\n        }\n\n    }\n\n    render(){\n        if (this.state.apiDown){\n            return (\n                <div className=\"server-down-container\">\n                    <div className=\"server-down\">\n                        <img src=\"/autolycus/icons/server-down.svg\" width=\"30%\"></img>\n                        <h3>Our Server is Feeling a Little Down</h3>\n                        <p>\n                            Please try again in a few moments.<br></br>\n                            We'll be  back up in  no time.\n                        </p>\n                        <div className=\"server-down-configure\" style={{cursor: \"pointer\"}}>\n                            <p id=\"server-down-configure-text\" onClick={this.handleConfigureClick}>Configure API Address</p>\n                            <div className=\"server-down-configure-box\" id=\"server-down-configure-box\" style={{display: 'none'}}>\n                                <input className=\"server-down-configure-input\" type=\"text\" id=\"enter-api-address\" placeholder=\"Enter API Address\" defaultValue={uri()}></input>\n                                <br></br>\n                                <button onClick={this.handleSubmit} className=\"server-down-configure-box-submit\">Submit</button>\n                                <div className=\"server-down-reset-div\">\n                                    <p style={{color: \"#484848\"}}>No idea about this?</p><p onClick={this.handleReset} className=\"server-down-reset-link\">Reset</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }else{\n            // window.location.href = '/';\n            return <Home />\n        }\n    }\n\n}\n\nexport default ConfigureServer;","import React, { Component } from 'react';\nimport {Route} from \"react-router-dom\";\nimport '../styles/Home.css';\nimport Login from '../components/Login'\nimport {ValidateAuth, clearTokens, refreshAccessToken} from \"../services/LoginService\";\nimport ThreeDotLoader from \"../components/ThreeDotLoader\";\nimport Dashboard from \"./Dashboard\";\nimport {uri} from \"../uri\";\nimport ConfigureServer from '../views/ConfigureServer';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {loading: true, authorized: false, apiDown: false};\n        this.pingAPI = this.pingAPI.bind(this);\n        this.timer = null;\n\n        // forcefully set api address using query parameter\n        let apiParameter = this.findGetParameter('api');\n        if (apiParameter){\n            apiParameter = decodeURIComponent(apiParameter);\n            localStorage.setItem('autolycus-uri', apiParameter)\n            window.location.href = window.location.origin;\n        }\n        \n    }\n\n    findGetParameter(q) {\n        return (window.location.search.match(new RegExp('[?&]' + q + '=([^&]+)')) || [, null])[1];\n     }\n\n    pingAPI(){\n        // check if api server is down\n        fetch(uri()+\"/ping\").then( resp => {\n            if (resp.ok){\n                this.setState({apiDown: false});\n            }\n        }).catch(err => {\n            this.setState({apiDown: true});\n        });\n    }\n\n    componentDidMount() {\n        this.pingAPI();\n\n        // get auth from local storage\n        let auth = localStorage.getItem('autolycus-auth');\n        if (!auth){\n            clearTokens();\n        }\n\n        ValidateAuth().then(authorized => {\n            if (authorized === true){\n                    this.setState({ loading: false, authorized: true });\n                } else {\n                    refreshAccessToken().then(authorized => {\n                        if (authorized === true){\n                            this.setState({ loading: false, authorized: true });\n                        } else {\n                            this.setState({ loading: false, authorized: false });\n                        }\n                    })\n                }\n            }\n        )\n    }\n\n    render () {\n        if (this.state.loading){\n            return (<ThreeDotLoader/>)\n        } else if (this.state.authorized) {\n            return (<Route component={Dashboard} />)\n        } else {\n            if (this.state.apiDown){\n                return (<ConfigureServer />)\n            }else{\n                return (\n                    <div>\n                        <div className=\"home-section\">\n                            <div className=\"carousel-section\"></div>\n                            <div className=\"login-section\">\n                                <div className=\"login-form\">\n                                    <Login />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n        }\n\n    }\n}\n\nexport default Home;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from './views/Home';\nimport ConfigureServer from './views/ConfigureServer';\n\nfunction App () {\n    return (\n        <div className=\"app\">\n            <Router basename={process.env.PUBLIC_URL}>\n                <Switch>\n                    <Route exact path=\"/\" component={Home} />\n                </Switch>\n            </ Router>\n        </div>\n    );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}